!function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t){var n=e("../models/chartInterface"),r=e("../models/dataSet"),i=e("../models/series"),a=new n;a.minDataSetValue=0,a.maxDataSetValue=0,a.renderCSS=!1,a.dataSet=new r,a.dataSet.add({id:"0",caption:"5 inch gloss"}),a.dataSet.at(0).series=new i,a.dataSet.at(0).series.add({id:"0",name:"Orders",value:50}),a.dataSet.at(0).series.add({id:"1",name:"Items",value:700}),a.dataSet.at(0).series.add({id:"2",name:"Extra",value:400}),a.dataSet.add({id:"1",caption:"5 inch lustre"}),a.dataSet.at(1).series=new i,a.dataSet.at(1).series.add({id:"0",name:"Orders",value:30}),a.dataSet.at(1).series.add({id:"1",name:"Items",value:500}),a.dataSet.at(1).series.add({id:"2",name:"Extra",value:300}),a.dataSet.add({id:"2",caption:"6 inch gloss"}),a.dataSet.at(2).series=new i,a.dataSet.at(2).series.add({id:"0",name:"Orders",value:40}),a.dataSet.at(2).series.add({id:"1",name:"Items",value:600}),a.dataSet.at(2).series.add({id:"2",name:"Extra",value:200}),a.dataSet.add({id:"3",caption:"6 inch lustre"}),a.dataSet.at(3).series=new i,a.dataSet.at(3).series.add({id:"0",name:"Orders",value:60}),a.dataSet.at(3).series.add({id:"1",name:"Items",value:900}),a.dataSet.at(3).series.add({id:"2",name:"Extra",value:100}),t.exports=a},{"../models/chartInterface":4,"../models/dataSet":5,"../models/series":7}],2:[function(e){var t=e("domready"),n=e("./views/body"),r=e("./models/chartGlobals");window.chartGlobals=new r,chartGlobals.minDataSetValue=0,chartGlobals.maxDataSetValue=0,window.app={init:function(){var e=this;t(function(){console.log("starting app"),e.view=new n({el:document.body})})}},window.app.init()},{"./models/chartGlobals":3,"./views/body":10,domready:57}],3:[function(e,t){var n=e("ampersand-state");t.exports=n.extend({props:{id:"string",minDataSetValue:"integer",maxDataSetValue:"integer",renderCSS:"boolean"}})},{"ampersand-state":28}],4:[function(e,t){var n=e("ampersand-state"),r=e("./dataSet");t.exports=n.extend({props:{id:"string",minDataSetValue:"integer",maxDataSetValue:"integer"},collections:{dataSet:r}})},{"./dataSet":5,"ampersand-state":28}],5:[function(e,t){var n=e("ampersand-collection"),r=e("./dataSet_item");t.exports=n.extend({model:r})},{"./dataSet_item":6,"ampersand-collection":22}],6:[function(e,t){var n=e("ampersand-state"),r=e("./series");t.exports=n.extend({props:{id:"string",caption:"string"},collections:{series:r}})},{"./series":7,"ampersand-state":28}],7:[function(e,t){var n=e("ampersand-collection"),r=e("./series_item");t.exports=n.extend({model:r})},{"./series_item":8,"ampersand-collection":22}],8:[function(e,t){var n=e("ampersand-state");t.exports=n.extend({props:{id:"string",name:"string",value:"integer"}})},{"ampersand-state":28}],9:[function(e,t,n){!function(e,r){if("function"==typeof define&&define.amd)define([],r);else if("object"==typeof n)t.exports=r();else{if("undefined"==typeof e||e!==Object(e))throw new Error("templatizer: window does not exist or is not an object");e.templatizer=r()}}(this,function(){var t=(function(){function t(e){return null!=e&&""!==e}function n(e){return(Array.isArray(e)?e.map(n):e&&"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}):[e]).filter(t).join(" ")}var r={};return r.merge=function i(e,n){if(1===arguments.length){for(var r=e[0],a=1;a<e.length;a++)r=i(r,e[a]);return r}var o=e["class"],s=n["class"];(o||s)&&(o=o||[],s=s||[],Array.isArray(o)||(o=[o]),Array.isArray(s)||(s=[s]),e["class"]=o.concat(s).filter(t));for(var u in n)"class"!=u&&(e[u]=n[u]);return e},r.joinClasses=n,r.cls=function(e,t){for(var i=[],a=0;a<e.length;a++)i.push(t&&t[a]?r.escape(n([e[a]])):n(e[a]));var o=n(i);return o.length?' class="'+o+'"':""},r.style=function(e){return e&&"object"==typeof e?Object.keys(e).map(function(t){return t+":"+e[t]}).join(";"):e},r.attr=function(e,t,n,i){return"style"===e&&(t=r.style(t)),"boolean"==typeof t||null==t?t?" "+(i?e:e+'="'+e+'"'):"":0==e.indexOf("data")&&"string"!=typeof t?(-1!==JSON.stringify(t).indexOf("&")&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),t&&"function"==typeof t.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+e+"='"+JSON.stringify(t).replace(/'/g,"&apos;")+"'"):n?(t&&"function"==typeof t.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+r.escape(t)+'"'):(t&&"function"==typeof t.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+t+'"')},r.attrs=function(e,t){var i=[],a=Object.keys(e);if(a.length)for(var o=0;o<a.length;++o){var s=a[o],u=e[s];"class"==s?(u=n(u))&&i.push(" "+s+'="'+u+'"'):i.push(r.attr(s,u,!1,t))}return i.join("")},r.escape=function(e){var t=String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return t===""+e?e:t},r.rethrow=function a(t,n,r,i){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&n||i))throw t.message+=" on line "+r,t;try{i=i||e("fs").readFileSync(n,"utf8")}catch(o){a(t,null,r)}var s=3,u=i.split("\n"),l=Math.max(r-s,0),c=Math.min(u.length,r+s),s=u.slice(l,c).map(function(e,t){var n=t+l+1;return(n==r?"  > ":"    ")+n+"| "+e}).join("\n");throw t.path=n,t.message=(n||"Jade")+":"+r+"\n"+s+"\n\n"+t.message,t},r}(),{});return t.chart={},t.chart.input={},t.chart.output={},t.body=function(){return'<body><div data-hook="interface-container" class="interface-container"></div></body>'},t.chart.input.dataSet=function(){return'<div class="dataSet-input"><ul data-hook="dataSet" class="dataSet"></ul></div>'},t.chart.input.dataSet_item=function(){return'<li class="dataSet_item"><div data-hook="caption" class="caption"></div><div data-hook="series-container" class="series-container"></div></li>'},t.chart.input.series=function(){return'<div class="series-container"><ul data-hook="series" class="series"></ul></div>'},t.chart.input.series_item=function(){return'<li class="series_item"><div data-hook="name" class="name"></div><input data-hook="value" class="value"/></li>'},t.chart["interface"]=function(){return'<div class="chart-interface"><div class="input"><div data-hook="input-container" class="input-container"></div></div><div class="output"><div data-hook="output-container" class="output-container"></div></div></div>'},t.chart.output.dataSet=function(){return'<div class="dataSet-output"><div class="scale"><div class="numbers"><div data-hook="scale-number" class="number max"></div><div data-hook="scale-number" class="number"></div><div data-hook="scale-number" class="number"></div><div data-hook="scale-number" class="number"></div><div data-hook="scale-number" class="number"></div><div data-hook="scale-number" class="number"></div><div data-hook="scale-number" class="number"></div><div data-hook="scale-null" class="number min"></div></div></div><ul data-hook="dataSet" class="dataSet"></ul></div>'},t.chart.output.dataSet_item=function(){return'<li class="dataSet_item"><div data-hook="caption" class="caption"></div><div data-hook="series-container" class="series-container"></div></li>'},t.chart.output.series=function(){return'<div class="series-container"><ul data-hook="series" class="series"></ul></div>'},t.chart.output.series_item=function(){return'<li class="series_item"><div data-hook="name" class="name"></div><div data-hook="value" class="value"></div></li>'},t})},{fs:58}],10:[function(e,t){var n=e("ampersand-view"),r=e("../templates"),i=e("./chart-interface");t.exports=n.extend({template:r.body,autoRender:!0,initialize:function(){document.title="{ Project }"},render:function(){this.renderWithTemplate(),console.log("document body rendered"),this.interfaceContainerEl=this.queryByHook("interface-container"),this.view=new i({el:this.interfaceContainerEl})}})},{"../templates":9,"./chart-interface":11,"ampersand-view":34}],11:[function(e,t){var n=e("ampersand-view"),r=e("../templates"),i=e("./chart/input"),a=e("./chart/output");chartInterfaceModel=e("../_sample-data/chartInterface"),t.exports=n.extend({template:r.chart["interface"],autoRender:!0,initialize:function(){},render:function(){this.renderWithTemplate(),console.log("rendering interface"),this.view=new i({el:this.queryByHook("input-container"),model:chartInterfaceModel}),this.view=new a({el:this.queryByHook("output-container"),model:chartInterfaceModel})}})},{"../_sample-data/chartInterface":1,"../templates":9,"./chart/input":12,"./chart/output":17,"ampersand-view":34}],12:[function(e,t){var n=e("ampersand-view"),r=(e("../../templates"),e("./input/dataSet"));t.exports=n.extend({template:'<div class="input-container" data-hook="input-container"></div>',autoRender:!0,initialize:function(){},render:function(){this.renderWithTemplate(),console.log("interface-input"),this.view=new r({el:this.queryByHook("input-container"),model:this.model})}})},{"../../templates":9,"./input/dataSet":13,"ampersand-view":34}],13:[function(e,t){var n=e("ampersand-view"),r=e("../../../templates"),i=e("./dataSet_item");t.exports=n.extend({template:r.chart.input.dataSet,autoRender:!0,initialize:function(){},render:function(){this.renderWithTemplate(),this.renderCollection(this.model.dataSet,i,this.queryByHook("dataSet"),{viewOptions:{chartInterfaceModel:this.model}})}})},{"../../../templates":9,"./dataSet_item":14,"ampersand-view":34}],14:[function(e,t){var n=e("ampersand-view"),r=e("../../../templates"),i=e("./series");t.exports=n.extend({template:r.chart.input.dataSet_item,autoRender:!0,bindings:{"model.caption":{type:"text",hook:"caption"}},initialize:function(e){this.chartInterfaceModel=e.chartInterfaceModel},render:function(){this.renderWithTemplate(),this.view=new i({el:this.queryByHook("series-container"),collection:this.model.series,chartInterfaceModel:this.chartInterfaceModel})}})},{"../../../templates":9,"./series":15,"ampersand-view":34}],15:[function(e,t){var n=e("ampersand-view"),r=e("../../../templates"),i=e("./series_item");t.exports=n.extend({template:r.chart.input.series,autoRender:!0,initialize:function(e){this.chartInterfaceModel=e.chartInterfaceModel},render:function(){this.renderWithTemplate(),this.renderCollection(this.collection,i,this.queryByHook("series"),{viewOptions:{chartInterfaceModel:this.chartInterfaceModel}})}})},{"../../../templates":9,"./series_item":16,"ampersand-view":34}],16:[function(e,t){var n=e("ampersand-view"),r=e("../../../templates");t.exports=n.extend({template:r.chart.input.series_item,autoRender:!0,events:{"keyup [data-hook=value]":"changeValue","blur [data-hook=value]":"changeValue"},bindings:{"model.name":{type:"text",hook:"name"},"model.value":{type:"value",hook:"value"}},initialize:function(e){this.chartInterfaceModel=e.chartInterfaceModel,this.listenTo(this.model,"change:value",this.valueChanged),this.valueChanged()},render:function(){this.renderWithTemplate(),this.valueEl=this.queryByHook("value")},valueChanged:function(){var e=-1e9,t=1e9,n=t,r=e;this.chartInterfaceModel.dataSet.forEach(function(e){e.series.forEach(function(e){r=Math.max(r,e.value),n=Math.min(n,e.value)})}),this.chartInterfaceModel.minDataSetValue=n,this.chartInterfaceModel.maxDataSetValue=r},changeValue:function(){var e=this.valueEl.value.trim();e&&this.model.set({value:e})}})},{"../../../templates":9,"ampersand-view":34}],17:[function(e,t){var n=e("ampersand-view"),r=(e("../../templates"),e("./output/dataSet"));t.exports=n.extend({template:'<div class="output-container" data-hook="output-container"></div>',autoRender:!0,initialize:function(){},render:function(){this.renderWithTemplate(),console.log("interface-output"),this.view=new r({el:this.queryByHook("output-container"),model:this.model})}})},{"../../templates":9,"./output/dataSet":18,"ampersand-view":34}],18:[function(e,t){var n=e("ampersand-view"),r=e("../../../templates"),a=e("./dataSet_item");t.exports=n.extend({template:r.chart.output.dataSet,autoRender:!0,bindings:{"model.minDataSetValue":{type:"text",hook:"scale-number-min"},"model.maxDataSetValue":{type:function(){this.updateSeriesItems(),this.updateScaleNumbers()},hook:"value"}},round:function(e,t){return parseFloat(e.toFixed(t))},translate:function(e,t,n){e.style["-webkit-transform"]="translate("+t+"px, "+n+"px)",e.style["-moz-transform"]="translate("+t+"px, "+n+"px)",e.style["-ms-transform"]="translate("+t+"px, "+n+"px)",e.style["-o-transform"]="translate("+t+"px, "+n+"px)",e.style.transform="translate("+t+"px, "+n+"px)"},updateSeriesItems:function(){this.model.dataSet.forEach(function(e){e.series.forEach(function(e){e.trigger("change")})})},updateScaleNumbers:function(){var e=this.nullNumberElement.parentElement.clientHeight-this.nullNumberElement.clientHeight;for(i=0;i<this.allNumberElements.length;i++){var t=this.allNumberElements.length-(i+1),n=this.model.maxDataSetValue,r=(i+1)/this.allNumberElements.length,a=this.round(n*r,0);a>100&&(a=10*this.round(a/10,0)),a>1e3&&(a=100*this.round(a/100,0)),this.allNumberElements[t].innerText=a,r=i/this.allNumberElements.length;var o=this.round(e*r,0);this.translate(this.allNumberElements[i],0,o)}this.nullNumberElement.innerText=0,this.translate(this.nullNumberElement,0,e)},initialize:function(){},render:function(){this.renderWithTemplate(),this.allNumberElements=this.queryAll('[data-hook="scale-number"]'),this.nullNumberElement=this.query('[data-hook="scale-null"]'),this.updateScaleNumbers(),this.renderCollection(this.model.dataSet,a,this.queryByHook("dataSet"),{viewOptions:{chartInterfaceModel:this.model}})}})},{"../../../templates":9,"./dataSet_item":19,"ampersand-view":34}],19:[function(e,t){var n=e("ampersand-view"),r=e("../../../templates"),i=e("./series");t.exports=n.extend({template:r.chart.output.dataSet_item,autoRender:!0,bindings:{"model.caption":{type:"text",hook:"caption"}},initialize:function(e){this.chartInterfaceModel=e.chartInterfaceModel},render:function(){this.renderWithTemplate(),this.view=new i({el:this.queryByHook("series-container"),collection:this.model.series,chartInterfaceModel:this.chartInterfaceModel})}})},{"../../../templates":9,"./series":20,"ampersand-view":34}],20:[function(e,t){var n=e("ampersand-view"),r=e("../../../templates"),i=e("./series_item");t.exports=n.extend({template:r.chart.output.series,autoRender:!0,initialize:function(e){this.chartInterfaceModel=e.chartInterfaceModel},render:function(){this.renderWithTemplate(),this.renderCollection(this.collection,i,this.queryByHook("series"),{viewOptions:{chartInterfaceModel:this.chartInterfaceModel}})}})},{"../../../templates":9,"./series_item":21,"ampersand-view":34}],21:[function(e,t){var n=e("ampersand-view"),r=e("../../../templates");t.exports=n.extend({template:r.chart.output.series_item,autoRender:!0,renderCSSonly:!1,bindings:{"model.name":{type:"text",hook:"name"},"model.value":{type:function(e){this.updateStyle(e)},hook:"value"}},updateStyle:function(){this.valueEl=this.valueEl||this.el,this.valueEl.style.height=this.model.value/this.chartInterfaceModel.maxDataSetValue*100+"%",this.el.style.width=100/this.collection.length+"%"},initialize:function(e){this.chartInterfaceModel=e.chartInterfaceModel;var t=this;t.model.on("change",function(){t.updateStyle()})},render:function(){this.renderWithTemplate(),this.valueEl=this.queryByHook("value"),this.updateStyle()}})},{"../../../templates":9,"ampersand-view":34}],22:[function(e,t){function n(e,t){if(t||(t={}),t.model&&(this.model=t.model),t.comparator&&(this.comparator=t.comparator),t.parent&&(this.parent=t.parent),!this.mainIndex){var n=this.model&&this.model.prototype&&this.model.prototype.idAttribute;this.mainIndex=n||"id"}this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,o({silent:!0},t))}var r=e("backbone-events-standalone"),i=e("ampersand-class-extend"),a=e("is-array"),o=e("extend-object"),s=[].slice;o(n.prototype,r,{initialize:function(){},indexes:[],isModel:function(e){return this.model&&e instanceof this.model},add:function(e,t){return this.set(e,o({merge:!1,add:!0,remove:!1},t))},parse:function(e){return e},serialize:function(){return this.map(function(e){if(e.serialize)return e.serialize();var t={};return o(t,e),delete t.collection,t})},toJSON:function(){return this.serialize()},set:function(e,t){t=o({add:!0,remove:!0,merge:!0},t),t.parse&&(e=this.parse(e,t));var n=!a(e);e=n?e?[e]:[]:e.slice();var r,i,s,u,l,c,f,h=t.at,d=this.comparator&&null==h&&t.sort!==!1,p="string"==typeof this.comparator?this.comparator:null,v=[],y=[],m={},g=t.add,_=t.merge,b=t.remove,w=!d&&g&&b?[]:!1,x=this.model&&this.model.prototype||Object.prototype;for(c=0,f=e.length;f>c;c++){if(s=e[c]||{},r=this.isModel(s)?i=s:x.generateId?x.generateId(s):s[x.idAttribute||this.mainIndex],u=this.get(r))b&&(m[u.cid||u[this.mainIndex]]=!0),_&&(s=s===i?i.attributes:s,t.parse&&(s=u.parse(s,t)),u.set?(u.set(s,t),d&&!l&&u.hasChanged(p)&&(l=!0)):o(u,s)),e[c]=u;else if(g){if(i=e[c]=this._prepareModel(s,t),!i)continue;v.push(i),this._addReference(i,t)}i=u||i,i&&(w&&(i.isNew&&i.isNew()||!i[this.mainIndex]||!m[i.cid||i[this.mainIndex]])&&w.push(i),m[i[this.mainIndex]]=!0)}if(b){for(c=0,f=this.length;f>c;c++)i=this.models[c],m[i.cid||i[this.mainIndex]]||y.push(i);y.length&&this.remove(y,t)}if(v.length||w&&w.length)if(d&&(l=!0),null!=h)for(c=0,f=v.length;f>c;c++)this.models.splice(h+c,0,v[c]);else{var E=w||v;for(c=0,f=E.length;f>c;c++)this.models.push(E[c])}if(l&&this.sort({silent:!0}),!t.silent){for(c=0,f=v.length;f>c;c++)i=v[c],i.trigger?i.trigger("add",i,this,t):this.trigger("add",i,this,t);(l||w&&w.length)&&this.trigger("sort",this,t)}return n?e[0]:e},get:function(e,t){if(e){var n=this._indexes[t||this.mainIndex];return n[e]||n[e[this.mainIndex]]||this._indexes.cid[e]||this._indexes.cid[e.cid]}},at:function(e){return this.models[e]},remove:function(e,t){var n,r,i,o,u=!a(e);for(e=u?[e]:s.call(e),t||(t={}),n=0,r=e.length;r>n;n++)i=e[n]=this.get(e[n]),i&&(this._deIndex(i),o=this.models.indexOf(i),this.models.splice(o,1),t.silent||(t.index=o,i.trigger?i.trigger("remove",i,this,t):this.trigger("remove",i,this,t)),this._removeReference(i,t));return u?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,o({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},sort:function(e){var t=this;if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),this.models.sort("string"==typeof this.comparator?function(e,n){return e.get?(e=e.get(t.comparator),n=n.get(t.comparator)):(e=e[t.comparator],n=n[t.comparator]),e>n||void 0===e?1:n>e||void 0===n?-1:0}:1===this.comparator.length?function(e,n){return e=t.comparator(e),n=t.comparator(n),e>n||void 0===e?1:n>e||void 0===n?-1:0}:this.comparator.bind(this)),e.silent||this.trigger("sort",this,e),this},_reset:function(){var e=this.indexes||[],t=0;e.push(this.mainIndex),e.push("cid");var n=e.length;for(this.models=[],this._indexes={};n>t;t++)this._indexes[e[t]]={}},_prepareModel:function(e,t){if(!this.model)return e;if(this.isModel(e))return e.collection||(e.collection=this),e;t=t?o({},t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_deIndex:function(e){for(var t in this._indexes)delete this._indexes[t][e[t]||e.get&&e.get(t)]},_index:function(e){for(var t in this._indexes){var n=e[t]||e.get&&e.get(t);n&&(this._indexes[t][n]=e)}},_addReference:function(e){this._index(e),e.collection||(e.collection=this),e.on&&e.on("all",this._onModelEvent,this)},_removeReference:function(e){this===e.collection&&delete e.collection,this._deIndex(e),e.off&&e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,r),t&&e==="change:"+this.mainIndex&&(this._deIndex(t),this._index(t)),this.trigger.apply(this,arguments))}}),Object.defineProperties(n.prototype,{length:{get:function(){return this.models.length}},isCollection:{value:!0}});var u=["indexOf","lastIndexOf","every","some","forEach","map","filter","reduce","reduceRight"];u.forEach(function(e){n.prototype[e]=function(){return this.models[e].apply(this.models,arguments)}}),n.prototype.each=n.prototype.forEach,n.extend=i,t.exports=n},{"ampersand-class-extend":23,"backbone-events-standalone":25,"extend-object":26,"is-array":27}],23:[function(e,t){var n=e("extend-object"),r=function(e){var t,r=this,i=[].slice.call(arguments);t=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return r.apply(this,arguments)},n(t,r);var a=function(){this.constructor=t};return a.prototype=r.prototype,t.prototype=new a,e&&(i.unshift(t.prototype),n.apply(null,i)),t.__super__=r.prototype,t};t.exports=r},{"extend-object":26}],24:[function(e,t,n){!function(){function e(){return{keys:Object.keys,uniqueId:function(e){var t=++l+"";return e?e+t:t},has:function(e,t){return s.call(e,t)},each:function(e,t,n){if(null!=e)if(o&&e.forEach===o)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,i=e.length;i>r;r++)if(t.call(n,e[r],r,e)===a)return}else for(var s in e)if(this.has(e,s)&&t.call(n,e[s],s,e)===a)return},once:function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}}}}var r,i=this,a={},o=Array.prototype.forEach,s=Object.prototype.hasOwnProperty,u=Array.prototype.slice,l=0,c=e();r={on:function(e,t,n){if(!h(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!h(this,"once",e,[t,n])||!t)return this;var r=this,i=c.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,a,o,s,u,l,f;if(!this._events||!h(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(o=e?[e]:c.keys(this._events),s=0,u=o.length;u>s;s++)if(e=o[s],a=this._events[e]){if(this._events[e]=r=[],t||n)for(l=0,f=a.length;f>l;l++)i=a[l],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!h(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&d(n,t),r&&d(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;"object"==typeof t&&(n=this),e&&((r={})[e._listenerId]=e);for(var a in r)r[a].off(t,n,this),i&&delete this._listeners[a];return this}};var f=/\s+/,h=function(e,t,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){for(var a=n.split(f),o=0,s=a.length;s>o;o++)e[t].apply(e,[a[o]].concat(r));return!1}return!0},d=function(e,t){var n,r=-1,i=e.length,a=t[0],o=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,a);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,a,o);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,a,o,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t)}},p={listenTo:"on",listenToOnce:"once"};c.each(p,function(e,t){r[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),a=t._listenerId||(t._listenerId=c.uniqueId("l"));return i[a]=t,"object"==typeof n&&(r=this),t[e](n,r,this),this}}),r.bind=r.on,r.unbind=r.off,r.mixin=function(e){var t=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return c.each(t,function(t){e[t]=this[t]},this),e},"function"==typeof define?define(function(){return r}):"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=r),n.BackboneEvents=r):i.BackboneEvents=r}(this)},{}],25:[function(e,t){t.exports=e("./backbone-events-standalone")},{"./backbone-events-standalone":24}],26:[function(e,t){var n=[],r=n.forEach,i=n.slice;t.exports=function(e){return r.call(i.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e}},{}],27:[function(e,t){var n=Array.isArray,r=Object.prototype.toString;t.exports=n||function(e){return!!e&&"[object Array]"==r.call(e)}},{}],28:[function(e,t){function n(e,t){t||(t={}),this.cid||(this.cid=o.uniqueId("state")),this._events={},this._values={},this._definition=Object.create(this._definition),t.parse&&(e=this.parse(e,t)),this.parent=t.parent,this.collection=t.collection,this._keyTree=new u,this._initCollections(),this._initChildren(),this._cache={},this._previousAttributes={},e&&this.set(e,o.extend({silent:!0,initial:!0},t)),this._changed={},this._derived&&this._initDerived(),t.init!==!1&&this.initialize.apply(this,arguments)}function r(e,t,n,r){var i,a,s=e._definition[t]={};if(o.isString(n))i=e._ensureValidType(n),i&&(s.type=i);else{if(o.isArray(n)&&(a=n,n={type:a[0],required:a[1],"default":a[2]}),i=e._ensureValidType(n.type),i&&(s.type=i),n.required&&(s.required=!0),n["default"]&&"object"==typeof n["default"])throw new TypeError("The default value for "+t+" cannot be an object/array, must be a value or a function which returns a value/object/array");s["default"]=n["default"],s.allowNull=n.allowNull?n.allowNull:!1,n.setOnce&&(s.setOnce=!0),s.required&&o.isUndefined(s["default"])&&!s.setOnce&&(s["default"]=e._getDefaultForType(i)),s.test=n.test,s.values=n.values}return r&&(s.session=!0),Object.defineProperty(e,t,{set:function(e){this.set(t,e)},get:function(){var e=this._values[t],n=this._dataTypes[s.type];return"undefined"!=typeof e?(n&&n.get&&(e=n.get(e)),e):(e=o.result(s,"default"),this._values[t]=e,e)}}),s}function i(e,t,n){var r=e._derived[t]={fn:o.isFunction(n)?n:n.fn,cache:n.cache!==!1,depList:n.deps||[]};o.each(r.depList,function(n){e._deps[n]=o(e._deps[n]||[]).union([t])}),Object.defineProperty(e,t,{get:function(){return this._getDerivedProperty(t)},set:function(){throw new TypeError('"'+t+"\" is a derived property, it can't be set directly.")}})}function a(e){var t,n=this,a=[].slice.call(arguments);t=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return n.apply(this,arguments)},o.extend(t,n);var s=function(){this.constructor=t};s.prototype=n.prototype,t.prototype=new s,t.prototype._derived=o.extend({},n.prototype._derived),t.prototype._deps=o.extend({},n.prototype._deps),t.prototype._definition=o.extend({},n.prototype._definition),t.prototype._collections=o.extend({},n.prototype._collections),t.prototype._children=o.extend({},n.prototype._children),t.prototype._dataTypes=o.extend({},n.prototype._dataTypes||f),e&&a.forEach(function(e){var n=["dataTypes","props","session","derived","collections","children"];e.dataTypes&&o.each(e.dataTypes,function(e,n){t.prototype._dataTypes[n]=e}),e.props&&o.each(e.props,function(e,n){r(t.prototype,n,e)}),e.session&&o.each(e.session,function(e,n){r(t.prototype,n,e,!0)}),e.derived&&o.each(e.derived,function(e,n){i(t.prototype,n,e)}),e.collections&&o.each(e.collections,function(e,n){t.prototype._collections[n]=e}),e.children&&o.each(e.children,function(e,n){t.prototype._children[n]=e}),o.extend(t.prototype,o.omit(e,n))});Object.prototype.toString;return t.__super__=n.prototype,t}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-state"]=window.ampersand["ampersand-state"]||[],window.ampersand["ampersand-state"].push("4.4.4"));var o=e("underscore"),s=e("backbone-events-standalone"),u=e("key-tree-store"),l=e("array-next"),c=/^change:/;o.extend(n.prototype,s,{extraProperties:"ignore",idAttribute:"id",namespaceAttribute:"namespace",typeAttribute:"modelType",initialize:function(){return this},getId:function(){return this[this.idAttribute]},getNamespace:function(){return this[this.namespaceAttribute]},getType:function(){return this[this.typeAttribute]},isNew:function(){return null==this.getId()},escape:function(e){return o.escape(this.get(e))},isValid:function(e){return this._validate({},o.extend(e||{},{validate:!0}))},parse:function(e){return e},serialize:function(){var e=this.getAttributes({props:!0},!0);return o.each(this._children,function(t,n){e[n]=this[n].serialize()},this),o.each(this._collections,function(t,n){e[n]=this[n].serialize()},this),e},set:function(e,t,n){var r,i,a,s,u,l,c,f,h,d,p,v,y,m,g,_,b=this,w=this.extraProperties;if(o.isObject(e)||null===e?(h=e,n=t):(h={},h[e]=t),n=n||{},!this._validate(h,n))return!1;v=n.unset,p=n.silent,m=n.initial,i=[],r=this._changing,this._changing=!0,r||(this._previousAttributes=this.attributes,this._changed={});for(f in h){if(s=h[f],a=typeof s,y=this._values[f],u=this._definition[f],!u){if(this._children[f]||this._collections[f]){this[f].set(s,n);continue}if("ignore"===w)continue;if("reject"===w)throw new TypeError('No "'+f+'" property defined on '+(this.type||"this")+' model and extraProperties not set to "ignore" or "allow"');if("allow"===w)u=this._createPropertyDefinition(f,"any");else if(w)throw new TypeError('Invalid value for extraProperties: "'+w+'"')}if(_=this._getCompareForType(u.type),d=this._dataTypes[u.type],d&&d.set&&(l=d.set(s),s=l.val,a=l.type),u.test&&(c=u.test.call(this,s,a)))throw new TypeError("Property '"+f+"' failed validation with error: "+c);if(o.isUndefined(s)&&u.required)throw new TypeError("Required property '"+f+"' must be of type "+u.type+". Tried to set "+s);if(o.isNull(s)&&u.required&&!u.allowNull)throw new TypeError("Property '"+f+"' must be of type "+u.type+" (cannot be null). Tried to set "+s);if(u.type&&"any"!==u.type&&u.type!==a&&!o.isNull(s)&&!o.isUndefined(s))throw new TypeError("Property '"+f+"' must be of type "+u.type+". Tried to set "+s);if(u.values&&!o.contains(u.values,s))throw new TypeError("Property '"+f+"' must be one of values: "+u.values.join(", ")+". Tried to set "+s);if(g=!_(y,s,f),u.setOnce&&void 0!==y&&g&&!m)throw new TypeError("Property '"+f+"' can only be set once.");g?(i.push({prev:y,val:s,key:f}),b._changed[f]=s):delete b._changed[f]}if(o.each(i,function(e){b._previousAttributes[e.key]=e.prev,v?delete b._values[e.key]:b._values[e.key]=e.val}),!p&&i.length&&(b._pending=!0),p||o.each(i,function(e){b.trigger("change:"+e.key,b,e.val,n)}),r)return this;if(!p)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},get:function(e){return this[e]},toggle:function(e){var t=this._definition[e];if("boolean"===t.type)this[e]=!this[e];else{if(!t||!t.values)throw new TypeError("Can only toggle properties that are type `boolean` or have `values` array.");this[e]=l(t.values,this[e])}return this},previousAttributes:function(){return o.clone(this._previousAttributes)},hasChanged:function(e){return null==e?!o.isEmpty(this._changed):o.has(this._changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?o.clone(this._changed):!1;var t,n,r,i=!1,a=this._changing?this._previousAttributes:this.attributes;for(var s in e)n=this._definition[s],n&&(r=this._getCompareForType(n.type),r(a[s],t=e[s])||((i||(i={}))[s]=t));return i},toJSON:function(){return this.serialize()},unset:function(e,t){{var n,r=this._definition[e];r.type}return r.required?(n=o.result(r,"default"),this.set(e,n,t)):this.set(e,n,o.extend({},t,{unset:!0}))},clear:function(e){var t=this;return o.each(o.keys(this.attributes),function(n){t.unset(n,e)}),this},previous:function(e){return null!=e&&Object.keys(this._previousAttributes).length?this._previousAttributes[e]:null},_getDefaultForType:function(e){var t=this._dataTypes[e];return t&&t["default"]},_getCompareForType:function(e){var t=this._dataTypes[e];return t&&t.compare?o.bind(t.compare,this):o.isEqual},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=o.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,o.extend(t||{},{validationError:n})),!1):!0
},_createPropertyDefinition:function(e,t,n){return r(this,e,t,n)},_ensureValidType:function(e){return o.contains(["string","number","boolean","array","object","date","any"].concat(o.keys(this._dataTypes)),e)?e:void 0},getAttributes:function(e,t){e||(e={}),o.defaults(e,{session:!1,props:!1,derived:!1});var n,r,i,a={};for(r in this._definition)i=this._definition[r],(e.session&&i.session||e.props&&!i.session)&&(n=t?this._values[r]:this[r],"undefined"==typeof n&&(n=o.result(i,"default")),"undefined"!=typeof n&&(a[r]=n));if(e.derived)for(r in this._derived)a[r]=this[r];return a},_initDerived:function(){var e=this;o.each(this._derived,function(t,n){var r=e._derived[n];r.deps=r.depList;var i=function(t){t=t||{};var i=r.fn.call(e);e._cache[n]===i&&r.cache||(r.cache&&(e._previousAttributes[n]=e._cache[n]),e._cache[n]=i,e.trigger("change:"+n,e,e._cache[n]))};r.deps.forEach(function(t){e._keyTree.add(t,i)})}),this.on("all",function(t){c.test(t)&&e._keyTree.get(t.split(":")[1]).forEach(function(e){e()})},this)},_getDerivedProperty:function(e,t){return this._derived[e].cache?((t||!this._cache.hasOwnProperty(e))&&(this._cache[e]=this._derived[e].fn.apply(this)),this._cache[e]):this._derived[e].fn.apply(this)},_initCollections:function(){var e;if(this._collections)for(e in this._collections)this[e]=new this._collections[e](null,{parent:this})},_initChildren:function(){var e;if(this._children)for(e in this._children)this[e]=new this._children[e]({},{parent:this}),this.listenTo(this[e],"all",this._getEventBubblingHandler(e))},_getEventBubblingHandler:function(e){return o.bind(function(t,n,r){c.test(t)?this.trigger("change:"+e+"."+t.split(":")[1],n,r):"change"===t&&this.trigger("change",this)},this)},_verifyRequired:function(){var e=this.attributes;for(var t in this._definition)if(this._definition[t].required&&"undefined"==typeof e[t])return!1;return!0}}),Object.defineProperties(n.prototype,{attributes:{get:function(){return this.getAttributes({props:!0,session:!0})}},all:{get:function(){return this.getAttributes({session:!0,props:!0,derived:!0})}},isState:{get:function(){return!0},set:function(){}}});var f={string:{"default":function(){return""}},date:{set:function(e){var t;if(o.isDate(e))t="date",e=e.valueOf();else try{var n=new Date(e).valueOf();if(isNaN(n)&&(n=new Date(parseInt(e,10)).valueOf(),isNaN(n)))throw TypeError;e=n,t="date"}catch(r){t=typeof e}return{val:e,type:t}},get:function(e){return new Date(e)},"default":function(){return new Date}},array:{set:function(e){return{val:e,type:o.isArray(e)?"array":typeof e}},"default":function(){return[]}},object:{set:function(e){var t=typeof e;return"object"!==t&&o.isUndefined(e)&&(e=null,t="object"),{val:e,type:t}},"default":function(){return{}}},state:{set:function(e){var t=e instanceof n||e&&e.isState;return t?{val:e,type:"state"}:{val:e,type:typeof e}},compare:function(e,t,n){var r=e===t;return r||(e&&this.stopListening(e),null!=t&&this.listenTo(t,"all",this._getEventBubblingHandler(n))),r}}};n.extend=a,t.exports=n},{"array-next":29,"backbone-events-standalone":31,"key-tree-store":32,underscore:33}],29:[function(e,t){t.exports=function(e,t){var n=e.length,r=e.indexOf(t)+1;return r>n-1&&(r=0),e[r]}},{}],30:[function(e,t){t.exports=e(24)},{}],31:[function(e,t){t.exports=e(25)},{"./backbone-events-standalone":30}],32:[function(e,t){function n(){this.storage={}}n.prototype.add=function(e,t){var n=this.storage[e]||(this.storage[e]=[]);n.push(t)},n.prototype.remove=function(e){var t,n;for(t in this.storage)n=this.storage[t],n.some(function(t,r){return t===e?(n.splice(r,1),!0):void 0})},n.prototype.get=function(e){var t,n=[];for(t in this.storage)(e===t||0===t.indexOf(e+"."))&&(n=n.concat(this.storage[t]));return n},t.exports=n},{}],33:[function(e,t,n){(function(){var e=this,r=e._,i=Array.prototype,a=Object.prototype,o=Function.prototype,s=i.push,u=i.slice,l=i.concat,c=a.toString,f=a.hasOwnProperty,h=Array.isArray,d=Object.keys,p=o.bind,v=function(e){return e instanceof v?e:this instanceof v?void(this._wrapped=e):new v(e)};"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=v),n._=v):e._=v,v.VERSION="1.7.0";var y=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,a){return e.call(t,n,r,i,a)}}return function(){return e.apply(t,arguments)}};v.iteratee=function(e,t,n){return null==e?v.identity:v.isFunction(e)?y(e,t,n):v.isObject(e)?v.matches(e):v.property(e)},v.each=v.forEach=function(e,t,n){if(null==e)return e;t=y(t,n);var r,i=e.length;if(i===+i)for(r=0;i>r;r++)t(e[r],r,e);else{var a=v.keys(e);for(r=0,i=a.length;i>r;r++)t(e[a[r]],a[r],e)}return e},v.map=v.collect=function(e,t,n){if(null==e)return[];t=v.iteratee(t,n);for(var r,i=e.length!==+e.length&&v.keys(e),a=(i||e).length,o=Array(a),s=0;a>s;s++)r=i?i[s]:s,o[s]=t(e[r],r,e);return o};var m="Reduce of empty array with no initial value";v.reduce=v.foldl=v.inject=function(e,t,n,r){null==e&&(e=[]),t=y(t,r,4);var i,a=e.length!==+e.length&&v.keys(e),o=(a||e).length,s=0;if(arguments.length<3){if(!o)throw new TypeError(m);n=e[a?a[s++]:s++]}for(;o>s;s++)i=a?a[s]:s,n=t(n,e[i],i,e);return n},v.reduceRight=v.foldr=function(e,t,n,r){null==e&&(e=[]),t=y(t,r,4);var i,a=e.length!==+e.length&&v.keys(e),o=(a||e).length;if(arguments.length<3){if(!o)throw new TypeError(m);n=e[a?a[--o]:--o]}for(;o--;)i=a?a[o]:o,n=t(n,e[i],i,e);return n},v.find=v.detect=function(e,t,n){var r;return t=v.iteratee(t,n),v.some(e,function(e,n,i){return t(e,n,i)?(r=e,!0):void 0}),r},v.filter=v.select=function(e,t,n){var r=[];return null==e?r:(t=v.iteratee(t,n),v.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r)},v.reject=function(e,t,n){return v.filter(e,v.negate(v.iteratee(t)),n)},v.every=v.all=function(e,t,n){if(null==e)return!0;t=v.iteratee(t,n);var r,i,a=e.length!==+e.length&&v.keys(e),o=(a||e).length;for(r=0;o>r;r++)if(i=a?a[r]:r,!t(e[i],i,e))return!1;return!0},v.some=v.any=function(e,t,n){if(null==e)return!1;t=v.iteratee(t,n);var r,i,a=e.length!==+e.length&&v.keys(e),o=(a||e).length;for(r=0;o>r;r++)if(i=a?a[r]:r,t(e[i],i,e))return!0;return!1},v.contains=v.include=function(e,t){return null==e?!1:(e.length!==+e.length&&(e=v.values(e)),v.indexOf(e,t)>=0)},v.invoke=function(e,t){var n=u.call(arguments,2),r=v.isFunction(t);return v.map(e,function(e){return(r?t:e[t]).apply(e,n)})},v.pluck=function(e,t){return v.map(e,v.property(t))},v.where=function(e,t){return v.filter(e,v.matches(t))},v.findWhere=function(e,t){return v.find(e,v.matches(t))},v.max=function(e,t,n){var r,i,a=-1/0,o=-1/0;if(null==t&&null!=e){e=e.length===+e.length?e:v.values(e);for(var s=0,u=e.length;u>s;s++)r=e[s],r>a&&(a=r)}else t=v.iteratee(t,n),v.each(e,function(e,n,r){i=t(e,n,r),(i>o||i===-1/0&&a===-1/0)&&(a=e,o=i)});return a},v.min=function(e,t,n){var r,i,a=1/0,o=1/0;if(null==t&&null!=e){e=e.length===+e.length?e:v.values(e);for(var s=0,u=e.length;u>s;s++)r=e[s],a>r&&(a=r)}else t=v.iteratee(t,n),v.each(e,function(e,n,r){i=t(e,n,r),(o>i||1/0===i&&1/0===a)&&(a=e,o=i)});return a},v.shuffle=function(e){for(var t,n=e&&e.length===+e.length?e:v.values(e),r=n.length,i=Array(r),a=0;r>a;a++)t=v.random(0,a),t!==a&&(i[a]=i[t]),i[t]=n[a];return i},v.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=v.values(e)),e[v.random(e.length-1)]):v.shuffle(e).slice(0,Math.max(0,t))},v.sortBy=function(e,t,n){return t=v.iteratee(t,n),v.pluck(v.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var g=function(e){return function(t,n,r){var i={};return n=v.iteratee(n,r),v.each(t,function(r,a){var o=n(r,a,t);e(i,r,o)}),i}};v.groupBy=g(function(e,t,n){v.has(e,n)?e[n].push(t):e[n]=[t]}),v.indexBy=g(function(e,t,n){e[n]=t}),v.countBy=g(function(e,t,n){v.has(e,n)?e[n]++:e[n]=1}),v.sortedIndex=function(e,t,n,r){n=v.iteratee(n,r,1);for(var i=n(t),a=0,o=e.length;o>a;){var s=a+o>>>1;n(e[s])<i?a=s+1:o=s}return a},v.toArray=function(e){return e?v.isArray(e)?u.call(e):e.length===+e.length?v.map(e,v.identity):v.values(e):[]},v.size=function(e){return null==e?0:e.length===+e.length?e.length:v.keys(e).length},v.partition=function(e,t,n){t=v.iteratee(t,n);var r=[],i=[];return v.each(e,function(e,n,a){(t(e,n,a)?r:i).push(e)}),[r,i]},v.first=v.head=v.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:u.call(e,0,t)},v.initial=function(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},v.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},v.rest=v.tail=v.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},v.compact=function(e){return v.filter(e,v.identity)};var _=function(e,t,n,r){if(t&&v.every(e,v.isArray))return l.apply(r,e);for(var i=0,a=e.length;a>i;i++){var o=e[i];v.isArray(o)||v.isArguments(o)?t?s.apply(r,o):_(o,t,n,r):n||r.push(o)}return r};v.flatten=function(e,t){return _(e,t,!1,[])},v.without=function(e){return v.difference(e,u.call(arguments,1))},v.uniq=v.unique=function(e,t,n,r){if(null==e)return[];v.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=v.iteratee(n,r));for(var i=[],a=[],o=0,s=e.length;s>o;o++){var u=e[o];if(t)o&&a===u||i.push(u),a=u;else if(n){var l=n(u,o,e);v.indexOf(a,l)<0&&(a.push(l),i.push(u))}else v.indexOf(i,u)<0&&i.push(u)}return i},v.union=function(){return v.uniq(_(arguments,!0,!0,[]))},v.intersection=function(e){if(null==e)return[];for(var t=[],n=arguments.length,r=0,i=e.length;i>r;r++){var a=e[r];if(!v.contains(t,a)){for(var o=1;n>o&&v.contains(arguments[o],a);o++);o===n&&t.push(a)}}return t},v.difference=function(e){var t=_(u.call(arguments,1),!0,!0,[]);return v.filter(e,function(e){return!v.contains(t,e)})},v.zip=function(e){if(null==e)return[];for(var t=v.max(arguments,"length").length,n=Array(t),r=0;t>r;r++)n[r]=v.pluck(arguments,r);return n},v.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},v.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=v.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}for(;i>r;r++)if(e[r]===t)return r;return-1},v.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=e.length;for("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1));--r>=0;)if(e[r]===t)return r;return-1},v.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),a=0;r>a;a++,e+=n)i[a]=e;return i};var b=function(){};v.bind=function(e,t){var n,r;if(p&&e.bind===p)return p.apply(e,u.call(arguments,1));if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");return n=u.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(u.call(arguments)));b.prototype=e.prototype;var i=new b;b.prototype=null;var a=e.apply(i,n.concat(u.call(arguments)));return v.isObject(a)?a:i}},v.partial=function(e){var t=u.call(arguments,1);return function(){for(var n=0,r=t.slice(),i=0,a=r.length;a>i;i++)r[i]===v&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return e.apply(this,r)}},v.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=v.bind(e[n],e);return e},v.memoize=function(e,t){var n=function(r){var i=n.cache,a=t?t.apply(this,arguments):r;return v.has(i,a)||(i[a]=e.apply(this,arguments)),i[a]};return n.cache={},n},v.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},v.defer=function(e){return v.delay.apply(v,[e,1].concat(u.call(arguments,1)))},v.throttle=function(e,t,n){var r,i,a,o=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:v.now(),o=null,a=e.apply(r,i),o||(r=i=null)};return function(){var l=v.now();s||n.leading!==!1||(s=l);var c=t-(l-s);return r=this,i=arguments,0>=c||c>t?(clearTimeout(o),o=null,s=l,a=e.apply(r,i),o||(r=i=null)):o||n.trailing===!1||(o=setTimeout(u,c)),a}},v.debounce=function(e,t,n){var r,i,a,o,s,u=function(){var l=v.now()-o;t>l&&l>0?r=setTimeout(u,t-l):(r=null,n||(s=e.apply(a,i),r||(a=i=null)))};return function(){a=this,i=arguments,o=v.now();var l=n&&!r;return r||(r=setTimeout(u,t)),l&&(s=e.apply(a,i),a=i=null),s}},v.wrap=function(e,t){return v.partial(t,e)},v.negate=function(e){return function(){return!e.apply(this,arguments)}},v.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},v.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},v.before=function(e,t){var n;return function(){return--e>0?n=t.apply(this,arguments):t=null,n}},v.once=v.partial(v.before,2),v.keys=function(e){if(!v.isObject(e))return[];if(d)return d(e);var t=[];for(var n in e)v.has(e,n)&&t.push(n);return t},v.values=function(e){for(var t=v.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},v.pairs=function(e){for(var t=v.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},v.invert=function(e){for(var t={},n=v.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},v.functions=v.methods=function(e){var t=[];for(var n in e)v.isFunction(e[n])&&t.push(n);return t.sort()},v.extend=function(e){if(!v.isObject(e))return e;for(var t,n,r=1,i=arguments.length;i>r;r++){t=arguments[r];for(n in t)f.call(t,n)&&(e[n]=t[n])}return e},v.pick=function(e,t,n){var r,i={};if(null==e)return i;if(v.isFunction(t)){t=y(t,n);for(r in e){var a=e[r];t(a,r,e)&&(i[r]=a)}}else{var o=l.apply([],u.call(arguments,1));e=new Object(e);for(var s=0,c=o.length;c>s;s++)r=o[s],r in e&&(i[r]=e[r])}return i},v.omit=function(e,t,n){if(v.isFunction(t))t=v.negate(t);else{var r=v.map(l.apply([],u.call(arguments,1)),String);t=function(e,t){return!v.contains(r,t)}}return v.pick(e,t,n)},v.defaults=function(e){if(!v.isObject(e))return e;for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];for(var i in r)void 0===e[i]&&(e[i]=r[i])}return e},v.clone=function(e){return v.isObject(e)?v.isArray(e)?e.slice():v.extend({},e):e},v.tap=function(e,t){return t(e),e};var w=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof v&&(e=e._wrapped),t instanceof v&&(t=t._wrapped);var i=c.call(e);if(i!==c.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}if("object"!=typeof e||"object"!=typeof t)return!1;for(var a=n.length;a--;)if(n[a]===e)return r[a]===t;var o=e.constructor,s=t.constructor;if(o!==s&&"constructor"in e&&"constructor"in t&&!(v.isFunction(o)&&o instanceof o&&v.isFunction(s)&&s instanceof s))return!1;n.push(e),r.push(t);var u,l;if("[object Array]"===i){if(u=e.length,l=u===t.length)for(;u--&&(l=w(e[u],t[u],n,r)););}else{var f,h=v.keys(e);if(u=h.length,l=v.keys(t).length===u)for(;u--&&(f=h[u],l=v.has(t,f)&&w(e[f],t[f],n,r)););}return n.pop(),r.pop(),l};v.isEqual=function(e,t){return w(e,t,[],[])},v.isEmpty=function(e){if(null==e)return!0;if(v.isArray(e)||v.isString(e)||v.isArguments(e))return 0===e.length;for(var t in e)if(v.has(e,t))return!1;return!0},v.isElement=function(e){return!(!e||1!==e.nodeType)},v.isArray=h||function(e){return"[object Array]"===c.call(e)},v.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},v.each(["Arguments","Function","String","Number","Date","RegExp"],function(e){v["is"+e]=function(t){return c.call(t)==="[object "+e+"]"}}),v.isArguments(arguments)||(v.isArguments=function(e){return v.has(e,"callee")}),"function"!=typeof/./&&(v.isFunction=function(e){return"function"==typeof e||!1}),v.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},v.isNaN=function(e){return v.isNumber(e)&&e!==+e},v.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===c.call(e)},v.isNull=function(e){return null===e},v.isUndefined=function(e){return void 0===e},v.has=function(e,t){return null!=e&&f.call(e,t)},v.noConflict=function(){return e._=r,this},v.identity=function(e){return e},v.constant=function(e){return function(){return e}},v.noop=function(){},v.property=function(e){return function(t){return t[e]}},v.matches=function(e){var t=v.pairs(e),n=t.length;return function(e){if(null==e)return!n;e=new Object(e);for(var r=0;n>r;r++){var i=t[r],a=i[0];if(i[1]!==e[a]||!(a in e))return!1}return!0}},v.times=function(e,t,n){var r=Array(Math.max(0,e));t=y(t,n,1);for(var i=0;e>i;i++)r[i]=t(i);return r},v.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},v.now=Date.now||function(){return(new Date).getTime()};var x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},E=v.invert(x),k=function(e){var t=function(t){return e[t]},n="(?:"+v.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};v.escape=k(x),v.unescape=k(E),v.result=function(e,t){if(null==e)return void 0;var n=e[t];return v.isFunction(n)?e[t]():n};var S=0;v.uniqueId=function(e){var t=++S+"";return e?e+t:t},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/(.)^/,T={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\u2028|\u2029/g,O=function(e){return"\\"+T[e]};v.template=function(e,t,n){!t&&n&&(t=n),t=v.defaults({},t,v.templateSettings);var r=RegExp([(t.escape||A).source,(t.interpolate||A).source,(t.evaluate||A).source].join("|")+"|$","g"),i=0,a="__p+='";e.replace(r,function(t,n,r,o,s){return a+=e.slice(i,s).replace(j,O),i=s+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=new Function(t.variable||"obj","_",a)}catch(s){throw s.source=a,s}var u=function(e){return o.call(this,e,v)},l=t.variable||"obj";return u.source="function("+l+"){\n"+a+"}",u},v.chain=function(e){var t=v(e);return t._chain=!0,t};var I=function(e){return this._chain?v(e).chain():e};v.mixin=function(e){v.each(v.functions(e),function(t){var n=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),I.call(this,n.apply(v,e))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];v.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],I.call(this,n)}}),v.each(["concat","join","slice"],function(e){var t=i[e];v.prototype[e]=function(){return I.call(this,t.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}).call(this)},{}],34:[function(e,t){function n(e){this.cid=o.uniqueId("view"),e||(e={});var t=e.parent;delete e.parent,f.call(this,e,{init:!1,parent:t}),this.on("change:el",this._handleElementChange,this),this._parsedBindings=l(this.bindings,this),this._initializeBindings(),e.el&&!this.autoRender&&this._handleElementChange(),this._initializeSubviews(),this.template=e.template||this.template,this.initialize.apply(this,arguments),this.set(o.pick(e,h)),this.autoRender&&this.template&&this.render()}var r=e("ampersand-state"),i=e("ampersand-collection-view"),a=e("domify"),o=e("underscore"),s=e("events-mixin"),u=e("matches-selector"),l=e("ampersand-dom-bindings"),c=e("get-object-path"),f=r.extend({dataTypes:{element:{set:function(e){return{val:e,type:e instanceof Element?"element":typeof e}},compare:function(e,t){return e===t}},collection:{set:function(e){return{val:e,type:e&&e.isCollection?"collection":typeof e}},compare:function(e,t){return e===t}}},props:{model:"state",el:"element",collection:"collection"},derived:{rendered:{deps:["el"],fn:function(){return!!this.el}},hasData:{deps:["model"],fn:function(){return!!this.model}}}}),h=["model","collection","el"];n.prototype=Object.create(f.prototype),o.extend(n.prototype,{query:function(e){return e?"string"==typeof e?u(this.el,e)?this.el:this.el.querySelector(e)||void 0:e:this.el},queryAll:function(e){var t=[];return this.el?""===e?[this.el]:(u(this.el,e)&&t.push(this.el),t.concat(Array.prototype.slice.call(this.el.querySelectorAll(e)))):t},queryByHook:function(e){return this.query('[data-hook~="'+e+'"]')},initialize:function(){},render:function(){return this.renderWithTemplate(this),this},remove:function(){var e=this._parsedBindings;return this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),this._subviews&&o.chain(this._subviews).flatten().invoke("remove"),this.stopListening(),o.each(e,function(t,n){o.each(t,function(t,r){delete e[n][r]}),delete e[n]}),this.trigger("remove",this),this},_handleElementChange:function(){return this.eventManager&&this.eventManager.unbind(),this.eventManager=s(this.el,this),this.delegateEvents(),this._applyBindingsForKey(),this},delegateEvents:function(e){if(!e&&!(e=o.result(this,"events")))return this;this.undelegateEvents();for(var t in e)this.eventManager.bind(t,e[t]);return this},undelegateEvents:function(){return this.eventManager.unbind(),this},registerSubview:function(e){return this._subviews||(this._subviews=[]),this._subviews.push(e),e.el&&(e.parent=this),e},renderSubview:function(e,t){return"string"==typeof t&&(t=this.query(t)),this.registerSubview(e),e.render(),(t||this.el).appendChild(e.el),e},_applyBindingsForKey:function(e){if(this.el){var t,n=this._parsedBindings.getGrouped(e);for(t in n)n[t].forEach(function(e){e(this.el,c(this,t),o.last(t.split(".")))},this)}},_initializeBindings:function(){this.bindings&&this.on("all",function(e){"change:"===e.slice(0,7)&&this._applyBindingsForKey(e.split(":")[1])},this)},_initializeSubviews:function(){if(this.subviews)for(var e in this.subviews)this._parseSubview(this.subviews[e],e)},_parseSubview:function(e,t){function n(){var e,r;this.el&&(e=this.query(i.selector))&&(!i.waitFor||c(this,i.waitFor))&&(r=this[t]=i.prepareView.call(this,e),r.render(),this.registerSubview(r),this.off("change",n))}var r=this,i={selector:e.container||'[data-hook="'+e.hook+'"]',waitFor:e.waitFor||"",prepareView:e.prepareView||function(t){return new e.constructor({el:t,parent:r})}};this.on("change",n,this)},renderWithTemplate:function(e,t){var n=t||this.template;if(!n)throw new Error("Template string or function needed.");var r=o.isString(n)?n:n.call(this,e||this);o.isString(r)&&(r=a(r));var i=this.el&&this.el.parentNode;if(i&&i.replaceChild(r,this.el),"#document-fragment"===r.nodeName)throw new Error("Views can only have one root element.");return this.el=r,this},cacheElements:function(e){for(var t in e)this[t]=this.query(e[t])},listenToAndRun:function(e,t,n){var r=o.bind(n,this);this.listenTo(e,t,r),r()},animateRemove:function(){this.remove()},renderCollection:function(e,t,n,r){var a="string"==typeof n?this.query(n):n,s=o.extend({collection:e,el:a||this.el,view:t,parent:this,viewOptions:{parent:this}},r),u=new i(s);return u.render(),this.registerSubview(u)}}),n.extend=f.extend,t.exports=n},{"ampersand-collection-view":35,"ampersand-dom-bindings":40,"ampersand-state":43,domify:48,"events-mixin":49,"get-object-path":54,"matches-selector":55,underscore:56}],35:[function(e,t){function n(e){if(!e)throw new ReferenceError("Collection view missing required parameters: collection, el");if(!e.collection)throw new ReferenceError("Collection view requires a collection");if(!e.el&&!this.insertSelf)throw new ReferenceError("Collection view requires an el");r.extend(this,r.pick(e,o)),this.views=[],this.listenTo(this.collection,"add",this._addViewForModel),this.listenTo(this.collection,"remove",this._removeViewForModel),this.listenTo(this.collection,"sort",this._rerenderAll),this.listenTo(this.collection,"refresh reset",this._reset)}var r=e("underscore"),i=e("backbone-events-standalone"),a=e("ampersand-class-extend"),o=["collection","el","viewOptions","view","emptyView","filter","reverse","parent"];r.extend(n.prototype,i,{render:function(){return this._renderAll(),this},remove:function(){r.invoke(this.views,"remove"),this.stopListening()},_getViewByModel:function(e){return r.find(this.views,function(t){return e===t.model})},_createViewForModel:function(e,t){var n=new this.view(r({model:e,collection:this.collection}).extend(this.viewOptions));return this.views.push(n),n.parent=this,n.renderedByParentView=!0,n.render(t),n},_getOrCreateByModel:function(e,t){return this._getViewByModel(e)||this._createViewForModel(e,t)},_addViewForModel:function(e,t,n){var r=this.filter?this.filter(e):!0;if(r){this.renderedEmptyView&&this.renderedEmptyView.remove();var i=this._getOrCreateByModel(e,{containerEl:this.el});n&&n.rerender?this._insertView(i):this._insertViewAtIndex(i)}},_insertViewAtIndex:function(e){if(!e.insertSelf){var t,n,r=this.collection.indexOf(e.model);t=this.collection.at(this.reverse?r-1:r+1),n=this._getViewByModel(t),n?this.el.insertBefore(e.el,n&&n.el):this.el.appendChild(e.el)}},_insertView:function(e){e.insertSelf||(this.reverse&&this.el.firstChild?this.el.insertBefore(e.el,this.el.firstChild):this.el.appendChild(e.el))},_removeViewForModel:function(e){var t=this._getViewByModel(e);if(t){var n=this.views.indexOf(t);-1!==n&&(t=this.views.splice(n,1)[0],this._removeView(t),0===this.views.length&&this._renderEmptyView())}},_removeView:function(e){e.animateRemove?e.animateRemove():e.remove()},_renderAll:function(){this.collection.each(this._addViewForModel,this),0===this.views.length&&this._renderEmptyView()},_rerenderAll:function(e,t){t=t||{},this.collection.each(function(e){this._addViewForModel(e,this,r.extend(t,{rerender:!0}))},this)},_renderEmptyView:function(){if(this.emptyView){var e=this.renderedEmptyView=new this.emptyView;this.el.appendChild(e.render().el)}},_reset:function(){var e=this.collection.map(this._getOrCreateByModel,this),t=r.difference(this.views,e);t.forEach(this._removeView,this),this.views=e,this._rerenderAll(),0===this.views.length&&this._renderEmptyView()}}),n.extend=a,t.exports=n},{"ampersand-class-extend":36,"backbone-events-standalone":39,underscore:56}],36:[function(e,t){t.exports=e(23)},{"extend-object":37}],37:[function(e,t){t.exports=e(26)},{}],38:[function(e,t,n){!function(){function e(){return{keys:Object.keys||function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("keys() called on a non-object");var t,n=[];for(t in e)e.hasOwnProperty(t)&&(n[n.length]=t);return n},uniqueId:function(e){var t=++l+"";return e?e+t:t},has:function(e,t){return s.call(e,t)},each:function(e,t,n){if(null!=e)if(o&&e.forEach===o)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,i=e.length;i>r;r++)if(t.call(n,e[r],r,e)===a)return}else for(var s in e)if(this.has(e,s)&&t.call(n,e[s],s,e)===a)return},once:function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}}}}var r,i=this,a={},o=Array.prototype.forEach,s=Object.prototype.hasOwnProperty,u=Array.prototype.slice,l=0,c=e();r={on:function(e,t,n){if(!h(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!h(this,"once",e,[t,n])||!t)return this;var r=this,i=c.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,a,o,s,u,l,f;if(!this._events||!h(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(o=e?[e]:c.keys(this._events),s=0,u=o.length;u>s;s++)if(e=o[s],a=this._events[e]){if(this._events[e]=r=[],t||n)for(l=0,f=a.length;f>l;l++)i=a[l],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!h(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&d(n,t),r&&d(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;"object"==typeof t&&(n=this),e&&((r={})[e._listenerId]=e);for(var a in r)r[a].off(t,n,this),i&&delete this._listeners[a];return this}};var f=/\s+/,h=function(e,t,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){for(var a=n.split(f),o=0,s=a.length;s>o;o++)e[t].apply(e,[a[o]].concat(r));return!1}return!0},d=function(e,t){var n,r=-1,i=e.length,a=t[0],o=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,a);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,a,o);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,a,o,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t)}},p={listenTo:"on",listenToOnce:"once"};c.each(p,function(e,t){r[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),a=t._listenerId||(t._listenerId=c.uniqueId("l"));return i[a]=t,"object"==typeof n&&(r=this),t[e](n,r,this),this}}),r.bind=r.on,r.unbind=r.off,r.mixin=function(e){var t=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return c.each(t,function(t){e[t]=this[t]},this),e},"function"==typeof define?define(function(){return r}):"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=r),n.BackboneEvents=r):i.BackboneEvents=r}(this)},{}],39:[function(e,t,n){arguments[4][25][0].apply(n,arguments)},{"./backbone-events-standalone":38}],40:[function(e,t){function n(e,t){if(""===t)return[e];var n=[];return s(e,t)&&n.push(e),n.concat(u.call(e.querySelectorAll(t)))}function r(e){return Array.isArray(e)?e:[e]}function i(e,t){var i,a=e.type||"text",s="function"==typeof a,u=function(){return"string"==typeof e.selector?e.selector:e.hook?'[data-hook~="'+e.hook+'"]':""}(),l=e.yes,c=e.no,f=!(!l&&!c);if(s)return function(e,r){n(e,u).forEach(function(e){a.call(t,e,r,i)}),i=r};if("text"===a)return function(e,t){n(e,u).forEach(function(e){o.text(e,t)})};if("class"===a)return function(e,t){n(e,u).forEach(function(e){o.switchClass(e,i,t)}),i=t};if("attribute"===a){if(!e.name)throw Error('attribute bindings must have a "name"');return function(t,a){var s=r(e.name);n(t,u).forEach(function(e){s.forEach(function(t){o.setAttribute(e,t,a)})}),i=a}}if("value"===a)return function(e,t){n(e,u).forEach(function(e){t||0===t||(t=""),document.activeElement!==e&&(e.value=t)}),i=t};if("booleanClass"===a)return f?(l=r(l||""),c=r(c||""),function(e,t){var r=t?c:l,i=t?l:c;n(e,u).forEach(function(e){r.forEach(function(t){o.removeClass(e,t)}),i.forEach(function(t){o.addClass(e,t)})})}):function(t,i,a){var s=r(e.name||a);n(t,u).forEach(function(e){s.forEach(function(t){o[i?"addClass":"removeClass"](e,t)})})};if("booleanAttribute"===a)return function(t,i,a){var s=r(e.name||a);n(t,u).forEach(function(e){s.forEach(function(t){o[i?"addAttribute":"removeAttribute"](e,t)})})};if("toggle"===a)return f?function(e,t){n(e,l).forEach(function(e){o[t?"show":"hide"](e)}),n(e,c).forEach(function(e){o[t?"hide":"show"](e)})}:function(e,t){n(e,u).forEach(function(e){o[t?"show":"hide"](e)})};if("switch"===a){if(!e.cases)throw Error('switch bindings must have "cases"');return function(t,r){for(var i in e.cases)n(t,e.cases[i]).forEach(function(e){o[r===i?"show":"hide"](e)})}}if("innerHTML"===a)return function(e,t){n(e,u).forEach(function(e){o.html(e,t)})};if("switchClass"===a){if(!e.cases)throw Error('switchClass bindings must have "cases"');return function(t,i,a){var s=r(e.name||a);for(var u in e.cases)n(t,e.cases[u]).forEach(function(e){s.forEach(function(t){o[i===u?"addClass":"removeClass"](e,t)})})}}throw new Error("no such binding type: "+a)}var a=e("key-tree-store"),o=e("ampersand-dom"),s=e("matches-selector");
t.exports=function(e,t){var n,r,o=new a;for(n in e)r=e[n],"string"==typeof r?o.add(n,i({type:"text",selector:r})):r.forEach?r.forEach(function(e){o.add(n,i(e,t))}):o.add(n,i(r,t));return o};var u=Array.prototype.slice},{"ampersand-dom":41,"key-tree-store":42,"matches-selector":55}],41:[function(e,t){function n(e){return e||0===e?e:""}function r(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function i(e,t){var n=e[t];return t in e&&(n===!0||n===!1)}function a(e){return"true"===l.getAttribute(e,"data-anddom-hidden")}function o(e){l.setAttribute(e,"data-anddom-display",e.style.display)}function s(e){e.style.display=l.getAttribute(e,"data-anddom-display")||"",l.removeAttribute(e,"data-anddom-hidden")}function u(e){l.setAttribute(e,"data-anddom-hidden","true"),e.style.display="none"}var l=t.exports={text:function(e,t){e.textContent=n(t)},addClass:function(e,t){t=n(t),t&&(Array.isArray(t)?t.forEach(function(t){l.addClass(e,t)}):e.classList?e.classList.add(t):r(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t))},removeClass:function(e,t){Array.isArray(t)?t.forEach(function(t){l.removeClass(e,t)}):e.classList?(t=n(t),t&&e.classList.remove(t)):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},hasClass:r,switchClass:function(e,t,n){t&&this.removeClass(e,t),this.addClass(e,n)},addAttribute:function(e,t){e.setAttribute(t,""),i(e,t)&&(e[t]=!0)},removeAttribute:function(e,t){e.removeAttribute(t),i(e,t)&&(e[t]=!1)},setAttribute:function(e,t,r){e.setAttribute(t,n(r))},getAttribute:function(e,t){return e.getAttribute(t)},hide:function(e){a(e)||(o(e),u(e))},show:function(e){s(e)},html:function(e,t){e.innerHTML=t}}},{}],42:[function(e,t){function n(){this.storage={}}var r=Array.prototype.slice;n.prototype.add=function(e,t){var n=this.storage[e]||(this.storage[e]=[]);n.push(t)},n.prototype.remove=function(e){var t,n;for(t in this.storage)n=this.storage[t],n.some(function(t,r){return t===e?(n.splice(r,1),!0):void 0})},n.prototype.get=function(e){var t,n=[];for(t in this.storage)e&&e!==t&&0!==t.indexOf(e+".")||(n=n.concat(this.storage[t]));return n},n.prototype.getGrouped=function(e){var t,n={};for(t in this.storage)e&&e!==t&&0!==t.indexOf(e+".")||(n[t]=r.call(this.storage[t]));return n},n.prototype.getAll=function(e){var t,n={};for(t in this.storage)(e===t||0===t.indexOf(e+"."))&&(n[t]=r.call(this.storage[t]));return n},n.prototype.run=function(e,t){var n=r.call(arguments,2);this.get(e).forEach(function(e){e.apply(t||this,n)})},t.exports=n},{}],43:[function(e,t){function n(e,t){t||(t={}),this.cid||(this.cid=o.uniqueId("state")),this._events={},this._values={},this._definition=Object.create(this._definition),t.parse&&(e=this.parse(e,t)),this.parent=t.parent,this.collection=t.collection,this._keyTree=new u,this._initCollections(),this._initChildren(),this._cache={},this._previousAttributes={},e&&this.set(e,o.extend({silent:!0,initial:!0},t)),this._changed={},this._derived&&this._initDerived(),t.init!==!1&&this.initialize.apply(this,arguments)}function r(e,t,n,r){var i,a,s=e._definition[t]={};if(o.isString(n))i=e._ensureValidType(n),i&&(s.type=i);else{if(o.isArray(n)&&(a=n,n={type:a[0],required:a[1],"default":a[2]}),i=e._ensureValidType(n.type),i&&(s.type=i),n.required&&(s.required=!0),n["default"]&&"object"==typeof n["default"])throw new TypeError("The default value for "+t+" cannot be an object/array, must be a value or a function which returns a value/object/array");s["default"]=n["default"],s.allowNull=n.allowNull?n.allowNull:!1,n.setOnce&&(s.setOnce=!0),s.required&&o.isUndefined(s["default"])&&!s.setOnce&&(s["default"]=e._getDefaultForType(i)),s.test=n.test,s.values=n.values}return r&&(s.session=!0),Object.defineProperty(e,t,{set:function(e){this.set(t,e)},get:function(){var e=this._values[t],n=this._dataTypes[s.type];return"undefined"!=typeof e?(n&&n.get&&(e=n.get(e)),e):(e=o.result(s,"default"),this._values[t]=e,e)}}),s}function i(e,t,n){var r=e._derived[t]={fn:o.isFunction(n)?n:n.fn,cache:n.cache!==!1,depList:n.deps||[]};o.each(r.depList,function(n){e._deps[n]=o(e._deps[n]||[]).union([t])}),Object.defineProperty(e,t,{get:function(){return this._getDerivedProperty(t)},set:function(){throw new TypeError('"'+t+"\" is a derived property, it can't be set directly.")}})}function a(e){var t,n=this,a=[].slice.call(arguments);t=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return n.apply(this,arguments)},o.extend(t,n);var s=function(){this.constructor=t};s.prototype=n.prototype,t.prototype=new s,t.prototype._derived=o.extend({},n.prototype._derived),t.prototype._deps=o.extend({},n.prototype._deps),t.prototype._definition=o.extend({},n.prototype._definition),t.prototype._collections=o.extend({},n.prototype._collections),t.prototype._children=o.extend({},n.prototype._children),t.prototype._dataTypes=o.extend({},n.prototype._dataTypes||f),e&&a.forEach(function(e){var n=["dataTypes","props","session","derived","collections","children"];e.dataTypes&&o.each(e.dataTypes,function(e,n){t.prototype._dataTypes[n]=e}),e.props&&o.each(e.props,function(e,n){r(t.prototype,n,e)}),e.session&&o.each(e.session,function(e,n){r(t.prototype,n,e,!0)}),e.derived&&o.each(e.derived,function(e,n){i(t.prototype,n,e)}),e.collections&&o.each(e.collections,function(e,n){t.prototype._collections[n]=e}),e.children&&o.each(e.children,function(e,n){t.prototype._children[n]=e}),o.extend(t.prototype,o.omit(e,n))});Object.prototype.toString;return t.__super__=n.prototype,t}var o=e("underscore"),s=e("backbone-events-standalone"),u=e("key-tree-store"),l=e("array-next"),c=/^change:/;o.extend(n.prototype,s,{extraProperties:"ignore",idAttribute:"id",namespaceAttribute:"namespace",typeAttribute:"modelType",initialize:function(){return this},getId:function(){return this[this.idAttribute]},getNamespace:function(){return this[this.namespaceAttribute]},getType:function(){return this[this.typeAttribute]},isNew:function(){return null==this.getId()},escape:function(e){return o.escape(this.get(e))},isValid:function(e){return this._validate({},o.extend(e||{},{validate:!0}))},parse:function(e){return e},serialize:function(){var e=this.getAttributes({props:!0},!0);return o.each(this._children,function(t,n){e[n]=this[n].serialize()},this),o.each(this._collections,function(t,n){e[n]=this[n].serialize()},this),e},set:function(e,t,n){var r,i,a,s,u,l,c,f,h,d,p,v,y,m,g,_,b=this,w=this.extraProperties;if(o.isObject(e)||null===e?(h=e,n=t):(h={},h[e]=t),n=n||{},!this._validate(h,n))return!1;v=n.unset,p=n.silent,m=n.initial,i=[],r=this._changing,this._changing=!0,r||(this._previousAttributes=this.attributes,this._changed={});for(f in h){if(s=h[f],a=typeof s,y=this._values[f],u=this._definition[f],!u){if(this._children[f]||this._collections[f]){this[f].set(s,n);continue}if("ignore"===w)continue;if("reject"===w)throw new TypeError('No "'+f+'" property defined on '+(this.type||"this")+' model and extraProperties not set to "ignore" or "allow"');if("allow"===w)u=this._createPropertyDefinition(f,"any");else if(w)throw new TypeError('Invalid value for extraProperties: "'+w+'"')}if(_=this._getCompareForType(u.type),d=this._dataTypes[u.type],d&&d.set&&(l=d.set(s),s=l.val,a=l.type),u.test&&(c=u.test.call(this,s,a)))throw new TypeError("Property '"+f+"' failed validation with error: "+c);if(o.isUndefined(s)&&u.required)throw new TypeError("Required property '"+f+"' must be of type "+u.type+". Tried to set "+s);if(o.isNull(s)&&u.required&&!u.allowNull)throw new TypeError("Property '"+f+"' must be of type "+u.type+" (cannot be null). Tried to set "+s);if(u.type&&"any"!==u.type&&u.type!==a&&!o.isNull(s)&&!o.isUndefined(s))throw new TypeError("Property '"+f+"' must be of type "+u.type+". Tried to set "+s);if(u.values&&!o.contains(u.values,s))throw new TypeError("Property '"+f+"' must be one of values: "+u.values.join(", ")+". Tried to set "+s);if(g=!_(y,s,f),u.setOnce&&void 0!==y&&g&&!m)throw new TypeError("Property '"+f+"' can only be set once.");g?(i.push({prev:y,val:s,key:f}),b._changed[f]=s):delete b._changed[f]}if(o.each(i,function(e){b._previousAttributes[e.key]=e.prev,v?delete b._values[e.key]:b._values[e.key]=e.val}),!p&&i.length&&(b._pending=!0),p||o.each(i,function(e){b.trigger("change:"+e.key,b,e.val,n)}),r)return this;if(!p)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},get:function(e){return this[e]},toggle:function(e){var t=this._definition[e];if("boolean"===t.type)this[e]=!this[e];else{if(!t||!t.values)throw new TypeError("Can only toggle properties that are type `boolean` or have `values` array.");this[e]=l(t.values,this[e])}return this},previousAttributes:function(){return o.clone(this._previousAttributes)},hasChanged:function(e){return null==e?!o.isEmpty(this._changed):o.has(this._changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?o.clone(this._changed):!1;var t,n,r,i=!1,a=this._changing?this._previousAttributes:this.attributes;for(var s in e)n=this._definition[s],n&&(r=this._getCompareForType(n.type),r(a[s],t=e[s])||((i||(i={}))[s]=t));return i},toJSON:function(){return this.serialize()},unset:function(e,t){{var n,r=this._definition[e];r.type}return r.required?(n=o.result(r,"default"),this.set(e,n,t)):this.set(e,n,o.extend({},t,{unset:!0}))},clear:function(e){var t=this;return o.each(o.keys(this.attributes),function(n){t.unset(n,e)}),this},previous:function(e){return null!=e&&Object.keys(this._previousAttributes).length?this._previousAttributes[e]:null},_getDefaultForType:function(e){var t=this._dataTypes[e];return t&&t["default"]},_getCompareForType:function(e){var t=this._dataTypes[e];return t&&t.compare?o.bind(t.compare,this):o.isEqual},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=o.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,o.extend(t||{},{validationError:n})),!1):!0},_createPropertyDefinition:function(e,t,n){return r(this,e,t,n)},_ensureValidType:function(e){return o.contains(["string","number","boolean","array","object","date","any"].concat(o.keys(this._dataTypes)),e)?e:void 0},getAttributes:function(e,t){e||(e={}),o.defaults(e,{session:!1,props:!1,derived:!1});var n,r,i,a={};for(r in this._definition)i=this._definition[r],(e.session&&i.session||e.props&&!i.session)&&(n=t?this._values[r]:this[r],"undefined"==typeof n&&(n=o.result(i,"default")),"undefined"!=typeof n&&(a[r]=n));if(e.derived)for(r in this._derived)a[r]=this[r];return a},_initDerived:function(){var e=this;o.each(this._derived,function(t,n){var r=e._derived[n];r.deps=r.depList;var i=function(t){t=t||{};var i=r.fn.call(e);e._cache[n]===i&&r.cache||(r.cache&&(e._previousAttributes[n]=e._cache[n]),e._cache[n]=i,e.trigger("change:"+n,e,e._cache[n]))};r.deps.forEach(function(t){e._keyTree.add(t,i)})}),this.on("all",function(t){c.test(t)&&e._keyTree.get(t.split(":")[1]).forEach(function(e){e()})},this)},_getDerivedProperty:function(e,t){return this._derived[e].cache?((t||!this._cache.hasOwnProperty(e))&&(this._cache[e]=this._derived[e].fn.apply(this)),this._cache[e]):this._derived[e].fn.apply(this)},_initCollections:function(){var e;if(this._collections)for(e in this._collections)this[e]=new this._collections[e](null,{parent:this})},_initChildren:function(){var e;if(this._children)for(e in this._children)this[e]=new this._children[e]({},{parent:this}),this.listenTo(this[e],"all",this._getEventBubblingHandler(e))},_getEventBubblingHandler:function(e){return o.bind(function(t,n,r){c.test(t)?this.trigger("change:"+e+"."+t.split(":")[1],n,r):"change"===t&&this.trigger("change",this)},this)},_verifyRequired:function(){var e=this.attributes;for(var t in this._definition)if(this._definition[t].required&&"undefined"==typeof e[t])return!1;return!0}}),Object.defineProperties(n.prototype,{attributes:{get:function(){return this.getAttributes({props:!0,session:!0})}},all:{get:function(){return this.getAttributes({session:!0,props:!0,derived:!0})}},isState:{get:function(){return!0},set:function(){}}});var f={string:{"default":function(){return""}},date:{set:function(e){var t;if(o.isDate(e))t="date",e=e.valueOf();else try{var n=new Date(e).valueOf();if(isNaN(n)&&(n=new Date(parseInt(e,10)).valueOf(),isNaN(n)))throw TypeError;e=n,t="date"}catch(r){t=typeof e}return{val:e,type:t}},get:function(e){return new Date(e)},"default":function(){return new Date}},array:{set:function(e){return{val:e,type:o.isArray(e)?"array":typeof e}},"default":function(){return[]}},object:{set:function(e){var t=typeof e;return"object"!==t&&o.isUndefined(e)&&(e=null,t="object"),{val:e,type:t}},"default":function(){return{}}},state:{set:function(e){var t=e instanceof n||e&&e.isState;return t?{val:e,type:"state"}:{val:e,type:typeof e}},compare:function(e,t,n){var r=e===t;return r||(e&&this.stopListening(e),null!=t&&this.listenTo(t,"all",this._getEventBubblingHandler(n))),r}}};n.extend=a,t.exports=n},{"array-next":44,"backbone-events-standalone":46,"key-tree-store":47,underscore:56}],44:[function(e,t){t.exports=e(29)},{}],45:[function(e,t){t.exports=e(24)},{}],46:[function(e,t){t.exports=e(25)},{"./backbone-events-standalone":45}],47:[function(e,t){t.exports=e(32)},{}],48:[function(e,t){function n(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=n[1];if("body"==r){var i=t.createElement("html");return i.innerHTML=e,i.removeChild(i.lastChild)}var o=a[r]||a._default,s=o[0],u=o[1],l=o[2],i=t.createElement("div");for(i.innerHTML=u+e+l;s--;)i=i.lastChild;if(i.firstChild==i.lastChild)return i.removeChild(i.firstChild);for(var c=t.createDocumentFragment();i.firstChild;)c.appendChild(i.removeChild(i.firstChild));return c}t.exports=n;var r=document.createElement("div");r.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';var i=!r.getElementsByTagName("link").length;r=void 0;var a={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:i?[1,"X<div>","</div>"]:[0,"",""]};a.td=a.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],a.option=a.optgroup=[1,'<select multiple="multiple">',"</select>"],a.thead=a.tbody=a.colgroup=a.caption=a.tfoot=[1,"<table>","</table>"],a.text=a.circle=a.ellipse=a.line=a.path=a.polygon=a.polyline=a.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],49:[function(e,t){function n(e,t){if(!(this instanceof n))return new n(e,t);if(!e)throw new Error("element required");if(!t)throw new Error("object required");this.el=e,this.obj=t,this._events={}}function r(e){var t=e.split(/ +/);return{name:t.shift(),selector:t.join(" ")}}var i=e("component-event"),a=e("delegate-events"),o=["focus","blur"];t.exports=n,n.prototype.sub=function(e,t,n){this._events[e]=this._events[e]||{},this._events[e][t]=n},n.prototype.bind=function(e,t){function n(){var e=[].slice.call(arguments).concat(c);u[t].apply(u,e)}var o=r(e),s=this.el,u=this.obj,l=o.name,t=t||"on"+l,c=[].slice.call(arguments,2);return o.selector?n=a.bind(s,o.selector,l,n):i.bind(s,l,n),this.sub(l,t,n),n},n.prototype.unbind=function(e,t){if(0==arguments.length)return this.unbindAll();if(1==arguments.length)return this.unbindAllOf(e);var n=this._events[e],r=-1!==o.indexOf(e);if(n){var a=n[t];a&&i.unbind(this.el,e,a,r)}},n.prototype.unbindAll=function(){for(var e in this._events)this.unbindAllOf(e)},n.prototype.unbindAllOf=function(e){var t=this._events[e];if(t)for(var n in t)this.unbind(e,n)}},{"component-event":50,"delegate-events":51}],50:[function(e,t,n){var r=window.addEventListener?"addEventListener":"attachEvent",i=window.removeEventListener?"removeEventListener":"detachEvent",a="addEventListener"!==r?"on":"";n.bind=function(e,t,n,i){return e[r](a+t,n,i||!1),n},n.unbind=function(e,t,n,r){return e[i](a+t,n,r||!1),n}},{}],51:[function(e,t,n){var r=e("closest"),i=e("event"),a=["focus","blur"];n.bind=function(e,t,n,o,s){return-1!==a.indexOf(n)&&(s=!0),i.bind(e,n,function(n){var i=n.target||n.srcElement;n.delegateTarget=r(i,t,!0,e),n.delegateTarget&&o.call(e,n)},s)},n.unbind=function(e,t,n,r){-1!==a.indexOf(t)&&(r=!0),i.unbind(e,t,n,r)}},{closest:52,event:50}],52:[function(e,t){var n=e("matches-selector");t.exports=function(e,t,r){for(var i=r?e:e.parentNode;i&&i!==document;){if(n(i,t))return i;i=i.parentNode}}},{"matches-selector":53}],53:[function(e,t){function n(e,t){if(i)return i.call(e,t);for(var n=e.parentNode.querySelectorAll(t),r=0;r<n.length;++r)if(n[r]==e)return!0;return!1}var r=Element.prototype,i=r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;t.exports=n},{}],54:[function(e,t){function n(e,t){if(-1==t.indexOf(".")&&-1==t.indexOf("["))return e[t];for(var n,r=t.split(/\.|\[|\]/g),i=-1,a=r.length;++i<a;)if(0==i&&(n=e),r[i]){if(void 0==n)break;n=n[r[i]]}return n}t.exports=n},{}],55:[function(e,t){"use strict";function n(e,t){if(i)return i.call(e,t);for(var n=e.parentNode.querySelectorAll(t),r=0;r<n.length;r++)if(n[r]==e)return!0;return!1}var r=Element.prototype,i=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;t.exports=n},{}],56:[function(e,t,n){(function(){var e=this,r=e._,i={},a=Array.prototype,o=Object.prototype,s=Function.prototype,u=a.push,l=a.slice,c=a.concat,f=o.toString,h=o.hasOwnProperty,d=a.forEach,p=a.map,v=a.reduce,y=a.reduceRight,m=a.filter,g=a.every,_=a.some,b=a.indexOf,w=a.lastIndexOf,x=Array.isArray,E=Object.keys,k=s.bind,S=function(e){return e instanceof S?e:this instanceof S?void(this._wrapped=e):new S(e)};"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=S),n._=S):e._=S,S.VERSION="1.6.0";var A=S.each=S.forEach=function(e,t,n){if(null==e)return e;if(d&&e.forEach===d)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,a=e.length;a>r;r++)if(t.call(n,e[r],r,e)===i)return}else for(var o=S.keys(e),r=0,a=o.length;a>r;r++)if(t.call(n,e[o[r]],o[r],e)===i)return;return e};S.map=S.collect=function(e,t,n){var r=[];return null==e?r:p&&e.map===p?e.map(t,n):(A(e,function(e,i,a){r.push(t.call(n,e,i,a))}),r)};var T="Reduce of empty array with no initial value";S.reduce=S.foldl=S.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),v&&e.reduce===v)return r&&(t=S.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(A(e,function(e,a,o){i?n=t.call(r,n,e,a,o):(n=e,i=!0)}),!i)throw new TypeError(T);return n},S.reduceRight=S.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),y&&e.reduceRight===y)return r&&(t=S.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var a=e.length;if(a!==+a){var o=S.keys(e);a=o.length}if(A(e,function(s,u,l){u=o?o[--a]:--a,i?n=t.call(r,n,e[u],u,l):(n=e[u],i=!0)}),!i)throw new TypeError(T);return n},S.find=S.detect=function(e,t,n){var r;return j(e,function(e,i,a){return t.call(n,e,i,a)?(r=e,!0):void 0}),r},S.filter=S.select=function(e,t,n){var r=[];return null==e?r:m&&e.filter===m?e.filter(t,n):(A(e,function(e,i,a){t.call(n,e,i,a)&&r.push(e)}),r)},S.reject=function(e,t,n){return S.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},S.every=S.all=function(e,t,n){t||(t=S.identity);var r=!0;return null==e?r:g&&e.every===g?e.every(t,n):(A(e,function(e,a,o){return(r=r&&t.call(n,e,a,o))?void 0:i}),!!r)};var j=S.some=S.any=function(e,t,n){t||(t=S.identity);var r=!1;return null==e?r:_&&e.some===_?e.some(t,n):(A(e,function(e,a,o){return r||(r=t.call(n,e,a,o))?i:void 0}),!!r)};S.contains=S.include=function(e,t){return null==e?!1:b&&e.indexOf===b?-1!=e.indexOf(t):j(e,function(e){return e===t})},S.invoke=function(e,t){var n=l.call(arguments,2),r=S.isFunction(t);return S.map(e,function(e){return(r?t:e[t]).apply(e,n)})},S.pluck=function(e,t){return S.map(e,S.property(t))},S.where=function(e,t){return S.filter(e,S.matches(t))},S.findWhere=function(e,t){return S.find(e,S.matches(t))},S.max=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-1/0,i=-1/0;return A(e,function(e,a,o){var s=t?t.call(n,e,a,o):e;s>i&&(r=e,i=s)}),r},S.min=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=1/0,i=1/0;return A(e,function(e,a,o){var s=t?t.call(n,e,a,o):e;i>s&&(r=e,i=s)}),r},S.shuffle=function(e){var t,n=0,r=[];return A(e,function(e){t=S.random(n++),r[n-1]=r[t],r[t]=e}),r},S.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=S.values(e)),e[S.random(e.length-1)]):S.shuffle(e).slice(0,Math.max(0,t))};var O=function(e){return null==e?S.identity:S.isFunction(e)?e:S.property(e)};S.sortBy=function(e,t,n){return t=O(t),S.pluck(S.map(e,function(e,r,i){return{value:e,index:r,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var I=function(e){return function(t,n,r){var i={};return n=O(n),A(t,function(a,o){var s=n.call(r,a,o,t);e(i,s,a)}),i}};S.groupBy=I(function(e,t,n){S.has(e,t)?e[t].push(n):e[t]=[n]}),S.indexBy=I(function(e,t,n){e[t]=n}),S.countBy=I(function(e,t){S.has(e,t)?e[t]++:e[t]=1}),S.sortedIndex=function(e,t,n,r){n=O(n);for(var i=n.call(r,t),a=0,o=e.length;o>a;){var s=a+o>>>1;n.call(r,e[s])<i?a=s+1:o=s}return a},S.toArray=function(e){return e?S.isArray(e)?l.call(e):e.length===+e.length?S.map(e,S.identity):S.values(e):[]},S.size=function(e){return null==e?0:e.length===+e.length?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:l.call(e,0,t)},S.initial=function(e,t,n){return l.call(e,0,e.length-(null==t||n?1:t))},S.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:l.call(e,Math.max(e.length-t,0))},S.rest=S.tail=S.drop=function(e,t,n){return l.call(e,null==t||n?1:t)},S.compact=function(e){return S.filter(e,S.identity)};var M=function(e,t,n){return t&&S.every(e,S.isArray)?c.apply(n,e):(A(e,function(e){S.isArray(e)||S.isArguments(e)?t?u.apply(n,e):M(e,t,n):n.push(e)}),n)};S.flatten=function(e,t){return M(e,t,[])},S.without=function(e){return S.difference(e,l.call(arguments,1))},S.partition=function(e,t){var n=[],r=[];return A(e,function(e){(t(e)?n:r).push(e)}),[n,r]},S.uniq=S.unique=function(e,t,n,r){S.isFunction(t)&&(r=n,n=t,t=!1);var i=n?S.map(e,n,r):e,a=[],o=[];return A(i,function(n,r){(t?r&&o[o.length-1]===n:S.contains(o,n))||(o.push(n),a.push(e[r]))}),a},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=function(e){var t=l.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.contains(t,e)})})},S.difference=function(e){var t=c.apply(a,l.call(arguments,1));return S.filter(e,function(e){return!S.contains(t,e)})},S.zip=function(){for(var e=S.max(S.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=S.pluck(arguments,""+n);return t},S.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},S.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=S.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(b&&e.indexOf===b)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},S.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(w&&e.lastIndexOf===w)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},S.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,a=new Array(r);r>i;)a[i++]=e,e+=n;return a};var C=function(){};S.bind=function(e,t){var n,r;if(k&&e.bind===k)return k.apply(e,l.call(arguments,1));if(!S.isFunction(e))throw new TypeError;return n=l.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(l.call(arguments)));C.prototype=e.prototype;var i=new C;C.prototype=null;var a=e.apply(i,n.concat(l.call(arguments)));return Object(a)===a?a:i}},S.partial=function(e){var t=l.call(arguments,1);return function(){for(var n=0,r=t.slice(),i=0,a=r.length;a>i;i++)r[i]===S&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return e.apply(this,r)}},S.bindAll=function(e){var t=l.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return A(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var n={};return t||(t=S.identity),function(){var r=t.apply(this,arguments);return S.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},S.delay=function(e,t){var n=l.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(l.call(arguments,1)))},S.throttle=function(e,t,n){var r,i,a,o=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:S.now(),o=null,a=e.apply(r,i),r=i=null};return function(){var l=S.now();s||n.leading!==!1||(s=l);var c=t-(l-s);return r=this,i=arguments,0>=c?(clearTimeout(o),o=null,s=l,a=e.apply(r,i),r=i=null):o||n.trailing===!1||(o=setTimeout(u,c)),a}},S.debounce=function(e,t,n){var r,i,a,o,s,u=function(){var l=S.now()-o;t>l?r=setTimeout(u,t-l):(r=null,n||(s=e.apply(a,i),a=i=null))};return function(){a=this,i=arguments,o=S.now();var l=n&&!r;return r||(r=setTimeout(u,t)),l&&(s=e.apply(a,i),a=i=null),s}},S.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},S.wrap=function(e,t){return S.partial(t,e)},S.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},S.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},S.keys=function(e){if(!S.isObject(e))return[];if(E)return E(e);var t=[];for(var n in e)S.has(e,n)&&t.push(n);return t},S.values=function(e){for(var t=S.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},S.pairs=function(e){for(var t=S.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},S.invert=function(e){for(var t={},n=S.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=function(e){return A(l.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},S.pick=function(e){var t={},n=c.apply(a,l.call(arguments,1));return A(n,function(n){n in e&&(t[n]=e[n])}),t},S.omit=function(e){var t={},n=c.apply(a,l.call(arguments,1));for(var r in e)S.contains(n,r)||(t[r]=e[r]);return t},S.defaults=function(e){return A(l.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e};var q=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof S&&(e=e._wrapped),t instanceof S&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var a=n.length;a--;)if(n[a]==e)return r[a]==t;var o=e.constructor,s=t.constructor;if(o!==s&&!(S.isFunction(o)&&o instanceof o&&S.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),r.push(t);var u=0,l=!0;if("[object Array]"==i){if(u=e.length,l=u==t.length)for(;u--&&(l=q(e[u],t[u],n,r)););}else{for(var c in e)if(S.has(e,c)&&(u++,!(l=S.has(t,c)&&q(e[c],t[c],n,r))))break;if(l){for(c in t)if(S.has(t,c)&&!u--)break;l=!u}}return n.pop(),r.pop(),l};S.isEqual=function(e,t){return q(e,t,[],[])},S.isEmpty=function(e){if(null==e)return!0;if(S.isArray(e)||S.isString(e))return 0===e.length;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!(!e||1!==e.nodeType)},S.isArray=x||function(e){return"[object Array]"==f.call(e)},S.isObject=function(e){return e===Object(e)},A(["Arguments","Function","String","Number","Date","RegExp"],function(e){S["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),S.isArguments(arguments)||(S.isArguments=function(e){return!(!e||!S.has(e,"callee"))}),"function"!=typeof/./&&(S.isFunction=function(e){return"function"==typeof e}),S.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},S.isNaN=function(e){return S.isNumber(e)&&e!=+e},S.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return h.call(e,t)},S.noConflict=function(){return e._=r,this},S.identity=function(e){return e},S.constant=function(e){return function(){return e}},S.property=function(e){return function(t){return t[e]}},S.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},S.times=function(e,t,n){for(var r=Array(Math.max(0,e)),i=0;e>i;i++)r[i]=t.call(n,i);return r},S.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},S.now=Date.now||function(){return(new Date).getTime()};var N={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};N.unescape=S.invert(N.escape);var F={escape:new RegExp("["+S.keys(N.escape).join("")+"]","g"),unescape:new RegExp("("+S.keys(N.unescape).join("|")+")","g")};S.each(["escape","unescape"],function(e){S[e]=function(t){return null==t?"":(""+t).replace(F[e],function(t){return N[e][t]})}}),S.result=function(e,t){if(null==e)return void 0;var n=e[t];return S.isFunction(n)?n.call(e):n},S.mixin=function(e){A(S.functions(e),function(t){var n=S[t]=e[t];S.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),z.call(this,n.apply(S,e))}})};var V=0;S.uniqueId=function(e){var t=++V+"";return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;S.template=function(e,t,n){var r;n=S.defaults({},n,S.templateSettings);var i=new RegExp([(n.escape||B).source,(n.interpolate||B).source,(n.evaluate||B).source].join("|")+"|$","g"),a=0,o="__p+='";e.replace(i,function(t,n,r,i,s){return o+=e.slice(a,s).replace(D,function(e){return"\\"+R[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),a=s+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(s){throw s.source=o,s}if(t)return r(t,S);var u=function(e){return r.call(this,e,S)};return u.source="function("+(n.variable||"obj")+"){\n"+o+"}",u},S.chain=function(e){return S(e).chain()};var z=function(e){return this._chain?S(e).chain():e};S.mixin(S),A(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];S.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],z.call(this,n)}}),A(["concat","join","slice"],function(e){var t=a[e];S.prototype[e]=function(){return z.call(this,t.apply(this._wrapped,arguments))}}),S.extend(S.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return S})}).call(this)},{}],57:[function(e,t){!function(e,n){"undefined"!=typeof t?t.exports=n():"function"==typeof define&&"object"==typeof define.amd?define(n):this[e]=n()}("domready",function(){var e,t=[],n=document,r=n.documentElement.doScroll,i="DOMContentLoaded",a=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);
return a||n.addEventListener(i,e=function(){for(n.removeEventListener(i,e),a=1;e=t.shift();)e()}),function(e){a?e():t.push(e)}})},{}],58:[function(){},{}]},{},[2]);