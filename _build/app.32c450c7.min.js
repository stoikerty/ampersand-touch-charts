!function t(e,n,i){function r(s,o){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return r(n?n:t)},l,l.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e){var n=t("../models/chartInterface"),i=t("../models/dataSet"),r=t("../models/series"),a=new n;a.minDataSetValue=0,a.maxDataSetValue=0,a.renderCSS=!1,a.dataSet=new i,a.dataSet.add({id:"0",caption:"5 inch gloss"}),a.dataSet.at(0).series=new r,a.dataSet.at(0).series.add({id:"0",name:"Orders",value:50}),a.dataSet.at(0).series.add({id:"1",name:"Items",value:700}),a.dataSet.at(0).series.add({id:"2",name:"Extra",value:400}),a.dataSet.add({id:"1",caption:"5 inch lustre"}),a.dataSet.at(1).series=new r,a.dataSet.at(1).series.add({id:"0",name:"Orders",value:30}),a.dataSet.at(1).series.add({id:"1",name:"Items",value:500}),a.dataSet.at(1).series.add({id:"2",name:"Extra",value:300}),a.dataSet.add({id:"2",caption:"6 inch gloss"}),a.dataSet.at(2).series=new r,a.dataSet.at(2).series.add({id:"0",name:"Orders",value:40}),a.dataSet.at(2).series.add({id:"1",name:"Items",value:600}),a.dataSet.at(2).series.add({id:"2",name:"Extra",value:200}),a.dataSet.add({id:"3",caption:"6 inch lustre"}),a.dataSet.at(3).series=new r,a.dataSet.at(3).series.add({id:"0",name:"Orders",value:60}),a.dataSet.at(3).series.add({id:"1",name:"Items",value:900}),a.dataSet.at(3).series.add({id:"2",name:"Extra",value:100}),e.exports=a},{"../models/chartInterface":4,"../models/dataSet":5,"../models/series":7}],2:[function(t){var e=t("domready"),n=t("./views/body"),i=t("raf-component"),r=t("./models/chartGlobals");window.chartGlobals=new r,chartGlobals.minDataSetValue=0,chartGlobals.maxDataSetValue=0,window.app={init:function(){var t=this,i=document.createElement("meta");i.httpEquiv="X-UA-Compatible",i.content="IE=edge",document.getElementsByTagName("head")[0].appendChild(i);var r=document.createElement("meta");r.id="viewport",r.name="viewport",r.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1",document.getElementsByTagName("head")[0].appendChild(r),e(function(){t.view=new n({el:document.body})}),this.animate()},animationTrigger:0,animationContext:[],animationCallback:[],addAnimation:function(t,e){this.animationContext.push(t),this.animationCallback.push(e)},animate:function(){if(i(this.animate.bind(this)),this.animationTrigger++,this.animationTrigger>1){this.animationTrigger=0;for(var t=0;t<this.animationCallback.length;t++)this.animationCallback[t].call(this.animationContext[t])}}},window.app.init()},{"./models/chartGlobals":3,"./views/body":10,domready:58,"raf-component":61}],3:[function(t,e){var n=t("ampersand-state");e.exports=n.extend({props:{id:"string",minDataSetValue:"integer",maxDataSetValue:"integer",renderCSS:"boolean"}})},{"ampersand-state":29}],4:[function(t,e){var n=t("ampersand-state"),i=t("./dataSet");e.exports=n.extend({props:{id:"string",minDataSetValue:"integer",maxDataSetValue:"integer"},collections:{dataSet:i}})},{"./dataSet":5,"ampersand-state":29}],5:[function(t,e){var n=t("ampersand-collection"),i=t("./dataSet_item");e.exports=n.extend({model:i})},{"./dataSet_item":6,"ampersand-collection":23}],6:[function(t,e){var n=t("ampersand-state"),i=t("./series");e.exports=n.extend({props:{id:"string",caption:"string"},collections:{series:i}})},{"./series":7,"ampersand-state":29}],7:[function(t,e){var n=t("ampersand-collection"),i=t("./series_item");e.exports=n.extend({model:i})},{"./series_item":8,"ampersand-collection":23}],8:[function(t,e){var n=t("ampersand-state");e.exports=n.extend({props:{id:"string",name:"string",value:"integer"}})},{"ampersand-state":29}],9:[function(t,e,n){!function(t,i){if("function"==typeof define&&define.amd)define([],i);else if("object"==typeof n)e.exports=i();else{if("undefined"==typeof t||t!==Object(t))throw new Error("templatizer: window does not exist or is not an object");t.templatizer=i()}}(this,function(){var e=(function(){function e(t){return null!=t&&""!==t}function n(t){return(Array.isArray(t)?t.map(n):t&&"object"==typeof t?Object.keys(t).filter(function(e){return t[e]}):[t]).filter(e).join(" ")}var i={};return i.merge=function r(t,n){if(1===arguments.length){for(var i=t[0],a=1;a<t.length;a++)i=r(i,t[a]);return i}var s=t["class"],o=n["class"];(s||o)&&(s=s||[],o=o||[],Array.isArray(s)||(s=[s]),Array.isArray(o)||(o=[o]),t["class"]=s.concat(o).filter(e));for(var u in n)"class"!=u&&(t[u]=n[u]);return t},i.joinClasses=n,i.cls=function(t,e){for(var r=[],a=0;a<t.length;a++)r.push(e&&e[a]?i.escape(n([t[a]])):n(t[a]));var s=n(r);return s.length?' class="'+s+'"':""},i.style=function(t){return t&&"object"==typeof t?Object.keys(t).map(function(e){return e+":"+t[e]}).join(";"):t},i.attr=function(t,e,n,r){return"style"===t&&(e=i.style(e)),"boolean"==typeof e||null==e?e?" "+(r?t:t+'="'+t+'"'):"":0==t.indexOf("data")&&"string"!=typeof e?(-1!==JSON.stringify(e).indexOf("&")&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),e&&"function"==typeof e.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+t+"='"+JSON.stringify(e).replace(/'/g,"&apos;")+"'"):n?(e&&"function"==typeof e.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+t+'="'+i.escape(e)+'"'):(e&&"function"==typeof e.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+t+'="'+e+'"')},i.attrs=function(t,e){var r=[],a=Object.keys(t);if(a.length)for(var s=0;s<a.length;++s){var o=a[s],u=t[o];"class"==o?(u=n(u))&&r.push(" "+o+'="'+u+'"'):r.push(i.attr(o,u,!1,e))}return r.join("")},i.escape=function(t){var e=String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return e===""+t?t:e},i.rethrow=function a(e,n,i,r){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&n||r))throw e.message+=" on line "+i,e;try{r=r||t("fs").readFileSync(n,"utf8")}catch(s){a(e,null,i)}var o=3,u=r.split("\n"),l=Math.max(i-o,0),c=Math.min(u.length,i+o),o=u.slice(l,c).map(function(t,e){var n=e+l+1;return(n==i?"  > ":"    ")+n+"| "+t}).join("\n");throw e.path=n,e.message=(n||"Jade")+":"+i+"\n"+o+"\n\n"+e.message,e},i}(),{});return e.chart={},e.chart.input={},e.chart.output={},e.body=function(){return'<body><div data-hook="interface-container" class="interface-container"></div></body>'},e.chart.input.dataSet=function(){return'<div class="dataSet-input"><ul data-hook="dataSet" class="dataSet"></ul></div>'},e.chart.input.dataSet_item=function(){return'<li class="dataSet_item"><div data-hook="caption" class="caption"></div><div data-hook="series-container" class="series-container"></div></li>'},e.chart.input.series=function(){return'<div class="series-container"><ul data-hook="series" class="series"></ul></div>'},e.chart.input.series_item=function(){return'<li class="series_item"><div data-hook="name" class="name"></div><input data-hook="value" class="value"/></li>'},e.chart["interface"]=function(){return'<div class="chart-interface"><div class="input"><div data-hook="input-container" class="input-container"></div></div><div class="output"><div data-hook="output-container" class="output-container"> </div></div><div class="explanation"><p>Touch-Charts created with ampersandjs, scss & hammerjs.<br>Find the source code on Github<br><a href="https://github.com/stoikerty/ampersand-touch-charts">https://github.com/stoikerty/ampersand-touch-charts</a></p><p>Jorge Antunes<br><a href="https://twitter.com/stoikerty">@stoikerty</a></p></div></div>'},e.chart.output.dataSet=function(){return'<div class="dataSet-output"><div class="scale"><div class="numbers"><div data-hook="scale-number" class="number max"><div class="value"></div></div><div data-hook="scale-number" class="number"><div class="value"></div></div><div data-hook="scale-number" class="number"><div class="value"></div></div><div data-hook="scale-number" class="number"><div class="value"></div></div><div data-hook="scale-number" class="number"><div class="value"></div></div><div data-hook="scale-number" class="number"><div class="value"></div></div><div data-hook="scale-number" class="number"><div class="value"></div></div><div data-hook="scale-number" class="number"><div class="value"></div></div><div data-hook="scale-number" class="number"><div class="value"></div></div><div data-hook="scale-null" class="number min"><div class="value"></div></div></div></div><ul data-hook="dataSet" class="dataSet"></ul></div>'},e.chart.output.dataSet_item=function(){return'<li class="dataSet_item"><div data-hook="caption" class="caption"></div><div data-hook="series-container" class="series-container"></div></li>'},e.chart.output.series=function(){return'<div class="series-container"><ul data-hook="series" class="series"></ul></div>'},e.chart.output.series_item=function(){return'<li class="series_item"><div data-hook="name" class="name"></div><div data-hook="value" class="value"></div><div data-hook="handle" class="handle"><div data-hook="handle-value" class="handle-value"></div></div></li>'},e})},{fs:60}],10:[function(t,e){var n=t("ampersand-view"),i=t("../templates"),r=t("./chart-interface");e.exports=n.extend({template:i.body,autoRender:!0,initialize:function(){document.title="{ Project }"},render:function(){this.renderWithTemplate(),this.interfaceContainerEl=this.queryByHook("interface-container"),this.view=new r({el:this.interfaceContainerEl})}})},{"../templates":9,"./chart-interface":11,"ampersand-view":35}],11:[function(t,e){var n=t("ampersand-view"),i=t("../templates"),r=t("./chart/input"),a=t("./chart/output");chartInterfaceModel=t("../_sample-data/chartInterface"),e.exports=n.extend({template:i.chart["interface"],autoRender:!0,initialize:function(){},render:function(){this.renderWithTemplate(),this.view=new r({el:this.queryByHook("input-container"),model:chartInterfaceModel}),this.view=new a({el:this.queryByHook("output-container"),model:chartInterfaceModel})}})},{"../_sample-data/chartInterface":1,"../templates":9,"./chart/input":12,"./chart/output":17,"ampersand-view":35}],12:[function(t,e){var n=t("ampersand-view"),i=(t("../../templates"),t("./input/dataSet"));e.exports=n.extend({template:'<div class="input-container" data-hook="input-container"></div>',autoRender:!0,initialize:function(){},render:function(){this.renderWithTemplate(),this.view=new i({el:this.queryByHook("input-container"),model:this.model})}})},{"../../templates":9,"./input/dataSet":13,"ampersand-view":35}],13:[function(t,e){var n=t("ampersand-view"),i=t("../../../templates"),r=t("./dataSet_item");e.exports=n.extend({template:i.chart.input.dataSet,autoRender:!0,initialize:function(){},render:function(){this.renderWithTemplate(),this.renderCollection(this.model.dataSet,r,this.queryByHook("dataSet"),{viewOptions:{chartInterfaceModel:this.model}})}})},{"../../../templates":9,"./dataSet_item":14,"ampersand-view":35}],14:[function(t,e){var n=t("ampersand-view"),i=t("../../../templates"),r=t("./series");e.exports=n.extend({template:i.chart.input.dataSet_item,autoRender:!0,bindings:{"model.caption":{type:"text",hook:"caption"}},initialize:function(t){this.chartInterfaceModel=t.chartInterfaceModel},render:function(){this.renderWithTemplate(),this.view=new r({el:this.queryByHook("series-container"),collection:this.model.series,chartInterfaceModel:this.chartInterfaceModel})}})},{"../../../templates":9,"./series":15,"ampersand-view":35}],15:[function(t,e){var n=t("ampersand-view"),i=t("../../../templates"),r=t("./series_item");e.exports=n.extend({template:i.chart.input.series,autoRender:!0,initialize:function(t){this.chartInterfaceModel=t.chartInterfaceModel},render:function(){this.renderWithTemplate(),this.renderCollection(this.collection,r,this.queryByHook("series"),{viewOptions:{chartInterfaceModel:this.chartInterfaceModel}})}})},{"../../../templates":9,"./series_item":16,"ampersand-view":35}],16:[function(t,e){var n=t("ampersand-view"),i=t("../../../templates");e.exports=n.extend({template:i.chart.input.series_item,autoRender:!0,events:{"keyup [data-hook=value]":"changeValue","blur [data-hook=value]":"changeValue"},bindings:{"model.name":{type:"text",hook:"name"},"model.value":{type:"value",hook:"value"}},initialize:function(t){this.chartInterfaceModel=t.chartInterfaceModel,this.listenTo(this.model,"change:value",this.valueChanged),this.valueChanged()},render:function(){this.renderWithTemplate(),this.valueEl=this.queryByHook("value")},valueChanged:function(){var t=-1e9,e=1e9,n=e,i=t;this.chartInterfaceModel.dataSet.forEach(function(t){t.series.forEach(function(t){i=Math.max(i,t.value),n=Math.min(n,t.value)})}),this.chartInterfaceModel.minDataSetValue=n,this.chartInterfaceModel.maxDataSetValue=i},changeValue:function(){var t=this.valueEl.value.trim();t&&this.model.set({value:t})}})},{"../../../templates":9,"ampersand-view":35}],17:[function(t,e){var n=t("ampersand-view"),i=(t("../../templates"),t("./output/dataSet"));e.exports=n.extend({template:'<div class="output-container" data-hook="output-container"></div>',autoRender:!0,initialize:function(){},render:function(){this.renderWithTemplate(),this.view=new i({el:this.queryByHook("output-container"),model:this.model})}})},{"../../templates":9,"./output/dataSet":18,"ampersand-view":35}],18:[function(t,e){{var n=t("ampersand-view"),r=t("../../../templates"),a=t("./dataSet_item");t("amp-debounce")}e.exports=n.extend({template:r.chart.output.dataSet,autoRender:!0,bindings:{"model.minDataSetValue":{type:"text",hook:"scale-number-min"},"model.maxDataSetValue":{type:function(){this.dataHasChanged=!0,this.updateSeriesItems()},hook:"value"}},round:function(t,e){return parseFloat(t.toFixed(e))},translate:function(t,e,n){t.style["-webkit-transform"]="translate("+e+"px, "+n+"px)",t.style["-moz-transform"]="translate("+e+"px, "+n+"px)",t.style["-ms-transform"]="translate("+e+"px, "+n+"px)",t.style["-o-transform"]="translate("+e+"px, "+n+"px)",t.style.transform="translate("+e+"px, "+n+"px)"},animateUpdatedElement:function(t,e){t&&(t.childNodes[0].classList.add("updated"),setTimeout(function(){t.childNodes[0].innerText=t.childNodes[0].textContent=e,t.childNodes[0].classList.remove("updated")},200))},dataHasChanged:!0,animate:function(){this.dataHasChanged&&(this.updateScaleNumbers(),this.dataHasChanged=!1)},updateSeriesItems:function(){this.model.dataSet.forEach(function(t){t.series.forEach(function(t){t.trigger("change"),t.trigger("maxValueChanged")})})},updateScaleNumbers:function(){var t=this.nullNumberElement.parentElement.clientHeight-this.nullNumberElement.clientHeight;for(i=0;i<this.allNumberElements.length;i++){var e=this.allNumberElements.length-(i+1),n=this.model.maxDataSetValue,r=(i+1)/this.allNumberElements.length,a=this.round(n*r,0);a>100&&(a=10*this.round(a/10,0)),this.animateUpdatedElement(this.allNumberElements[e],a),r=i/this.allNumberElements.length;var s=this.round(t*r,0);this.translate(this.allNumberElements[i],0,s)}this.animateUpdatedElement(this.nullNumberElement,0),this.translate(this.nullNumberElement,0,t)},initialize:function(){app.addAnimation(this,this.animate)},render:function(){this.renderWithTemplate(),this.allNumberElements=this.queryAll('[data-hook="scale-number"]'),this.nullNumberElement=this.query('[data-hook="scale-null"]'),this.updateScaleNumbers(),this.renderCollection(this.model.dataSet,a,this.queryByHook("dataSet"),{viewOptions:{chartInterfaceModel:this.model}})}})},{"../../../templates":9,"./dataSet_item":19,"amp-debounce":22,"ampersand-view":35}],19:[function(t,e){var n=t("ampersand-view"),i=t("../../../templates"),r=t("./series");e.exports=n.extend({template:i.chart.output.dataSet_item,autoRender:!0,bindings:{"model.caption":{type:"text",hook:"caption"}},initialize:function(t){this.chartInterfaceModel=t.chartInterfaceModel},render:function(){this.renderWithTemplate(),this.view=new r({el:this.queryByHook("series-container"),collection:this.model.series,chartInterfaceModel:this.chartInterfaceModel})}})},{"../../../templates":9,"./series":20,"ampersand-view":35}],20:[function(t,e){var n=t("ampersand-view"),i=t("../../../templates"),r=t("./series_item");e.exports=n.extend({template:i.chart.output.series,autoRender:!0,initialize:function(t){this.chartInterfaceModel=t.chartInterfaceModel},render:function(){this.renderWithTemplate(),this.renderCollection(this.collection,r,this.queryByHook("series"),{viewOptions:{chartInterfaceModel:this.chartInterfaceModel}})}})},{"../../../templates":9,"./series_item":21,"ampersand-view":35}],21:[function(t,e){{var n=t("ampersand-view"),i=t("../../../templates"),r=t("hammerjs");t("amp-debounce")}e.exports=n.extend({template:i.chart.output.series_item,autoRender:!0,renderCSSonly:!1,bindings:{"model.name":{type:"text",hook:"name"},"model.value":{type:function(){},hook:"value"}},round:function(t,e){return 1>t&&(t=0),parseFloat(t.toFixed(e))},scale:function(t,e,n){t.style["-webkit-transform"]="scale("+e+", "+n+")",t.style["-moz-transform"]="scale("+e+", "+n+")",t.style["-ms-transform"]="scale("+e+", "+n+")",t.style["-o-transform"]="scale("+e+", "+n+")",t.style.transform="scale("+e+", "+n+")"},translate:function(t,e,n){t.style["-webkit-transform"]="translate("+e+"px, "+n+"px)",t.style["-moz-transform"]="translate("+e+"px, "+n+"px)",t.style["-ms-transform"]="translate("+e+"px, "+n+"px)",t.style["-o-transform"]="translate("+e+"px, "+n+"px)",t.style.transform="translate("+e+"px, "+n+"px)"},registerHandleEvents:function(){var t=this;this.hammer=new r(this.handleEl),this.hammer.get("pan").set({direction:r.DIRECTION_ALL,threshold:0}),this.hammer.get("press").set({time:1}),this.hammer.on("press",function(e){return e.preventDefault(),t.startHandle(),!1}),this.hammer.on("panup pandown",function(e){return e.preventDefault(),t.updateHandle(e),!1}),this.hammer.on("panend",function(e){return e.preventDefault(),t.stopHandle(),!1}),this.hammer.on("pressup",function(e){return e.preventDefault(),t.stopHandle(),!1})},handleStartValue:0,handleCurrentValue:0,handleActive:!1,startHandle:function(){this.handleEl.classList.add("is-touched"),this.valueEl.classList.add("is-touched"),document.body.classList.add("disable-selection"),this.handleStartValue=this.model.value,this.handleCurrentValue=this.model.value,this.handleActive=!0},maxValueChanged:function(){this.handleActive&&this.model.value<=this.handleStartValue&&(this.handleStartValue=this.handleCurrentValue,this.handleEl.classList.remove("is-moving-up"),this.handleEl.classList.remove("is-moving-down"))},updateHandle:function(t){this.handleCurrentValue=this.model.value;var e=this.handleStartValue/this.chartInterfaceModel.maxDataSetValue*100,n=this.el.clientHeight/100*e,i=0,r=-t.deltaY||0;n+=r,i=n/this.el.clientHeight*100,this.model.value=this.round(this.chartInterfaceModel.maxDataSetValue/100*i,0),i>e+10?this.handleEl.classList.add("is-moving-up"):e-10>i?this.handleEl.classList.add("is-moving-down"):(this.handleEl.classList.remove("is-moving-up"),this.handleEl.classList.remove("is-moving-down"))},stopHandle:function(){this.handleEl.classList.remove("is-touched"),this.valueEl.classList.remove("is-touched"),this.handleEl.classList.remove("is-moving-up"),this.handleEl.classList.remove("is-moving-down"),document.body.classList.remove("disable-selection"),this.handleStartValue=0,this.handleCurrentValue=0,this.handleActive=!1},updateStyle:function(){this.valueEl=this.valueEl||this.el;var t=this.model.value/this.chartInterfaceModel.maxDataSetValue*100,e=this.el.clientHeight/100*t;if(0==this.chartInterfaceModel.maxDataSetValue)this.scale(this.valueEl,1,0);else{var n=this.model.value/this.chartInterfaceModel.maxDataSetValue;this.scale(this.valueEl,1,n)}this.translate(this.handleEl,0,-e),this.handleValueEl.innerText=this.handleValueEl.textContent=this.model.value},initialize:function(t){this.chartInterfaceModel=t.chartInterfaceModel;var e=this;e.model.on("maxValueChanged",function(){e.maxValueChanged()}),app.addAnimation(this,this.updateStyle)},render:function(){this.renderWithTemplate(),this.valueEl=this.queryByHook("value"),this.handleEl=this.queryByHook("handle"),this.handleValueEl=this.queryByHook("handle-value"),this.el.style.width=100/this.collection.length+"%",this.registerHandleEvents()}})},{"../../../templates":9,"amp-debounce":22,"ampersand-view":35,hammerjs:59}],22:[function(t,e){var n=Date.now;n||(n=function(){return(new Date).valueOf()}),e.exports=function(t,e,i){var r,a,s,o,u,l=function(){var c=n()-o;e>c&&c>=0?r=setTimeout(l,e-c):(r=null,i||(u=t.apply(s,a),r||(s=a=null)))};return function(){s=this,a=arguments,o=n();var c=i&&!r;return r||(r=setTimeout(l,e)),c&&(u=t.apply(s,a),s=a=null),u}}},{}],23:[function(t,e){function n(t,e){if(e||(e={}),e.model&&(this.model=e.model),e.comparator&&(this.comparator=e.comparator),e.parent&&(this.parent=e.parent),!this.mainIndex){var n=this.model&&this.model.prototype&&this.model.prototype.idAttribute;this.mainIndex=n||"id"}this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,s({silent:!0},e))}var i=t("backbone-events-standalone"),r=t("ampersand-class-extend"),a=t("is-array"),s=t("extend-object"),o=[].slice;s(n.prototype,i,{initialize:function(){},indexes:[],isModel:function(t){return this.model&&t instanceof this.model},add:function(t,e){return this.set(t,s({merge:!1,add:!0,remove:!1},e))},parse:function(t){return t},serialize:function(){return this.map(function(t){if(t.serialize)return t.serialize();var e={};return s(e,t),delete e.collection,e})},toJSON:function(){return this.serialize()},set:function(t,e){e=s({add:!0,remove:!0,merge:!0},e),e.parse&&(t=this.parse(t,e));var n=!a(t);t=n?t?[t]:[]:t.slice();var i,r,o,u,l,c,h,f=e.at,d=this.comparator&&null==f&&e.sort!==!1,p="string"==typeof this.comparator?this.comparator:null,v=[],m=[],g={},y=e.add,_=e.merge,b=e.remove,w=!d&&y&&b?[]:!1,x=this.model&&this.model.prototype||Object.prototype;for(c=0,h=t.length;h>c;c++){if(o=t[c]||{},i=this.isModel(o)?r=o:x.generateId?x.generateId(o):o[x.idAttribute||this.mainIndex],u=this.get(i))b&&(g[u.cid||u[this.mainIndex]]=!0),_&&(o=o===r?r.attributes:o,e.parse&&(o=u.parse(o,e)),u.set?(u.set(o,e),d&&!l&&u.hasChanged(p)&&(l=!0)):s(u,o)),t[c]=u;else if(y){if(r=t[c]=this._prepareModel(o,e),!r)continue;v.push(r),this._addReference(r,e)}r=u||r,r&&(w&&(r.isNew&&r.isNew()||!r[this.mainIndex]||!g[r.cid||r[this.mainIndex]])&&w.push(r),g[r[this.mainIndex]]=!0)}if(b){for(c=0,h=this.length;h>c;c++)r=this.models[c],g[r.cid||r[this.mainIndex]]||m.push(r);m.length&&this.remove(m,e)}if(v.length||w&&w.length)if(d&&(l=!0),null!=f)for(c=0,h=v.length;h>c;c++)this.models.splice(f+c,0,v[c]);else{var E=w||v;for(c=0,h=E.length;h>c;c++)this.models.push(E[c])}if(l&&this.sort({silent:!0}),!e.silent){for(c=0,h=v.length;h>c;c++)r=v[c],r.trigger?r.trigger("add",r,this,e):this.trigger("add",r,this,e);(l||w&&w.length)&&this.trigger("sort",this,e)}return n?t[0]:t},get:function(t,e){if(t){var n=this._indexes[e||this.mainIndex];return n[t]||n[t[this.mainIndex]]||this._indexes.cid[t]||this._indexes.cid[t.cid]}},at:function(t){return this.models[t]},remove:function(t,e){var n,i,r,s,u=!a(t);for(t=u?[t]:o.call(t),e||(e={}),n=0,i=t.length;i>n;n++)r=t[n]=this.get(t[n]),r&&(this._deIndex(r),s=this.models.indexOf(r),this.models.splice(s,1),e.silent||(e.index=s,r.trigger?r.trigger("remove",r,this,e):this.trigger("remove",r,this,e)),this._removeReference(r,e));return u?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,s({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},sort:function(t){var e=this;if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),this.models.sort("string"==typeof this.comparator?function(t,n){return t.get?(t=t.get(e.comparator),n=n.get(e.comparator)):(t=t[e.comparator],n=n[e.comparator]),t>n||void 0===t?1:n>t||void 0===n?-1:0}:1===this.comparator.length?function(t,n){return t=e.comparator(t),n=e.comparator(n),t>n||void 0===t?1:n>t||void 0===n?-1:0}:this.comparator.bind(this)),t.silent||this.trigger("sort",this,t),this},_reset:function(){var t=this.indexes||[],e=0;t.push(this.mainIndex),t.push("cid");var n=t.length;for(this.models=[],this._indexes={};n>e;e++)this._indexes[t[e]]={}},_prepareModel:function(t,e){if(!this.model)return t;if(this.isModel(t))return t.collection||(t.collection=this),t;e=e?s({},e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_deIndex:function(t){for(var e in this._indexes)delete this._indexes[e][t[e]||t.get&&t.get(e)]},_index:function(t){for(var e in this._indexes){var n=t[e]||t.get&&t.get(e);n&&(this._indexes[e][n]=t)}},_addReference:function(t){this._index(t),t.collection||(t.collection=this),t.on&&t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,this._deIndex(t),t.off&&t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+this.mainIndex&&(this._deIndex(e),this._index(e)),this.trigger.apply(this,arguments))}}),Object.defineProperties(n.prototype,{length:{get:function(){return this.models.length}},isCollection:{value:!0}});var u=["indexOf","lastIndexOf","every","some","forEach","map","filter","reduce","reduceRight"];u.forEach(function(t){n.prototype[t]=function(){return this.models[t].apply(this.models,arguments)}}),n.prototype.each=n.prototype.forEach,n.extend=r,e.exports=n},{"ampersand-class-extend":24,"backbone-events-standalone":26,"extend-object":27,"is-array":28}],24:[function(t,e){var n=t("extend-object"),i=function(t){var e,i=this,r=[].slice.call(arguments);e=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return i.apply(this,arguments)},n(e,i);var a=function(){this.constructor=e};return a.prototype=i.prototype,e.prototype=new a,t&&(r.unshift(e.prototype),n.apply(null,r)),e.__super__=i.prototype,e};e.exports=i},{"extend-object":27}],25:[function(t,e,n){!function(){function t(){return{keys:Object.keys,uniqueId:function(t){var e=++l+"";return t?t+e:e},has:function(t,e){return o.call(t,e)},each:function(t,e,n){if(null!=t)if(s&&t.forEach===s)t.forEach(e,n);else if(t.length===+t.length){for(var i=0,r=t.length;r>i;i++)if(e.call(n,t[i],i,t)===a)return}else for(var o in t)if(this.has(t,o)&&e.call(n,t[o],o,t)===a)return},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var i,r=this,a={},s=Array.prototype.forEach,o=Object.prototype.hasOwnProperty,u=Array.prototype.slice,l=0,c=t();i={on:function(t,e,n){if(!f(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!f(this,"once",t,[e,n])||!e)return this;var i=this,r=c.once(function(){i.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var i,r,a,s,o,u,l,h;if(!this._events||!f(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:c.keys(this._events),o=0,u=s.length;u>o;o++)if(t=s[o],a=this._events[t]){if(this._events[t]=i=[],e||n)for(l=0,h=a.length;h>l;l++)r=a[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=u.call(arguments,1);if(!f(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&d(n,e),i&&d(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var a in i)i[a].off(e,n,this),r&&delete this._listeners[a];return this}};var h=/\s+/,f=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(h.test(n)){for(var a=n.split(h),s=0,o=a.length;o>s;s++)t[e].apply(t,[a[s]].concat(i));return!1}return!0},d=function(t,e){var n,i=-1,r=t.length,a=e[0],s=e[1],o=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,a);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,a,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,a,s,o);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}},p={listenTo:"on",listenToOnce:"once"};c.each(p,function(t,e){i[e]=function(e,n,i){var r=this._listeners||(this._listeners={}),a=e._listenerId||(e._listenerId=c.uniqueId("l"));return r[a]=e,"object"==typeof n&&(i=this),e[t](n,i,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return c.each(e,function(e){t[e]=this[e]},this),t},"function"==typeof define?define(function(){return i}):"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=i),n.BackboneEvents=i):r.BackboneEvents=i}(this)},{}],26:[function(t,e){e.exports=t("./backbone-events-standalone")},{"./backbone-events-standalone":25}],27:[function(t,e){var n=[],i=n.forEach,r=n.slice;e.exports=function(t){return i.call(r.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t}},{}],28:[function(t,e){var n=Array.isArray,i=Object.prototype.toString;e.exports=n||function(t){return!!t&&"[object Array]"==i.call(t)}},{}],29:[function(t,e){function n(t,e){e||(e={}),this.cid||(this.cid=s.uniqueId("state")),this._events={},this._values={},this._definition=Object.create(this._definition),e.parse&&(t=this.parse(t,e)),this.parent=e.parent,this.collection=e.collection,this._keyTree=new u,this._initCollections(),this._initChildren(),this._cache={},this._previousAttributes={},t&&this.set(t,s.extend({silent:!0,initial:!0},e)),this._changed={},this._derived&&this._initDerived(),e.init!==!1&&this.initialize.apply(this,arguments)}function i(t,e,n,i){var r,a,o=t._definition[e]={};if(s.isString(n))r=t._ensureValidType(n),r&&(o.type=r);else{if(s.isArray(n)&&(a=n,n={type:a[0],required:a[1],"default":a[2]}),r=t._ensureValidType(n.type),r&&(o.type=r),n.required&&(o.required=!0),n["default"]&&"object"==typeof n["default"])throw new TypeError("The default value for "+e+" cannot be an object/array, must be a value or a function which returns a value/object/array");o["default"]=n["default"],o.allowNull=n.allowNull?n.allowNull:!1,n.setOnce&&(o.setOnce=!0),o.required&&s.isUndefined(o["default"])&&!o.setOnce&&(o["default"]=t._getDefaultForType(r)),o.test=n.test,o.values=n.values}return i&&(o.session=!0),Object.defineProperty(t,e,{set:function(t){this.set(e,t)},get:function(){var t=this._values[e],n=this._dataTypes[o.type];return"undefined"!=typeof t?(n&&n.get&&(t=n.get(t)),t):(t=s.result(o,"default"),this._values[e]=t,t)}}),o}function r(t,e,n){var i=t._derived[e]={fn:s.isFunction(n)?n:n.fn,cache:n.cache!==!1,depList:n.deps||[]};s.each(i.depList,function(n){t._deps[n]=s(t._deps[n]||[]).union([e])}),Object.defineProperty(t,e,{get:function(){return this._getDerivedProperty(e)},set:function(){throw new TypeError('"'+e+"\" is a derived property, it can't be set directly.")}})}function a(t){var e,n=this,a=[].slice.call(arguments);e=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return n.apply(this,arguments)},s.extend(e,n);var o=function(){this.constructor=e};o.prototype=n.prototype,e.prototype=new o,e.prototype._derived=s.extend({},n.prototype._derived),e.prototype._deps=s.extend({},n.prototype._deps),e.prototype._definition=s.extend({},n.prototype._definition),e.prototype._collections=s.extend({},n.prototype._collections),e.prototype._children=s.extend({},n.prototype._children),e.prototype._dataTypes=s.extend({},n.prototype._dataTypes||h),t&&a.forEach(function(t){var n=["dataTypes","props","session","derived","collections","children"];
t.dataTypes&&s.each(t.dataTypes,function(t,n){e.prototype._dataTypes[n]=t}),t.props&&s.each(t.props,function(t,n){i(e.prototype,n,t)}),t.session&&s.each(t.session,function(t,n){i(e.prototype,n,t,!0)}),t.derived&&s.each(t.derived,function(t,n){r(e.prototype,n,t)}),t.collections&&s.each(t.collections,function(t,n){e.prototype._collections[n]=t}),t.children&&s.each(t.children,function(t,n){e.prototype._children[n]=t}),s.extend(e.prototype,s.omit(t,n))});Object.prototype.toString;return e.__super__=n.prototype,e}"undefined"!=typeof window&&(window.ampersand=window.ampersand||{},window.ampersand["ampersand-state"]=window.ampersand["ampersand-state"]||[],window.ampersand["ampersand-state"].push("4.4.4"));var s=t("underscore"),o=t("backbone-events-standalone"),u=t("key-tree-store"),l=t("array-next"),c=/^change:/;s.extend(n.prototype,o,{extraProperties:"ignore",idAttribute:"id",namespaceAttribute:"namespace",typeAttribute:"modelType",initialize:function(){return this},getId:function(){return this[this.idAttribute]},getNamespace:function(){return this[this.namespaceAttribute]},getType:function(){return this[this.typeAttribute]},isNew:function(){return null==this.getId()},escape:function(t){return s.escape(this.get(t))},isValid:function(t){return this._validate({},s.extend(t||{},{validate:!0}))},parse:function(t){return t},serialize:function(){var t=this.getAttributes({props:!0},!0);return s.each(this._children,function(e,n){t[n]=this[n].serialize()},this),s.each(this._collections,function(e,n){t[n]=this[n].serialize()},this),t},set:function(t,e,n){var i,r,a,o,u,l,c,h,f,d,p,v,m,g,y,_,b=this,w=this.extraProperties;if(s.isObject(t)||null===t?(f=t,n=e):(f={},f[t]=e),n=n||{},!this._validate(f,n))return!1;v=n.unset,p=n.silent,g=n.initial,r=[],i=this._changing,this._changing=!0,i||(this._previousAttributes=this.attributes,this._changed={});for(h in f){if(o=f[h],a=typeof o,m=this._values[h],u=this._definition[h],!u){if(this._children[h]||this._collections[h]){this[h].set(o,n);continue}if("ignore"===w)continue;if("reject"===w)throw new TypeError('No "'+h+'" property defined on '+(this.type||"this")+' model and extraProperties not set to "ignore" or "allow"');if("allow"===w)u=this._createPropertyDefinition(h,"any");else if(w)throw new TypeError('Invalid value for extraProperties: "'+w+'"')}if(_=this._getCompareForType(u.type),d=this._dataTypes[u.type],d&&d.set&&(l=d.set(o),o=l.val,a=l.type),u.test&&(c=u.test.call(this,o,a)))throw new TypeError("Property '"+h+"' failed validation with error: "+c);if(s.isUndefined(o)&&u.required)throw new TypeError("Required property '"+h+"' must be of type "+u.type+". Tried to set "+o);if(s.isNull(o)&&u.required&&!u.allowNull)throw new TypeError("Property '"+h+"' must be of type "+u.type+" (cannot be null). Tried to set "+o);if(u.type&&"any"!==u.type&&u.type!==a&&!s.isNull(o)&&!s.isUndefined(o))throw new TypeError("Property '"+h+"' must be of type "+u.type+". Tried to set "+o);if(u.values&&!s.contains(u.values,o))throw new TypeError("Property '"+h+"' must be one of values: "+u.values.join(", ")+". Tried to set "+o);if(y=!_(m,o,h),u.setOnce&&void 0!==m&&y&&!g)throw new TypeError("Property '"+h+"' can only be set once.");y?(r.push({prev:m,val:o,key:h}),b._changed[h]=o):delete b._changed[h]}if(s.each(r,function(t){b._previousAttributes[t.key]=t.prev,v?delete b._values[t.key]:b._values[t.key]=t.val}),!p&&r.length&&(b._pending=!0),p||s.each(r,function(t){b.trigger("change:"+t.key,b,t.val,n)}),i)return this;if(!p)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},get:function(t){return this[t]},toggle:function(t){var e=this._definition[t];if("boolean"===e.type)this[t]=!this[t];else{if(!e||!e.values)throw new TypeError("Can only toggle properties that are type `boolean` or have `values` array.");this[t]=l(e.values,this[t])}return this},previousAttributes:function(){return s.clone(this._previousAttributes)},hasChanged:function(t){return null==t?!s.isEmpty(this._changed):s.has(this._changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?s.clone(this._changed):!1;var e,n,i,r=!1,a=this._changing?this._previousAttributes:this.attributes;for(var o in t)n=this._definition[o],n&&(i=this._getCompareForType(n.type),i(a[o],e=t[o])||((r||(r={}))[o]=e));return r},toJSON:function(){return this.serialize()},unset:function(t,e){{var n,i=this._definition[t];i.type}return i.required?(n=s.result(i,"default"),this.set(t,n,e)):this.set(t,n,s.extend({},e,{unset:!0}))},clear:function(t){var e=this;return s.each(s.keys(this.attributes),function(n){e.unset(n,t)}),this},previous:function(t){return null!=t&&Object.keys(this._previousAttributes).length?this._previousAttributes[t]:null},_getDefaultForType:function(t){var e=this._dataTypes[t];return e&&e["default"]},_getCompareForType:function(t){var e=this._dataTypes[t];return e&&e.compare?s.bind(e.compare,this):s.isEqual},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=s.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,s.extend(e||{},{validationError:n})),!1):!0},_createPropertyDefinition:function(t,e,n){return i(this,t,e,n)},_ensureValidType:function(t){return s.contains(["string","number","boolean","array","object","date","any"].concat(s.keys(this._dataTypes)),t)?t:void 0},getAttributes:function(t,e){t||(t={}),s.defaults(t,{session:!1,props:!1,derived:!1});var n,i,r,a={};for(i in this._definition)r=this._definition[i],(t.session&&r.session||t.props&&!r.session)&&(n=e?this._values[i]:this[i],"undefined"==typeof n&&(n=s.result(r,"default")),"undefined"!=typeof n&&(a[i]=n));if(t.derived)for(i in this._derived)a[i]=this[i];return a},_initDerived:function(){var t=this;s.each(this._derived,function(e,n){var i=t._derived[n];i.deps=i.depList;var r=function(e){e=e||{};var r=i.fn.call(t);t._cache[n]===r&&i.cache||(i.cache&&(t._previousAttributes[n]=t._cache[n]),t._cache[n]=r,t.trigger("change:"+n,t,t._cache[n]))};i.deps.forEach(function(e){t._keyTree.add(e,r)})}),this.on("all",function(e){c.test(e)&&t._keyTree.get(e.split(":")[1]).forEach(function(t){t()})},this)},_getDerivedProperty:function(t,e){return this._derived[t].cache?((e||!this._cache.hasOwnProperty(t))&&(this._cache[t]=this._derived[t].fn.apply(this)),this._cache[t]):this._derived[t].fn.apply(this)},_initCollections:function(){var t;if(this._collections)for(t in this._collections)this[t]=new this._collections[t](null,{parent:this})},_initChildren:function(){var t;if(this._children)for(t in this._children)this[t]=new this._children[t]({},{parent:this}),this.listenTo(this[t],"all",this._getEventBubblingHandler(t))},_getEventBubblingHandler:function(t){return s.bind(function(e,n,i){c.test(e)?this.trigger("change:"+t+"."+e.split(":")[1],n,i):"change"===e&&this.trigger("change",this)},this)},_verifyRequired:function(){var t=this.attributes;for(var e in this._definition)if(this._definition[e].required&&"undefined"==typeof t[e])return!1;return!0}}),Object.defineProperties(n.prototype,{attributes:{get:function(){return this.getAttributes({props:!0,session:!0})}},all:{get:function(){return this.getAttributes({session:!0,props:!0,derived:!0})}},isState:{get:function(){return!0},set:function(){}}});var h={string:{"default":function(){return""}},date:{set:function(t){var e;if(s.isDate(t))e="date",t=t.valueOf();else try{var n=new Date(t).valueOf();if(isNaN(n)&&(n=new Date(parseInt(t,10)).valueOf(),isNaN(n)))throw TypeError;t=n,e="date"}catch(i){e=typeof t}return{val:t,type:e}},get:function(t){return new Date(t)},"default":function(){return new Date}},array:{set:function(t){return{val:t,type:s.isArray(t)?"array":typeof t}},"default":function(){return[]}},object:{set:function(t){var e=typeof t;return"object"!==e&&s.isUndefined(t)&&(t=null,e="object"),{val:t,type:e}},"default":function(){return{}}},state:{set:function(t){var e=t instanceof n||t&&t.isState;return e?{val:t,type:"state"}:{val:t,type:typeof t}},compare:function(t,e,n){var i=t===e;return i||(t&&this.stopListening(t),null!=e&&this.listenTo(e,"all",this._getEventBubblingHandler(n))),i}}};n.extend=a,e.exports=n},{"array-next":30,"backbone-events-standalone":32,"key-tree-store":33,underscore:34}],30:[function(t,e){e.exports=function(t,e){var n=t.length,i=t.indexOf(e)+1;return i>n-1&&(i=0),t[i]}},{}],31:[function(t,e){e.exports=t(25)},{}],32:[function(t,e){e.exports=t(26)},{"./backbone-events-standalone":31}],33:[function(t,e){function n(){this.storage={}}n.prototype.add=function(t,e){var n=this.storage[t]||(this.storage[t]=[]);n.push(e)},n.prototype.remove=function(t){var e,n;for(e in this.storage)n=this.storage[e],n.some(function(e,i){return e===t?(n.splice(i,1),!0):void 0})},n.prototype.get=function(t){var e,n=[];for(e in this.storage)(t===e||0===e.indexOf(t+"."))&&(n=n.concat(this.storage[e]));return n},e.exports=n},{}],34:[function(t,e,n){(function(){var t=this,i=t._,r=Array.prototype,a=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,l=r.concat,c=a.toString,h=a.hasOwnProperty,f=Array.isArray,d=Object.keys,p=s.bind,v=function(t){return t instanceof v?t:this instanceof v?void(this._wrapped=t):new v(t)};"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=v),n._=v):t._=v,v.VERSION="1.7.0";var m=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,a){return t.call(e,n,i,r,a)}}return function(){return t.apply(e,arguments)}};v.iteratee=function(t,e,n){return null==t?v.identity:v.isFunction(t)?m(t,e,n):v.isObject(t)?v.matches(t):v.property(t)},v.each=v.forEach=function(t,e,n){if(null==t)return t;e=m(e,n);var i,r=t.length;if(r===+r)for(i=0;r>i;i++)e(t[i],i,t);else{var a=v.keys(t);for(i=0,r=a.length;r>i;i++)e(t[a[i]],a[i],t)}return t},v.map=v.collect=function(t,e,n){if(null==t)return[];e=v.iteratee(e,n);for(var i,r=t.length!==+t.length&&v.keys(t),a=(r||t).length,s=Array(a),o=0;a>o;o++)i=r?r[o]:o,s[o]=e(t[i],i,t);return s};var g="Reduce of empty array with no initial value";v.reduce=v.foldl=v.inject=function(t,e,n,i){null==t&&(t=[]),e=m(e,i,4);var r,a=t.length!==+t.length&&v.keys(t),s=(a||t).length,o=0;if(arguments.length<3){if(!s)throw new TypeError(g);n=t[a?a[o++]:o++]}for(;s>o;o++)r=a?a[o]:o,n=e(n,t[r],r,t);return n},v.reduceRight=v.foldr=function(t,e,n,i){null==t&&(t=[]),e=m(e,i,4);var r,a=t.length!==+t.length&&v.keys(t),s=(a||t).length;if(arguments.length<3){if(!s)throw new TypeError(g);n=t[a?a[--s]:--s]}for(;s--;)r=a?a[s]:s,n=e(n,t[r],r,t);return n},v.find=v.detect=function(t,e,n){var i;return e=v.iteratee(e,n),v.some(t,function(t,n,r){return e(t,n,r)?(i=t,!0):void 0}),i},v.filter=v.select=function(t,e,n){var i=[];return null==t?i:(e=v.iteratee(e,n),v.each(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i)},v.reject=function(t,e,n){return v.filter(t,v.negate(v.iteratee(e)),n)},v.every=v.all=function(t,e,n){if(null==t)return!0;e=v.iteratee(e,n);var i,r,a=t.length!==+t.length&&v.keys(t),s=(a||t).length;for(i=0;s>i;i++)if(r=a?a[i]:i,!e(t[r],r,t))return!1;return!0},v.some=v.any=function(t,e,n){if(null==t)return!1;e=v.iteratee(e,n);var i,r,a=t.length!==+t.length&&v.keys(t),s=(a||t).length;for(i=0;s>i;i++)if(r=a?a[i]:i,e(t[r],r,t))return!0;return!1},v.contains=v.include=function(t,e){return null==t?!1:(t.length!==+t.length&&(t=v.values(t)),v.indexOf(t,e)>=0)},v.invoke=function(t,e){var n=u.call(arguments,2),i=v.isFunction(e);return v.map(t,function(t){return(i?e:t[e]).apply(t,n)})},v.pluck=function(t,e){return v.map(t,v.property(e))},v.where=function(t,e){return v.filter(t,v.matches(e))},v.findWhere=function(t,e){return v.find(t,v.matches(e))},v.max=function(t,e,n){var i,r,a=-1/0,s=-1/0;if(null==e&&null!=t){t=t.length===+t.length?t:v.values(t);for(var o=0,u=t.length;u>o;o++)i=t[o],i>a&&(a=i)}else e=v.iteratee(e,n),v.each(t,function(t,n,i){r=e(t,n,i),(r>s||r===-1/0&&a===-1/0)&&(a=t,s=r)});return a},v.min=function(t,e,n){var i,r,a=1/0,s=1/0;if(null==e&&null!=t){t=t.length===+t.length?t:v.values(t);for(var o=0,u=t.length;u>o;o++)i=t[o],a>i&&(a=i)}else e=v.iteratee(e,n),v.each(t,function(t,n,i){r=e(t,n,i),(s>r||1/0===r&&1/0===a)&&(a=t,s=r)});return a},v.shuffle=function(t){for(var e,n=t&&t.length===+t.length?t:v.values(t),i=n.length,r=Array(i),a=0;i>a;a++)e=v.random(0,a),e!==a&&(r[a]=r[e]),r[e]=n[a];return r},v.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=v.values(t)),t[v.random(t.length-1)]):v.shuffle(t).slice(0,Math.max(0,e))},v.sortBy=function(t,e,n){return e=v.iteratee(e,n),v.pluck(v.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var y=function(t){return function(e,n,i){var r={};return n=v.iteratee(n,i),v.each(e,function(i,a){var s=n(i,a,e);t(r,i,s)}),r}};v.groupBy=y(function(t,e,n){v.has(t,n)?t[n].push(e):t[n]=[e]}),v.indexBy=y(function(t,e,n){t[n]=e}),v.countBy=y(function(t,e,n){v.has(t,n)?t[n]++:t[n]=1}),v.sortedIndex=function(t,e,n,i){n=v.iteratee(n,i,1);for(var r=n(e),a=0,s=t.length;s>a;){var o=a+s>>>1;n(t[o])<r?a=o+1:s=o}return a},v.toArray=function(t){return t?v.isArray(t)?u.call(t):t.length===+t.length?v.map(t,v.identity):v.values(t):[]},v.size=function(t){return null==t?0:t.length===+t.length?t.length:v.keys(t).length},v.partition=function(t,e,n){e=v.iteratee(e,n);var i=[],r=[];return v.each(t,function(t,n,a){(e(t,n,a)?i:r).push(t)}),[i,r]},v.first=v.head=v.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:u.call(t,0,e)},v.initial=function(t,e,n){return u.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},v.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:u.call(t,Math.max(t.length-e,0))},v.rest=v.tail=v.drop=function(t,e,n){return u.call(t,null==e||n?1:e)},v.compact=function(t){return v.filter(t,v.identity)};var _=function(t,e,n,i){if(e&&v.every(t,v.isArray))return l.apply(i,t);for(var r=0,a=t.length;a>r;r++){var s=t[r];v.isArray(s)||v.isArguments(s)?e?o.apply(i,s):_(s,e,n,i):n||i.push(s)}return i};v.flatten=function(t,e){return _(t,e,!1,[])},v.without=function(t){return v.difference(t,u.call(arguments,1))},v.uniq=v.unique=function(t,e,n,i){if(null==t)return[];v.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=v.iteratee(n,i));for(var r=[],a=[],s=0,o=t.length;o>s;s++){var u=t[s];if(e)s&&a===u||r.push(u),a=u;else if(n){var l=n(u,s,t);v.indexOf(a,l)<0&&(a.push(l),r.push(u))}else v.indexOf(r,u)<0&&r.push(u)}return r},v.union=function(){return v.uniq(_(arguments,!0,!0,[]))},v.intersection=function(t){if(null==t)return[];for(var e=[],n=arguments.length,i=0,r=t.length;r>i;i++){var a=t[i];if(!v.contains(e,a)){for(var s=1;n>s&&v.contains(arguments[s],a);s++);s===n&&e.push(a)}}return e},v.difference=function(t){var e=_(u.call(arguments,1),!0,!0,[]);return v.filter(t,function(t){return!v.contains(e,t)})},v.zip=function(t){if(null==t)return[];for(var e=v.max(arguments,"length").length,n=Array(e),i=0;e>i;i++)n[i]=v.pluck(arguments,i);return n},v.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},v.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=v.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}for(;r>i;i++)if(t[i]===e)return i;return-1},v.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=t.length;for("number"==typeof n&&(i=0>n?i+n+1:Math.min(i,n+1));--i>=0;)if(t[i]===e)return i;return-1},v.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),a=0;i>a;a++,t+=n)r[a]=t;return r};var b=function(){};v.bind=function(t,e){var n,i;if(p&&t.bind===p)return p.apply(t,u.call(arguments,1));if(!v.isFunction(t))throw new TypeError("Bind must be called on a function");return n=u.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(u.call(arguments)));b.prototype=t.prototype;var r=new b;b.prototype=null;var a=t.apply(r,n.concat(u.call(arguments)));return v.isObject(a)?a:r}},v.partial=function(t){var e=u.call(arguments,1);return function(){for(var n=0,i=e.slice(),r=0,a=i.length;a>r;r++)i[r]===v&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},v.bindAll=function(t){var e,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(e=1;i>e;e++)n=arguments[e],t[n]=v.bind(t[n],t);return t},v.memoize=function(t,e){var n=function(i){var r=n.cache,a=e?e.apply(this,arguments):i;return v.has(r,a)||(r[a]=t.apply(this,arguments)),r[a]};return n.cache={},n},v.delay=function(t,e){var n=u.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},v.defer=function(t){return v.delay.apply(v,[t,1].concat(u.call(arguments,1)))},v.throttle=function(t,e,n){var i,r,a,s=null,o=0;n||(n={});var u=function(){o=n.leading===!1?0:v.now(),s=null,a=t.apply(i,r),s||(i=r=null)};return function(){var l=v.now();o||n.leading!==!1||(o=l);var c=e-(l-o);return i=this,r=arguments,0>=c||c>e?(clearTimeout(s),s=null,o=l,a=t.apply(i,r),s||(i=r=null)):s||n.trailing===!1||(s=setTimeout(u,c)),a}},v.debounce=function(t,e,n){var i,r,a,s,o,u=function(){var l=v.now()-s;e>l&&l>0?i=setTimeout(u,e-l):(i=null,n||(o=t.apply(a,r),i||(a=r=null)))};return function(){a=this,r=arguments,s=v.now();var l=n&&!i;return i||(i=setTimeout(u,e)),l&&(o=t.apply(a,r),a=r=null),o}},v.wrap=function(t,e){return v.partial(e,t)},v.negate=function(t){return function(){return!t.apply(this,arguments)}},v.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},v.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},v.before=function(t,e){var n;return function(){return--t>0?n=e.apply(this,arguments):e=null,n}},v.once=v.partial(v.before,2),v.keys=function(t){if(!v.isObject(t))return[];if(d)return d(t);var e=[];for(var n in t)v.has(t,n)&&e.push(n);return e},v.values=function(t){for(var e=v.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},v.pairs=function(t){for(var e=v.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},v.invert=function(t){for(var e={},n=v.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},v.functions=v.methods=function(t){var e=[];for(var n in t)v.isFunction(t[n])&&e.push(n);return e.sort()},v.extend=function(t){if(!v.isObject(t))return t;for(var e,n,i=1,r=arguments.length;r>i;i++){e=arguments[i];for(n in e)h.call(e,n)&&(t[n]=e[n])}return t},v.pick=function(t,e,n){var i,r={};if(null==t)return r;if(v.isFunction(e)){e=m(e,n);for(i in t){var a=t[i];e(a,i,t)&&(r[i]=a)}}else{var s=l.apply([],u.call(arguments,1));t=new Object(t);for(var o=0,c=s.length;c>o;o++)i=s[o],i in t&&(r[i]=t[i])}return r},v.omit=function(t,e,n){if(v.isFunction(e))e=v.negate(e);else{var i=v.map(l.apply([],u.call(arguments,1)),String);e=function(t,e){return!v.contains(i,e)}}return v.pick(t,e,n)},v.defaults=function(t){if(!v.isObject(t))return t;for(var e=1,n=arguments.length;n>e;e++){var i=arguments[e];for(var r in i)void 0===t[r]&&(t[r]=i[r])}return t},v.clone=function(t){return v.isObject(t)?v.isArray(t)?t.slice():v.extend({},t):t},v.tap=function(t,e){return e(t),t};var w=function(t,e,n,i){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof v&&(t=t._wrapped),e instanceof v&&(e=e._wrapped);var r=c.call(t);if(r!==c.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}if("object"!=typeof t||"object"!=typeof e)return!1;for(var a=n.length;a--;)if(n[a]===t)return i[a]===e;var s=t.constructor,o=e.constructor;if(s!==o&&"constructor"in t&&"constructor"in e&&!(v.isFunction(s)&&s instanceof s&&v.isFunction(o)&&o instanceof o))return!1;n.push(t),i.push(e);var u,l;if("[object Array]"===r){if(u=t.length,l=u===e.length)for(;u--&&(l=w(t[u],e[u],n,i)););}else{var h,f=v.keys(t);if(u=f.length,l=v.keys(e).length===u)for(;u--&&(h=f[u],l=v.has(e,h)&&w(t[h],e[h],n,i)););}return n.pop(),i.pop(),l};v.isEqual=function(t,e){return w(t,e,[],[])},v.isEmpty=function(t){if(null==t)return!0;if(v.isArray(t)||v.isString(t)||v.isArguments(t))return 0===t.length;for(var e in t)if(v.has(t,e))return!1;return!0},v.isElement=function(t){return!(!t||1!==t.nodeType)},v.isArray=f||function(t){return"[object Array]"===c.call(t)},v.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},v.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){v["is"+t]=function(e){return c.call(e)==="[object "+t+"]"}}),v.isArguments(arguments)||(v.isArguments=function(t){return v.has(t,"callee")}),"function"!=typeof/./&&(v.isFunction=function(t){return"function"==typeof t||!1}),v.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},v.isNaN=function(t){return v.isNumber(t)&&t!==+t},v.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===c.call(t)},v.isNull=function(t){return null===t},v.isUndefined=function(t){return void 0===t},v.has=function(t,e){return null!=t&&h.call(t,e)},v.noConflict=function(){return t._=i,this},v.identity=function(t){return t},v.constant=function(t){return function(){return t}},v.noop=function(){},v.property=function(t){return function(e){return e[t]}},v.matches=function(t){var e=v.pairs(t),n=e.length;return function(t){if(null==t)return!n;t=new Object(t);for(var i=0;n>i;i++){var r=e[i],a=r[0];if(r[1]!==t[a]||!(a in t))return!1}return!0}},v.times=function(t,e,n){var i=Array(Math.max(0,t));e=m(e,n,1);for(var r=0;t>r;r++)i[r]=e(r);return i},v.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},v.now=Date.now||function(){return(new Date).getTime()};var x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},E=v.invert(x),T=function(t){var e=function(e){return t[e]},n="(?:"+v.keys(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}};v.escape=T(x),v.unescape=T(E),v.result=function(t,e){if(null==t)return void 0;var n=t[e];return v.isFunction(n)?t[e]():n};var A=0;v.uniqueId=function(t){var e=++A+"";return t?t+e:e},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var k=/(.)^/,S={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\u2028|\u2029/g,I=function(t){return"\\"+S[t]};v.template=function(t,e,n){!e&&n&&(e=n),e=v.defaults({},e,v.templateSettings);var i=RegExp([(e.escape||k).source,(e.interpolate||k).source,(e.evaluate||k).source].join("|")+"|$","g"),r=0,a="__p+='";t.replace(i,function(e,n,i,s,o){return a+=t.slice(r,o).replace(O,I),r=o+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?a+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(a+="';\n"+s+"\n__p+='"),e}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var s=new Function(e.variable||"obj","_",a)}catch(o){throw o.source=a,o}var u=function(t){return s.call(this,t,v)},l=e.variable||"obj";return u.source="function("+l+"){\n"+a+"}",u},v.chain=function(t){var e=v(t);return e._chain=!0,e};var C=function(t){return this._chain?v(t).chain():t};v.mixin=function(t){v.each(v.functions(t),function(e){var n=v[e]=t[e];v.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),C.call(this,n.apply(v,t))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=r[t];v.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],C.call(this,n)}}),v.each(["concat","join","slice"],function(t){var e=r[t];v.prototype[t]=function(){return C.call(this,e.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}).call(this)},{}],35:[function(t,e){function n(t){this.cid=s.uniqueId("view"),t||(t={});var e=t.parent;delete t.parent,h.call(this,t,{init:!1,parent:e}),this.on("change:el",this._handleElementChange,this),this._parsedBindings=l(this.bindings,this),this._initializeBindings(),t.el&&!this.autoRender&&this._handleElementChange(),this._initializeSubviews(),this.template=t.template||this.template,this.initialize.apply(this,arguments),this.set(s.pick(t,f)),this.autoRender&&this.template&&this.render()}var i=t("ampersand-state"),r=t("ampersand-collection-view"),a=t("domify"),s=t("underscore"),o=t("events-mixin"),u=t("matches-selector"),l=t("ampersand-dom-bindings"),c=t("get-object-path"),h=i.extend({dataTypes:{element:{set:function(t){return{val:t,type:t instanceof Element?"element":typeof t}},compare:function(t,e){return t===e}},collection:{set:function(t){return{val:t,type:t&&t.isCollection?"collection":typeof t}},compare:function(t,e){return t===e}}},props:{model:"state",el:"element",collection:"collection"},derived:{rendered:{deps:["el"],fn:function(){return!!this.el}},hasData:{deps:["model"],fn:function(){return!!this.model}}}}),f=["model","collection","el"];n.prototype=Object.create(h.prototype),s.extend(n.prototype,{query:function(t){return t?"string"==typeof t?u(this.el,t)?this.el:this.el.querySelector(t)||void 0:t:this.el},queryAll:function(t){var e=[];return this.el?""===t?[this.el]:(u(this.el,t)&&e.push(this.el),e.concat(Array.prototype.slice.call(this.el.querySelectorAll(t)))):e},queryByHook:function(t){return this.query('[data-hook~="'+t+'"]')},initialize:function(){},render:function(){return this.renderWithTemplate(this),this},remove:function(){var t=this._parsedBindings;return this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),this._subviews&&s.chain(this._subviews).flatten().invoke("remove"),this.stopListening(),s.each(t,function(e,n){s.each(e,function(e,i){delete t[n][i]}),delete t[n]}),this.trigger("remove",this),this},_handleElementChange:function(){return this.eventManager&&this.eventManager.unbind(),this.eventManager=o(this.el,this),this.delegateEvents(),this._applyBindingsForKey(),this},delegateEvents:function(t){if(!t&&!(t=s.result(this,"events")))return this;this.undelegateEvents();for(var e in t)this.eventManager.bind(e,t[e]);return this},undelegateEvents:function(){return this.eventManager.unbind(),this},registerSubview:function(t){return this._subviews||(this._subviews=[]),this._subviews.push(t),t.el&&(t.parent=this),t},renderSubview:function(t,e){return"string"==typeof e&&(e=this.query(e)),this.registerSubview(t),t.render(),(e||this.el).appendChild(t.el),t},_applyBindingsForKey:function(t){if(this.el){var e,n=this._parsedBindings.getGrouped(t);for(e in n)n[e].forEach(function(t){t(this.el,c(this,e),s.last(e.split(".")))},this)}},_initializeBindings:function(){this.bindings&&this.on("all",function(t){"change:"===t.slice(0,7)&&this._applyBindingsForKey(t.split(":")[1])},this)},_initializeSubviews:function(){if(this.subviews)for(var t in this.subviews)this._parseSubview(this.subviews[t],t)},_parseSubview:function(t,e){function n(){var t,i;this.el&&(t=this.query(r.selector))&&(!r.waitFor||c(this,r.waitFor))&&(i=this[e]=r.prepareView.call(this,t),i.render(),this.registerSubview(i),this.off("change",n))}var i=this,r={selector:t.container||'[data-hook="'+t.hook+'"]',waitFor:t.waitFor||"",prepareView:t.prepareView||function(e){return new t.constructor({el:e,parent:i})}};this.on("change",n,this)},renderWithTemplate:function(t,e){var n=e||this.template;if(!n)throw new Error("Template string or function needed.");var i=s.isString(n)?n:n.call(this,t||this);s.isString(i)&&(i=a(i));var r=this.el&&this.el.parentNode;if(r&&r.replaceChild(i,this.el),"#document-fragment"===i.nodeName)throw new Error("Views can only have one root element.");return this.el=i,this},cacheElements:function(t){for(var e in t)this[e]=this.query(t[e])},listenToAndRun:function(t,e,n){var i=s.bind(n,this);this.listenTo(t,e,i),i()},animateRemove:function(){this.remove()},renderCollection:function(t,e,n,i){var a="string"==typeof n?this.query(n):n,o=s.extend({collection:t,el:a||this.el,view:e,parent:this,viewOptions:{parent:this}},i),u=new r(o);return u.render(),this.registerSubview(u)}}),n.extend=h.extend,e.exports=n},{"ampersand-collection-view":36,"ampersand-dom-bindings":41,"ampersand-state":44,domify:49,"events-mixin":50,"get-object-path":55,"matches-selector":56,underscore:57}],36:[function(t,e){function n(t){if(!t)throw new ReferenceError("Collection view missing required parameters: collection, el");if(!t.collection)throw new ReferenceError("Collection view requires a collection");if(!t.el&&!this.insertSelf)throw new ReferenceError("Collection view requires an el");i.extend(this,i.pick(t,s)),this.views=[],this.listenTo(this.collection,"add",this._addViewForModel),this.listenTo(this.collection,"remove",this._removeViewForModel),this.listenTo(this.collection,"sort",this._rerenderAll),this.listenTo(this.collection,"refresh reset",this._reset)}var i=t("underscore"),r=t("backbone-events-standalone"),a=t("ampersand-class-extend"),s=["collection","el","viewOptions","view","emptyView","filter","reverse","parent"];i.extend(n.prototype,r,{render:function(){return this._renderAll(),this},remove:function(){i.invoke(this.views,"remove"),this.stopListening()},_getViewByModel:function(t){return i.find(this.views,function(e){return t===e.model})},_createViewForModel:function(t,e){var n=new this.view(i({model:t,collection:this.collection}).extend(this.viewOptions));return this.views.push(n),n.parent=this,n.renderedByParentView=!0,n.render(e),n},_getOrCreateByModel:function(t,e){return this._getViewByModel(t)||this._createViewForModel(t,e)},_addViewForModel:function(t,e,n){var i=this.filter?this.filter(t):!0;if(i){this.renderedEmptyView&&this.renderedEmptyView.remove();var r=this._getOrCreateByModel(t,{containerEl:this.el});n&&n.rerender?this._insertView(r):this._insertViewAtIndex(r)}},_insertViewAtIndex:function(t){if(!t.insertSelf){var e,n,i=this.collection.indexOf(t.model);e=this.collection.at(this.reverse?i-1:i+1),n=this._getViewByModel(e),n?this.el.insertBefore(t.el,n&&n.el):this.el.appendChild(t.el)}},_insertView:function(t){t.insertSelf||(this.reverse&&this.el.firstChild?this.el.insertBefore(t.el,this.el.firstChild):this.el.appendChild(t.el))},_removeViewForModel:function(t){var e=this._getViewByModel(t);if(e){var n=this.views.indexOf(e);-1!==n&&(e=this.views.splice(n,1)[0],this._removeView(e),0===this.views.length&&this._renderEmptyView())}},_removeView:function(t){t.animateRemove?t.animateRemove():t.remove()},_renderAll:function(){this.collection.each(this._addViewForModel,this),0===this.views.length&&this._renderEmptyView()},_rerenderAll:function(t,e){e=e||{},this.collection.each(function(t){this._addViewForModel(t,this,i.extend(e,{rerender:!0}))},this)},_renderEmptyView:function(){if(this.emptyView){var t=this.renderedEmptyView=new this.emptyView;this.el.appendChild(t.render().el)}},_reset:function(){var t=this.collection.map(this._getOrCreateByModel,this),e=i.difference(this.views,t);e.forEach(this._removeView,this),this.views=t,this._rerenderAll(),0===this.views.length&&this._renderEmptyView()}}),n.extend=a,e.exports=n},{"ampersand-class-extend":37,"backbone-events-standalone":40,underscore:57}],37:[function(t,e){e.exports=t(24)},{"extend-object":38}],38:[function(t,e){e.exports=t(27)},{}],39:[function(t,e,n){!function(){function t(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++l+"";return t?t+e:e},has:function(t,e){return o.call(t,e)},each:function(t,e,n){if(null!=t)if(s&&t.forEach===s)t.forEach(e,n);
else if(t.length===+t.length){for(var i=0,r=t.length;r>i;i++)if(e.call(n,t[i],i,t)===a)return}else for(var o in t)if(this.has(t,o)&&e.call(n,t[o],o,t)===a)return},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var i,r=this,a={},s=Array.prototype.forEach,o=Object.prototype.hasOwnProperty,u=Array.prototype.slice,l=0,c=t();i={on:function(t,e,n){if(!f(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!f(this,"once",t,[e,n])||!e)return this;var i=this,r=c.once(function(){i.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var i,r,a,s,o,u,l,h;if(!this._events||!f(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:c.keys(this._events),o=0,u=s.length;u>o;o++)if(t=s[o],a=this._events[t]){if(this._events[t]=i=[],e||n)for(l=0,h=a.length;h>l;l++)r=a[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=u.call(arguments,1);if(!f(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&d(n,e),i&&d(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var a in i)i[a].off(e,n,this),r&&delete this._listeners[a];return this}};var h=/\s+/,f=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(h.test(n)){for(var a=n.split(h),s=0,o=a.length;o>s;s++)t[e].apply(t,[a[s]].concat(i));return!1}return!0},d=function(t,e){var n,i=-1,r=t.length,a=e[0],s=e[1],o=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,a);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,a,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,a,s,o);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}},p={listenTo:"on",listenToOnce:"once"};c.each(p,function(t,e){i[e]=function(e,n,i){var r=this._listeners||(this._listeners={}),a=e._listenerId||(e._listenerId=c.uniqueId("l"));return r[a]=e,"object"==typeof n&&(i=this),e[t](n,i,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return c.each(e,function(e){t[e]=this[e]},this),t},"function"==typeof define?define(function(){return i}):"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=i),n.BackboneEvents=i):r.BackboneEvents=i}(this)},{}],40:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{"./backbone-events-standalone":39}],41:[function(t,e){function n(t,e){if(""===e)return[t];var n=[];return o(t,e)&&n.push(t),n.concat(u.call(t.querySelectorAll(e)))}function i(t){return Array.isArray(t)?t:[t]}function r(t,e){var r,a=t.type||"text",o="function"==typeof a,u=function(){return"string"==typeof t.selector?t.selector:t.hook?'[data-hook~="'+t.hook+'"]':""}(),l=t.yes,c=t.no,h=!(!l&&!c);if(o)return function(t,i){n(t,u).forEach(function(t){a.call(e,t,i,r)}),r=i};if("text"===a)return function(t,e){n(t,u).forEach(function(t){s.text(t,e)})};if("class"===a)return function(t,e){n(t,u).forEach(function(t){s.switchClass(t,r,e)}),r=e};if("attribute"===a){if(!t.name)throw Error('attribute bindings must have a "name"');return function(e,a){var o=i(t.name);n(e,u).forEach(function(t){o.forEach(function(e){s.setAttribute(t,e,a)})}),r=a}}if("value"===a)return function(t,e){n(t,u).forEach(function(t){e||0===e||(e=""),document.activeElement!==t&&(t.value=e)}),r=e};if("booleanClass"===a)return h?(l=i(l||""),c=i(c||""),function(t,e){var i=e?c:l,r=e?l:c;n(t,u).forEach(function(t){i.forEach(function(e){s.removeClass(t,e)}),r.forEach(function(e){s.addClass(t,e)})})}):function(e,r,a){var o=i(t.name||a);n(e,u).forEach(function(t){o.forEach(function(e){s[r?"addClass":"removeClass"](t,e)})})};if("booleanAttribute"===a)return function(e,r,a){var o=i(t.name||a);n(e,u).forEach(function(t){o.forEach(function(e){s[r?"addAttribute":"removeAttribute"](t,e)})})};if("toggle"===a)return h?function(t,e){n(t,l).forEach(function(t){s[e?"show":"hide"](t)}),n(t,c).forEach(function(t){s[e?"hide":"show"](t)})}:function(t,e){n(t,u).forEach(function(t){s[e?"show":"hide"](t)})};if("switch"===a){if(!t.cases)throw Error('switch bindings must have "cases"');return function(e,i){for(var r in t.cases)n(e,t.cases[r]).forEach(function(t){s[i===r?"show":"hide"](t)})}}if("innerHTML"===a)return function(t,e){n(t,u).forEach(function(t){s.html(t,e)})};if("switchClass"===a){if(!t.cases)throw Error('switchClass bindings must have "cases"');return function(e,r,a){var o=i(t.name||a);for(var u in t.cases)n(e,t.cases[u]).forEach(function(t){o.forEach(function(e){s[r===u?"addClass":"removeClass"](t,e)})})}}throw new Error("no such binding type: "+a)}var a=t("key-tree-store"),s=t("ampersand-dom"),o=t("matches-selector");e.exports=function(t,e){var n,i,s=new a;for(n in t)i=t[n],"string"==typeof i?s.add(n,r({type:"text",selector:i})):i.forEach?i.forEach(function(t){s.add(n,r(t,e))}):s.add(n,r(i,e));return s};var u=Array.prototype.slice},{"ampersand-dom":42,"key-tree-store":43,"matches-selector":56}],42:[function(t,e){function n(t){return t||0===t?t:""}function i(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}function r(t,e){var n=t[e];return e in t&&(n===!0||n===!1)}function a(t){return"true"===l.getAttribute(t,"data-anddom-hidden")}function s(t){l.setAttribute(t,"data-anddom-display",t.style.display)}function o(t){t.style.display=l.getAttribute(t,"data-anddom-display")||"",l.removeAttribute(t,"data-anddom-hidden")}function u(t){l.setAttribute(t,"data-anddom-hidden","true"),t.style.display="none"}var l=e.exports={text:function(t,e){t.textContent=n(e)},addClass:function(t,e){e=n(e),e&&(Array.isArray(e)?e.forEach(function(e){l.addClass(t,e)}):t.classList?t.classList.add(e):i(t,e)||(t.classList?t.classList.add(e):t.className+=" "+e))},removeClass:function(t,e){Array.isArray(e)?e.forEach(function(e){l.removeClass(t,e)}):t.classList?(e=n(e),e&&t.classList.remove(e)):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},hasClass:i,switchClass:function(t,e,n){e&&this.removeClass(t,e),this.addClass(t,n)},addAttribute:function(t,e){t.setAttribute(e,""),r(t,e)&&(t[e]=!0)},removeAttribute:function(t,e){t.removeAttribute(e),r(t,e)&&(t[e]=!1)},setAttribute:function(t,e,i){t.setAttribute(e,n(i))},getAttribute:function(t,e){return t.getAttribute(e)},hide:function(t){a(t)||(s(t),u(t))},show:function(t){o(t)},html:function(t,e){t.innerHTML=e}}},{}],43:[function(t,e){function n(){this.storage={}}var i=Array.prototype.slice;n.prototype.add=function(t,e){var n=this.storage[t]||(this.storage[t]=[]);n.push(e)},n.prototype.remove=function(t){var e,n;for(e in this.storage)n=this.storage[e],n.some(function(e,i){return e===t?(n.splice(i,1),!0):void 0})},n.prototype.get=function(t){var e,n=[];for(e in this.storage)t&&t!==e&&0!==e.indexOf(t+".")||(n=n.concat(this.storage[e]));return n},n.prototype.getGrouped=function(t){var e,n={};for(e in this.storage)t&&t!==e&&0!==e.indexOf(t+".")||(n[e]=i.call(this.storage[e]));return n},n.prototype.getAll=function(t){var e,n={};for(e in this.storage)(t===e||0===e.indexOf(t+"."))&&(n[e]=i.call(this.storage[e]));return n},n.prototype.run=function(t,e){var n=i.call(arguments,2);this.get(t).forEach(function(t){t.apply(e||this,n)})},e.exports=n},{}],44:[function(t,e){function n(t,e){e||(e={}),this.cid||(this.cid=s.uniqueId("state")),this._events={},this._values={},this._definition=Object.create(this._definition),e.parse&&(t=this.parse(t,e)),this.parent=e.parent,this.collection=e.collection,this._keyTree=new u,this._initCollections(),this._initChildren(),this._cache={},this._previousAttributes={},t&&this.set(t,s.extend({silent:!0,initial:!0},e)),this._changed={},this._derived&&this._initDerived(),e.init!==!1&&this.initialize.apply(this,arguments)}function i(t,e,n,i){var r,a,o=t._definition[e]={};if(s.isString(n))r=t._ensureValidType(n),r&&(o.type=r);else{if(s.isArray(n)&&(a=n,n={type:a[0],required:a[1],"default":a[2]}),r=t._ensureValidType(n.type),r&&(o.type=r),n.required&&(o.required=!0),n["default"]&&"object"==typeof n["default"])throw new TypeError("The default value for "+e+" cannot be an object/array, must be a value or a function which returns a value/object/array");o["default"]=n["default"],o.allowNull=n.allowNull?n.allowNull:!1,n.setOnce&&(o.setOnce=!0),o.required&&s.isUndefined(o["default"])&&!o.setOnce&&(o["default"]=t._getDefaultForType(r)),o.test=n.test,o.values=n.values}return i&&(o.session=!0),Object.defineProperty(t,e,{set:function(t){this.set(e,t)},get:function(){var t=this._values[e],n=this._dataTypes[o.type];return"undefined"!=typeof t?(n&&n.get&&(t=n.get(t)),t):(t=s.result(o,"default"),this._values[e]=t,t)}}),o}function r(t,e,n){var i=t._derived[e]={fn:s.isFunction(n)?n:n.fn,cache:n.cache!==!1,depList:n.deps||[]};s.each(i.depList,function(n){t._deps[n]=s(t._deps[n]||[]).union([e])}),Object.defineProperty(t,e,{get:function(){return this._getDerivedProperty(e)},set:function(){throw new TypeError('"'+e+"\" is a derived property, it can't be set directly.")}})}function a(t){var e,n=this,a=[].slice.call(arguments);e=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return n.apply(this,arguments)},s.extend(e,n);var o=function(){this.constructor=e};o.prototype=n.prototype,e.prototype=new o,e.prototype._derived=s.extend({},n.prototype._derived),e.prototype._deps=s.extend({},n.prototype._deps),e.prototype._definition=s.extend({},n.prototype._definition),e.prototype._collections=s.extend({},n.prototype._collections),e.prototype._children=s.extend({},n.prototype._children),e.prototype._dataTypes=s.extend({},n.prototype._dataTypes||h),t&&a.forEach(function(t){var n=["dataTypes","props","session","derived","collections","children"];t.dataTypes&&s.each(t.dataTypes,function(t,n){e.prototype._dataTypes[n]=t}),t.props&&s.each(t.props,function(t,n){i(e.prototype,n,t)}),t.session&&s.each(t.session,function(t,n){i(e.prototype,n,t,!0)}),t.derived&&s.each(t.derived,function(t,n){r(e.prototype,n,t)}),t.collections&&s.each(t.collections,function(t,n){e.prototype._collections[n]=t}),t.children&&s.each(t.children,function(t,n){e.prototype._children[n]=t}),s.extend(e.prototype,s.omit(t,n))});Object.prototype.toString;return e.__super__=n.prototype,e}var s=t("underscore"),o=t("backbone-events-standalone"),u=t("key-tree-store"),l=t("array-next"),c=/^change:/;s.extend(n.prototype,o,{extraProperties:"ignore",idAttribute:"id",namespaceAttribute:"namespace",typeAttribute:"modelType",initialize:function(){return this},getId:function(){return this[this.idAttribute]},getNamespace:function(){return this[this.namespaceAttribute]},getType:function(){return this[this.typeAttribute]},isNew:function(){return null==this.getId()},escape:function(t){return s.escape(this.get(t))},isValid:function(t){return this._validate({},s.extend(t||{},{validate:!0}))},parse:function(t){return t},serialize:function(){var t=this.getAttributes({props:!0},!0);return s.each(this._children,function(e,n){t[n]=this[n].serialize()},this),s.each(this._collections,function(e,n){t[n]=this[n].serialize()},this),t},set:function(t,e,n){var i,r,a,o,u,l,c,h,f,d,p,v,m,g,y,_,b=this,w=this.extraProperties;if(s.isObject(t)||null===t?(f=t,n=e):(f={},f[t]=e),n=n||{},!this._validate(f,n))return!1;v=n.unset,p=n.silent,g=n.initial,r=[],i=this._changing,this._changing=!0,i||(this._previousAttributes=this.attributes,this._changed={});for(h in f){if(o=f[h],a=typeof o,m=this._values[h],u=this._definition[h],!u){if(this._children[h]||this._collections[h]){this[h].set(o,n);continue}if("ignore"===w)continue;if("reject"===w)throw new TypeError('No "'+h+'" property defined on '+(this.type||"this")+' model and extraProperties not set to "ignore" or "allow"');if("allow"===w)u=this._createPropertyDefinition(h,"any");else if(w)throw new TypeError('Invalid value for extraProperties: "'+w+'"')}if(_=this._getCompareForType(u.type),d=this._dataTypes[u.type],d&&d.set&&(l=d.set(o),o=l.val,a=l.type),u.test&&(c=u.test.call(this,o,a)))throw new TypeError("Property '"+h+"' failed validation with error: "+c);if(s.isUndefined(o)&&u.required)throw new TypeError("Required property '"+h+"' must be of type "+u.type+". Tried to set "+o);if(s.isNull(o)&&u.required&&!u.allowNull)throw new TypeError("Property '"+h+"' must be of type "+u.type+" (cannot be null). Tried to set "+o);if(u.type&&"any"!==u.type&&u.type!==a&&!s.isNull(o)&&!s.isUndefined(o))throw new TypeError("Property '"+h+"' must be of type "+u.type+". Tried to set "+o);if(u.values&&!s.contains(u.values,o))throw new TypeError("Property '"+h+"' must be one of values: "+u.values.join(", ")+". Tried to set "+o);if(y=!_(m,o,h),u.setOnce&&void 0!==m&&y&&!g)throw new TypeError("Property '"+h+"' can only be set once.");y?(r.push({prev:m,val:o,key:h}),b._changed[h]=o):delete b._changed[h]}if(s.each(r,function(t){b._previousAttributes[t.key]=t.prev,v?delete b._values[t.key]:b._values[t.key]=t.val}),!p&&r.length&&(b._pending=!0),p||s.each(r,function(t){b.trigger("change:"+t.key,b,t.val,n)}),i)return this;if(!p)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},get:function(t){return this[t]},toggle:function(t){var e=this._definition[t];if("boolean"===e.type)this[t]=!this[t];else{if(!e||!e.values)throw new TypeError("Can only toggle properties that are type `boolean` or have `values` array.");this[t]=l(e.values,this[t])}return this},previousAttributes:function(){return s.clone(this._previousAttributes)},hasChanged:function(t){return null==t?!s.isEmpty(this._changed):s.has(this._changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?s.clone(this._changed):!1;var e,n,i,r=!1,a=this._changing?this._previousAttributes:this.attributes;for(var o in t)n=this._definition[o],n&&(i=this._getCompareForType(n.type),i(a[o],e=t[o])||((r||(r={}))[o]=e));return r},toJSON:function(){return this.serialize()},unset:function(t,e){{var n,i=this._definition[t];i.type}return i.required?(n=s.result(i,"default"),this.set(t,n,e)):this.set(t,n,s.extend({},e,{unset:!0}))},clear:function(t){var e=this;return s.each(s.keys(this.attributes),function(n){e.unset(n,t)}),this},previous:function(t){return null!=t&&Object.keys(this._previousAttributes).length?this._previousAttributes[t]:null},_getDefaultForType:function(t){var e=this._dataTypes[t];return e&&e["default"]},_getCompareForType:function(t){var e=this._dataTypes[t];return e&&e.compare?s.bind(e.compare,this):s.isEqual},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=s.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,s.extend(e||{},{validationError:n})),!1):!0},_createPropertyDefinition:function(t,e,n){return i(this,t,e,n)},_ensureValidType:function(t){return s.contains(["string","number","boolean","array","object","date","any"].concat(s.keys(this._dataTypes)),t)?t:void 0},getAttributes:function(t,e){t||(t={}),s.defaults(t,{session:!1,props:!1,derived:!1});var n,i,r,a={};for(i in this._definition)r=this._definition[i],(t.session&&r.session||t.props&&!r.session)&&(n=e?this._values[i]:this[i],"undefined"==typeof n&&(n=s.result(r,"default")),"undefined"!=typeof n&&(a[i]=n));if(t.derived)for(i in this._derived)a[i]=this[i];return a},_initDerived:function(){var t=this;s.each(this._derived,function(e,n){var i=t._derived[n];i.deps=i.depList;var r=function(e){e=e||{};var r=i.fn.call(t);t._cache[n]===r&&i.cache||(i.cache&&(t._previousAttributes[n]=t._cache[n]),t._cache[n]=r,t.trigger("change:"+n,t,t._cache[n]))};i.deps.forEach(function(e){t._keyTree.add(e,r)})}),this.on("all",function(e){c.test(e)&&t._keyTree.get(e.split(":")[1]).forEach(function(t){t()})},this)},_getDerivedProperty:function(t,e){return this._derived[t].cache?((e||!this._cache.hasOwnProperty(t))&&(this._cache[t]=this._derived[t].fn.apply(this)),this._cache[t]):this._derived[t].fn.apply(this)},_initCollections:function(){var t;if(this._collections)for(t in this._collections)this[t]=new this._collections[t](null,{parent:this})},_initChildren:function(){var t;if(this._children)for(t in this._children)this[t]=new this._children[t]({},{parent:this}),this.listenTo(this[t],"all",this._getEventBubblingHandler(t))},_getEventBubblingHandler:function(t){return s.bind(function(e,n,i){c.test(e)?this.trigger("change:"+t+"."+e.split(":")[1],n,i):"change"===e&&this.trigger("change",this)},this)},_verifyRequired:function(){var t=this.attributes;for(var e in this._definition)if(this._definition[e].required&&"undefined"==typeof t[e])return!1;return!0}}),Object.defineProperties(n.prototype,{attributes:{get:function(){return this.getAttributes({props:!0,session:!0})}},all:{get:function(){return this.getAttributes({session:!0,props:!0,derived:!0})}},isState:{get:function(){return!0},set:function(){}}});var h={string:{"default":function(){return""}},date:{set:function(t){var e;if(s.isDate(t))e="date",t=t.valueOf();else try{var n=new Date(t).valueOf();if(isNaN(n)&&(n=new Date(parseInt(t,10)).valueOf(),isNaN(n)))throw TypeError;t=n,e="date"}catch(i){e=typeof t}return{val:t,type:e}},get:function(t){return new Date(t)},"default":function(){return new Date}},array:{set:function(t){return{val:t,type:s.isArray(t)?"array":typeof t}},"default":function(){return[]}},object:{set:function(t){var e=typeof t;return"object"!==e&&s.isUndefined(t)&&(t=null,e="object"),{val:t,type:e}},"default":function(){return{}}},state:{set:function(t){var e=t instanceof n||t&&t.isState;return e?{val:t,type:"state"}:{val:t,type:typeof t}},compare:function(t,e,n){var i=t===e;return i||(t&&this.stopListening(t),null!=e&&this.listenTo(e,"all",this._getEventBubblingHandler(n))),i}}};n.extend=a,e.exports=n},{"array-next":45,"backbone-events-standalone":47,"key-tree-store":48,underscore:57}],45:[function(t,e){e.exports=t(30)},{}],46:[function(t,e){e.exports=t(25)},{}],47:[function(t,e){e.exports=t(26)},{"./backbone-events-standalone":46}],48:[function(t,e){e.exports=t(33)},{}],49:[function(t,e){function n(t,e){if("string"!=typeof t)throw new TypeError("String expected");e||(e=document);var n=/<([\w:]+)/.exec(t);if(!n)return e.createTextNode(t);t=t.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i){var r=e.createElement("html");return r.innerHTML=t,r.removeChild(r.lastChild)}var s=a[i]||a._default,o=s[0],u=s[1],l=s[2],r=e.createElement("div");for(r.innerHTML=u+t+l;o--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);for(var c=e.createDocumentFragment();r.firstChild;)c.appendChild(r.removeChild(r.firstChild));return c}e.exports=n;var i=document.createElement("div");i.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';var r=!i.getElementsByTagName("link").length;i=void 0;var a={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:r?[1,"X<div>","</div>"]:[0,"",""]};a.td=a.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],a.option=a.optgroup=[1,'<select multiple="multiple">',"</select>"],a.thead=a.tbody=a.colgroup=a.caption=a.tfoot=[1,"<table>","</table>"],a.text=a.circle=a.ellipse=a.line=a.path=a.polygon=a.polyline=a.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],50:[function(t,e){function n(t,e){if(!(this instanceof n))return new n(t,e);if(!t)throw new Error("element required");if(!e)throw new Error("object required");this.el=t,this.obj=e,this._events={}}function i(t){var e=t.split(/ +/);return{name:e.shift(),selector:e.join(" ")}}var r=t("component-event"),a=t("delegate-events"),s=["focus","blur"];e.exports=n,n.prototype.sub=function(t,e,n){this._events[t]=this._events[t]||{},this._events[t][e]=n},n.prototype.bind=function(t,e){function n(){var t=[].slice.call(arguments).concat(c);u[e].apply(u,t)}var s=i(t),o=this.el,u=this.obj,l=s.name,e=e||"on"+l,c=[].slice.call(arguments,2);return s.selector?n=a.bind(o,s.selector,l,n):r.bind(o,l,n),this.sub(l,e,n),n},n.prototype.unbind=function(t,e){if(0==arguments.length)return this.unbindAll();if(1==arguments.length)return this.unbindAllOf(t);var n=this._events[t],i=-1!==s.indexOf(t);if(n){var a=n[e];a&&r.unbind(this.el,t,a,i)}},n.prototype.unbindAll=function(){for(var t in this._events)this.unbindAllOf(t)},n.prototype.unbindAllOf=function(t){var e=this._events[t];if(e)for(var n in e)this.unbind(t,n)}},{"component-event":51,"delegate-events":52}],51:[function(t,e,n){var i=window.addEventListener?"addEventListener":"attachEvent",r=window.removeEventListener?"removeEventListener":"detachEvent",a="addEventListener"!==i?"on":"";n.bind=function(t,e,n,r){return t[i](a+e,n,r||!1),n},n.unbind=function(t,e,n,i){return t[r](a+e,n,i||!1),n}},{}],52:[function(t,e,n){var i=t("closest"),r=t("event"),a=["focus","blur"];n.bind=function(t,e,n,s,o){return-1!==a.indexOf(n)&&(o=!0),r.bind(t,n,function(n){var r=n.target||n.srcElement;n.delegateTarget=i(r,e,!0,t),n.delegateTarget&&s.call(t,n)},o)},n.unbind=function(t,e,n,i){-1!==a.indexOf(e)&&(i=!0),r.unbind(t,e,n,i)}},{closest:53,event:51}],53:[function(t,e){var n=t("matches-selector");e.exports=function(t,e,i){for(var r=i?t:t.parentNode;r&&r!==document;){if(n(r,e))return r;r=r.parentNode}}},{"matches-selector":54}],54:[function(t,e){function n(t,e){if(r)return r.call(t,e);for(var n=t.parentNode.querySelectorAll(e),i=0;i<n.length;++i)if(n[i]==t)return!0;return!1}var i=Element.prototype,r=i.matchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector;e.exports=n},{}],55:[function(t,e){function n(t,e){if(-1==e.indexOf(".")&&-1==e.indexOf("["))return t[e];for(var n,i=e.split(/\.|\[|\]/g),r=-1,a=i.length;++r<a;)if(0==r&&(n=t),i[r]){if(void 0==n)break;n=n[i[r]]}return n}e.exports=n},{}],56:[function(t,e){"use strict";function n(t,e){if(r)return r.call(t,e);for(var n=t.parentNode.querySelectorAll(e),i=0;i<n.length;i++)if(n[i]==t)return!0;return!1}var i=Element.prototype,r=i.matches||i.matchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector;e.exports=n},{}],57:[function(t,e,n){(function(){var t=this,i=t._,r={},a=Array.prototype,s=Object.prototype,o=Function.prototype,u=a.push,l=a.slice,c=a.concat,h=s.toString,f=s.hasOwnProperty,d=a.forEach,p=a.map,v=a.reduce,m=a.reduceRight,g=a.filter,y=a.every,_=a.some,b=a.indexOf,w=a.lastIndexOf,x=Array.isArray,E=Object.keys,T=o.bind,A=function(t){return t instanceof A?t:this instanceof A?void(this._wrapped=t):new A(t)};"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=A),n._=A):t._=A,A.VERSION="1.6.0";var k=A.each=A.forEach=function(t,e,n){if(null==t)return t;if(d&&t.forEach===d)t.forEach(e,n);else if(t.length===+t.length){for(var i=0,a=t.length;a>i;i++)if(e.call(n,t[i],i,t)===r)return}else for(var s=A.keys(t),i=0,a=s.length;a>i;i++)if(e.call(n,t[s[i]],s[i],t)===r)return;return t};A.map=A.collect=function(t,e,n){var i=[];return null==t?i:p&&t.map===p?t.map(e,n):(k(t,function(t,r,a){i.push(e.call(n,t,r,a))}),i)};var S="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),v&&t.reduce===v)return i&&(e=A.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(k(t,function(t,a,s){r?n=e.call(i,n,t,a,s):(n=t,r=!0)}),!r)throw new TypeError(S);return n},A.reduceRight=A.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),m&&t.reduceRight===m)return i&&(e=A.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var a=t.length;if(a!==+a){var s=A.keys(t);a=s.length}if(k(t,function(o,u,l){u=s?s[--a]:--a,r?n=e.call(i,n,t[u],u,l):(n=t[u],r=!0)}),!r)throw new TypeError(S);return n},A.find=A.detect=function(t,e,n){var i;return O(t,function(t,r,a){return e.call(n,t,r,a)?(i=t,!0):void 0}),i},A.filter=A.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(k(t,function(t,r,a){e.call(n,t,r,a)&&i.push(t)}),i)},A.reject=function(t,e,n){return A.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},A.every=A.all=function(t,e,n){e||(e=A.identity);var i=!0;return null==t?i:y&&t.every===y?t.every(e,n):(k(t,function(t,a,s){return(i=i&&e.call(n,t,a,s))?void 0:r}),!!i)};var O=A.some=A.any=function(t,e,n){e||(e=A.identity);var i=!1;return null==t?i:_&&t.some===_?t.some(e,n):(k(t,function(t,a,s){return i||(i=e.call(n,t,a,s))?r:void 0}),!!i)};A.contains=A.include=function(t,e){return null==t?!1:b&&t.indexOf===b?-1!=t.indexOf(e):O(t,function(t){return t===e})},A.invoke=function(t,e){var n=l.call(arguments,2),i=A.isFunction(e);return A.map(t,function(t){return(i?e:t[e]).apply(t,n)})},A.pluck=function(t,e){return A.map(t,A.property(e))},A.where=function(t,e){return A.filter(t,A.matches(e))},A.findWhere=function(t,e){return A.find(t,A.matches(e))},A.max=function(t,e,n){if(!e&&A.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var i=-1/0,r=-1/0;return k(t,function(t,a,s){var o=e?e.call(n,t,a,s):t;o>r&&(i=t,r=o)}),i},A.min=function(t,e,n){if(!e&&A.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var i=1/0,r=1/0;return k(t,function(t,a,s){var o=e?e.call(n,t,a,s):t;r>o&&(i=t,r=o)}),i},A.shuffle=function(t){var e,n=0,i=[];return k(t,function(t){e=A.random(n++),i[n-1]=i[e],i[e]=t}),i},A.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=A.values(t)),t[A.random(t.length-1)]):A.shuffle(t).slice(0,Math.max(0,e))};var I=function(t){return null==t?A.identity:A.isFunction(t)?t:A.property(t)};A.sortBy=function(t,e,n){return e=I(e),A.pluck(A.map(t,function(t,i,r){return{value:t,index:i,criteria:e.call(n,t,i,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var C=function(t){return function(e,n,i){var r={};return n=I(n),k(e,function(a,s){var o=n.call(i,a,s,e);t(r,o,a)}),r}};A.groupBy=C(function(t,e,n){A.has(t,e)?t[e].push(n):t[e]=[n]}),A.indexBy=C(function(t,e,n){t[e]=n}),A.countBy=C(function(t,e){A.has(t,e)?t[e]++:t[e]=1}),A.sortedIndex=function(t,e,n,i){n=I(n);for(var r=n.call(i,e),a=0,s=t.length;s>a;){var o=a+s>>>1;n.call(i,t[o])<r?a=o+1:s=o}return a},A.toArray=function(t){return t?A.isArray(t)?l.call(t):t.length===+t.length?A.map(t,A.identity):A.values(t):[]},A.size=function(t){return null==t?0:t.length===+t.length?t.length:A.keys(t).length},A.first=A.head=A.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:l.call(t,0,e)},A.initial=function(t,e,n){return l.call(t,0,t.length-(null==e||n?1:e))},A.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:l.call(t,Math.max(t.length-e,0))},A.rest=A.tail=A.drop=function(t,e,n){return l.call(t,null==e||n?1:e)},A.compact=function(t){return A.filter(t,A.identity)};var j=function(t,e,n){return e&&A.every(t,A.isArray)?c.apply(n,t):(k(t,function(t){A.isArray(t)||A.isArguments(t)?e?u.apply(n,t):j(t,e,n):n.push(t)}),n)};A.flatten=function(t,e){return j(t,e,[])},A.without=function(t){return A.difference(t,l.call(arguments,1))},A.partition=function(t,e){var n=[],i=[];return k(t,function(t){(e(t)?n:i).push(t)}),[n,i]},A.uniq=A.unique=function(t,e,n,i){A.isFunction(e)&&(i=n,n=e,e=!1);var r=n?A.map(t,n,i):t,a=[],s=[];return k(r,function(n,i){(e?i&&s[s.length-1]===n:A.contains(s,n))||(s.push(n),a.push(t[i]))}),a},A.union=function(){return A.uniq(A.flatten(arguments,!0))},A.intersection=function(t){var e=l.call(arguments,1);return A.filter(A.uniq(t),function(t){return A.every(e,function(e){return A.contains(e,t)})})},A.difference=function(t){var e=c.apply(a,l.call(arguments,1));return A.filter(t,function(t){return!A.contains(e,t)})},A.zip=function(){for(var t=A.max(A.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=A.pluck(arguments,""+n);return e},A.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},A.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=A.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(b&&t.indexOf===b)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},A.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(w&&t.lastIndexOf===w)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},A.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,a=new Array(i);i>r;)a[r++]=t,t+=n;return a};var M=function(){};A.bind=function(t,e){var n,i;if(T&&t.bind===T)return T.apply(t,l.call(arguments,1));if(!A.isFunction(t))throw new TypeError;return n=l.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(l.call(arguments)));M.prototype=t.prototype;var r=new M;M.prototype=null;var a=t.apply(r,n.concat(l.call(arguments)));return Object(a)===a?a:r}},A.partial=function(t){var e=l.call(arguments,1);return function(){for(var n=0,i=e.slice(),r=0,a=i.length;a>r;r++)i[r]===A&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},A.bindAll=function(t){var e=l.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return k(e,function(e){t[e]=A.bind(t[e],t)}),t},A.memoize=function(t,e){var n={};return e||(e=A.identity),function(){var i=e.apply(this,arguments);return A.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},A.delay=function(t,e){var n=l.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},A.defer=function(t){return A.delay.apply(A,[t,1].concat(l.call(arguments,1)))},A.throttle=function(t,e,n){var i,r,a,s=null,o=0;n||(n={});var u=function(){o=n.leading===!1?0:A.now(),s=null,a=t.apply(i,r),i=r=null};return function(){var l=A.now();o||n.leading!==!1||(o=l);var c=e-(l-o);return i=this,r=arguments,0>=c?(clearTimeout(s),s=null,o=l,a=t.apply(i,r),i=r=null):s||n.trailing===!1||(s=setTimeout(u,c)),a}},A.debounce=function(t,e,n){var i,r,a,s,o,u=function(){var l=A.now()-s;e>l?i=setTimeout(u,e-l):(i=null,n||(o=t.apply(a,r),a=r=null))};return function(){a=this,r=arguments,s=A.now();var l=n&&!i;return i||(i=setTimeout(u,e)),l&&(o=t.apply(a,r),a=r=null),o}},A.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},A.wrap=function(t,e){return A.partial(e,t)},A.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},A.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},A.keys=function(t){if(!A.isObject(t))return[];if(E)return E(t);var e=[];for(var n in t)A.has(t,n)&&e.push(n);return e},A.values=function(t){for(var e=A.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},A.pairs=function(t){for(var e=A.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},A.invert=function(t){for(var e={},n=A.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},A.functions=A.methods=function(t){var e=[];for(var n in t)A.isFunction(t[n])&&e.push(n);return e.sort()},A.extend=function(t){return k(l.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},A.pick=function(t){var e={},n=c.apply(a,l.call(arguments,1));return k(n,function(n){n in t&&(e[n]=t[n])}),e},A.omit=function(t){var e={},n=c.apply(a,l.call(arguments,1));for(var i in t)A.contains(n,i)||(e[i]=t[i]);return e},A.defaults=function(t){return k(l.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},A.clone=function(t){return A.isObject(t)?A.isArray(t)?t.slice():A.extend({},t):t},A.tap=function(t,e){return e(t),t
};var N=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof A&&(t=t._wrapped),e instanceof A&&(e=e._wrapped);var r=h.call(t);if(r!=h.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var a=n.length;a--;)if(n[a]==t)return i[a]==e;var s=t.constructor,o=e.constructor;if(s!==o&&!(A.isFunction(s)&&s instanceof s&&A.isFunction(o)&&o instanceof o)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),i.push(e);var u=0,l=!0;if("[object Array]"==r){if(u=t.length,l=u==e.length)for(;u--&&(l=N(t[u],e[u],n,i)););}else{for(var c in t)if(A.has(t,c)&&(u++,!(l=A.has(e,c)&&N(t[c],e[c],n,i))))break;if(l){for(c in e)if(A.has(e,c)&&!u--)break;l=!u}}return n.pop(),i.pop(),l};A.isEqual=function(t,e){return N(t,e,[],[])},A.isEmpty=function(t){if(null==t)return!0;if(A.isArray(t)||A.isString(t))return 0===t.length;for(var e in t)if(A.has(t,e))return!1;return!0},A.isElement=function(t){return!(!t||1!==t.nodeType)},A.isArray=x||function(t){return"[object Array]"==h.call(t)},A.isObject=function(t){return t===Object(t)},k(["Arguments","Function","String","Number","Date","RegExp"],function(t){A["is"+t]=function(e){return h.call(e)=="[object "+t+"]"}}),A.isArguments(arguments)||(A.isArguments=function(t){return!(!t||!A.has(t,"callee"))}),"function"!=typeof/./&&(A.isFunction=function(t){return"function"==typeof t}),A.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},A.isNaN=function(t){return A.isNumber(t)&&t!=+t},A.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==h.call(t)},A.isNull=function(t){return null===t},A.isUndefined=function(t){return void 0===t},A.has=function(t,e){return f.call(t,e)},A.noConflict=function(){return t._=i,this},A.identity=function(t){return t},A.constant=function(t){return function(){return t}},A.property=function(t){return function(e){return e[t]}},A.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},A.times=function(t,e,n){for(var i=Array(Math.max(0,t)),r=0;t>r;r++)i[r]=e.call(n,r);return i},A.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},A.now=Date.now||function(){return(new Date).getTime()};var q={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};q.unescape=A.invert(q.escape);var D={escape:new RegExp("["+A.keys(q.escape).join("")+"]","g"),unescape:new RegExp("("+A.keys(q.unescape).join("|")+")","g")};A.each(["escape","unescape"],function(t){A[t]=function(e){return null==e?"":(""+e).replace(D[t],function(e){return q[t][e]})}}),A.result=function(t,e){if(null==t)return void 0;var n=t[e];return A.isFunction(n)?n.call(t):n},A.mixin=function(t){k(A.functions(t),function(e){var n=A[e]=t[e];A.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),P.call(this,n.apply(A,t))}})};var F=0;A.uniqueId=function(t){var e=++F+"";return t?t+e:e},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var V=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(t,e,n){var i;n=A.defaults({},n,A.templateSettings);var r=new RegExp([(n.escape||V).source,(n.interpolate||V).source,(n.evaluate||V).source].join("|")+"|$","g"),a=0,s="__p+='";t.replace(r,function(e,n,i,r,o){return s+=t.slice(a,o).replace(z,function(t){return"\\"+R[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),a=o+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(n.variable||"obj","_",s)}catch(o){throw o.source=s,o}if(e)return i(e,A);var u=function(t){return i.call(this,t,A)};return u.source="function("+(n.variable||"obj")+"){\n"+s+"}",u},A.chain=function(t){return A(t).chain()};var P=function(t){return this._chain?A(t).chain():t};A.mixin(A),k(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=a[t];A.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],P.call(this,n)}}),k(["concat","join","slice"],function(t){var e=a[t];A.prototype[t]=function(){return P.call(this,e.apply(this._wrapped,arguments))}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return A})}).call(this)},{}],58:[function(t,e){!function(t,n){"undefined"!=typeof e?e.exports=n():"function"==typeof define&&"object"==typeof define.amd?define(n):this[t]=n()}("domready",function(){var t,e=[],n=document,i=n.documentElement.doScroll,r="DOMContentLoaded",a=(i?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return a||n.addEventListener(r,t=function(){for(n.removeEventListener(r,t),a=1;t=e.shift();)t()}),function(t){a?t():e.push(t)}})},{}],59:[function(t,e){!function(t,n,i,r){"use strict";function a(t,e,n){return setTimeout(h(t,n),e)}function s(t,e,n){return Array.isArray(t)?(o(t,n[e],n),!0):!1}function o(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==r)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function u(t,e,n){for(var i=Object.keys(e),a=0;a<i.length;)(!n||n&&t[i[a]]===r)&&(t[i[a]]=e[i[a]]),a++;return t}function l(t,e){return u(t,e,!0)}function c(t,e,n){var i,r=e.prototype;i=t.prototype=Object.create(r),i.constructor=t,i._super=r,n&&u(i,n)}function h(t,e){return function(){return t.apply(e,arguments)}}function f(t,e){return typeof t==he?t.apply(e?e[0]||r:r,e):t}function d(t,e){return t===r?e:t}function p(t,e,n){o(y(e),function(e){t.addEventListener(e,n,!1)})}function v(t,e,n){o(y(e),function(e){t.removeEventListener(e,n,!1)})}function m(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function g(t,e){return t.indexOf(e)>-1}function y(t){return t.trim().split(/\s+/g)}function _(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function b(t){return Array.prototype.slice.call(t,0)}function w(t,e,n){for(var i=[],r=[],a=0;a<t.length;){var s=e?t[a][e]:t[a];_(r,s)<0&&i.push(t[a]),r[a]=s,a++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function x(t,e){for(var n,i,a=e[0].toUpperCase()+e.slice(1),s=0;s<le.length;){if(n=le[s],i=n?n+a:e,i in t)return i;s++}return r}function E(){return ve++}function T(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}function A(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){f(t.options.enable,[t])&&n.handler(e)},this.init()}function k(t){var e,n=t.options.inputClass;return new(e=n?n:ye?P:_e?H:ge?X:z)(t,S)}function S(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,a=e&Ae&&i-r===0,s=e&(Se|Oe)&&i-r===0;n.isFirst=!!a,n.isFinal=!!s,a&&(t.session={}),n.eventType=e,O(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function O(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=j(e)),r>1&&!n.firstMultiple?n.firstMultiple=j(e):1===r&&(n.firstMultiple=!1);var a=n.firstInput,s=n.firstMultiple,o=s?s.center:a.center,u=e.center=M(i);e.timeStamp=pe(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=F(o,u),e.distance=D(o,u),I(n,e),e.offsetDirection=q(e.deltaX,e.deltaY),e.scale=s?R(s.pointers,i):1,e.rotation=s?V(s.pointers,i):0,C(n,e);var l=t.element;m(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}function I(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},a=t.prevInput||{};(e.eventType===Ae||a.eventType===Se)&&(r=t.prevDelta={x:a.deltaX||0,y:a.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}function C(t,e){var n,i,a,s,o=t.lastInterval||e,u=e.timeStamp-o.timeStamp;if(e.eventType!=Oe&&(u>Te||o.velocity===r)){var l=o.deltaX-e.deltaX,c=o.deltaY-e.deltaY,h=N(u,l,c);i=h.x,a=h.y,n=de(h.x)>de(h.y)?h.x:h.y,s=q(l,c),t.lastInterval=e}else n=o.velocity,i=o.velocityX,a=o.velocityY,s=o.direction;e.velocity=n,e.velocityX=i,e.velocityY=a,e.direction=s}function j(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:fe(t.pointers[n].clientX),clientY:fe(t.pointers[n].clientY)},n++;return{timeStamp:pe(),pointers:e,center:M(e),deltaX:t.deltaX,deltaY:t.deltaY}}function M(t){var e=t.length;if(1===e)return{x:fe(t[0].clientX),y:fe(t[0].clientY)};for(var n=0,i=0,r=0;e>r;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:fe(n/e),y:fe(i/e)}}function N(t,e,n){return{x:e/t||0,y:n/t||0}}function q(t,e){return t===e?Ie:de(t)>=de(e)?t>0?Ce:je:e>0?Me:Ne}function D(t,e,n){n||(n=Ve);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function F(t,e,n){n||(n=Ve);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}function V(t,e){return F(e[1],e[0],Re)-F(t[1],t[0],Re)}function R(t,e){return D(e[0],e[1],Re)/D(t[0],t[1],Re)}function z(){this.evEl=Pe,this.evWin=Le,this.allow=!0,this.pressed=!1,A.apply(this,arguments)}function P(){this.evEl=We,this.evWin=Xe,A.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function L(){this.evTarget=Ue,this.evWin=Ge,this.started=!1,A.apply(this,arguments)}function B(t,e){var n=b(t.touches),i=b(t.changedTouches);return e&(Se|Oe)&&(n=w(n.concat(i),"identifier",!0)),[n,i]}function H(){this.evTarget=$e,this.targetIds={},A.apply(this,arguments)}function W(t,e){var n=b(t.touches),i=this.targetIds;if(e&(Ae|ke)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,a,s=b(t.changedTouches),o=[],u=this.target;if(a=n.filter(function(t){return m(t.target,u)}),e===Ae)for(r=0;r<a.length;)i[a[r].identifier]=!0,r++;for(r=0;r<s.length;)i[s[r].identifier]&&o.push(s[r]),e&(Se|Oe)&&delete i[s[r].identifier],r++;return o.length?[w(a.concat(o),"identifier",!0),o]:void 0}function X(){A.apply(this,arguments);var t=h(this.handler,this);this.touch=new H(this.manager,t),this.mouse=new z(this.manager,t)}function Y(t,e){this.manager=t,this.set(e)}function U(t){if(g(t,nn))return nn;var e=g(t,rn),n=g(t,an);return e&&n?rn+" "+an:e||n?e?rn:an:g(t,en)?en:tn}function G(t){this.id=E(),this.manager=null,this.options=l(t||{},this.defaults),this.options.enable=d(this.options.enable,!0),this.state=sn,this.simultaneous={},this.requireFail=[]}function J(t){return t&hn?"cancel":t&ln?"end":t&un?"move":t&on?"start":""}function $(t){return t==Ne?"down":t==Me?"up":t==Ce?"left":t==je?"right":""}function K(t,e){var n=e.manager;return n?n.get(t):t}function Z(){G.apply(this,arguments)}function Q(){Z.apply(this,arguments),this.pX=null,this.pY=null}function te(){Z.apply(this,arguments)}function ee(){G.apply(this,arguments),this._timer=null,this._input=null}function ne(){Z.apply(this,arguments)}function ie(){Z.apply(this,arguments)}function re(){G.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ae(t,e){return e=e||{},e.recognizers=d(e.recognizers,ae.defaults.preset),new se(t,e)}function se(t,e){e=e||{},this.options=l(e,ae.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=k(this),this.touchAction=new Y(this,this.options.touchAction),oe(this,!0),o(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function oe(t,e){var n=t.element;o(t.options.cssProps,function(t,i){n.style[x(n.style,i)]=e?t:""})}function ue(t,e){var i=n.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}var le=["","webkit","moz","MS","ms","o"],ce=n.createElement("div"),he="function",fe=Math.round,de=Math.abs,pe=Date.now,ve=1,me=/mobile|tablet|ip(ad|hone|od)|android/i,ge="ontouchstart"in t,ye=x(t,"PointerEvent")!==r,_e=ge&&me.test(navigator.userAgent),be="touch",we="pen",xe="mouse",Ee="kinect",Te=25,Ae=1,ke=2,Se=4,Oe=8,Ie=1,Ce=2,je=4,Me=8,Ne=16,qe=Ce|je,De=Me|Ne,Fe=qe|De,Ve=["x","y"],Re=["clientX","clientY"];A.prototype={handler:function(){},init:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(T(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(T(this.element),this.evWin,this.domHandler)}};var ze={mousedown:Ae,mousemove:ke,mouseup:Se},Pe="mousedown",Le="mousemove mouseup";c(z,A,{handler:function(t){var e=ze[t.type];e&Ae&&0===t.button&&(this.pressed=!0),e&ke&&1!==t.which&&(e=Se),this.pressed&&this.allow&&(e&Se&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:xe,srcEvent:t}))}});var Be={pointerdown:Ae,pointermove:ke,pointerup:Se,pointercancel:Oe,pointerout:Oe},He={2:be,3:we,4:xe,5:Ee},We="pointerdown",Xe="pointermove pointerup pointercancel";t.MSPointerEvent&&(We="MSPointerDown",Xe="MSPointerMove MSPointerUp MSPointerCancel"),c(P,A,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=Be[i],a=He[t.pointerType]||t.pointerType,s=a==be,o=_(e,t.pointerId,"pointerId");r&Ae&&(0===t.button||s)?0>o&&(e.push(t),o=e.length-1):r&(Se|Oe)&&(n=!0),0>o||(e[o]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:a,srcEvent:t}),n&&e.splice(o,1))}});var Ye={touchstart:Ae,touchmove:ke,touchend:Se,touchcancel:Oe},Ue="touchstart",Ge="touchstart touchmove touchend touchcancel";c(L,A,{handler:function(t){var e=Ye[t.type];if(e===Ae&&(this.started=!0),this.started){var n=B.call(this,t,e);e&(Se|Oe)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:be,srcEvent:t})}}});var Je={touchstart:Ae,touchmove:ke,touchend:Se,touchcancel:Oe},$e="touchstart touchmove touchend touchcancel";c(H,A,{handler:function(t){var e=Je[t.type],n=W.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:be,srcEvent:t})}}),c(X,A,{handler:function(t,e,n){var i=n.pointerType==be,r=n.pointerType==xe;if(i)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;e&(Se|Oe)&&(this.mouse.allow=!0),this.callback(t,e,n)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ke=x(ce.style,"touchAction"),Ze=Ke!==r,Qe="compute",tn="auto",en="manipulation",nn="none",rn="pan-x",an="pan-y";Y.prototype={set:function(t){t==Qe&&(t=this.compute()),Ze&&(this.manager.element.style[Ke]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return o(this.manager.recognizers,function(e){f(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),U(t.join(" "))},preventDefaults:function(t){if(!Ze){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var i=this.actions,r=g(i,nn),a=g(i,an),s=g(i,rn);return r||a&&n&qe||s&&n&De?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var sn=1,on=2,un=4,ln=8,cn=ln,hn=16,fn=32;G.prototype={defaults:{},set:function(t){return u(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(s(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=K(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return s(t,"dropRecognizeWith",this)?this:(t=K(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(s(t,"requireFailure",this))return this;var e=this.requireFail;return t=K(t,this),-1===_(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(s(t,"dropRequireFailure",this))return this;t=K(t,this);var e=_(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(n.options.event+(e?J(i):""),t)}var n=this,i=this.state;ln>i&&e(!0),e(),i>=ln&&e(!0)},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=fn)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(fn|sn)))return!1;t++}return!0},recognize:function(t){var e=u({},t);return f(this.options.enable,[this,e])?(this.state&(cn|hn|fn)&&(this.state=sn),this.state=this.process(e),void(this.state&(on|un|ln|hn)&&this.tryEmit(e))):(this.reset(),void(this.state=fn))},process:function(){},getTouchAction:function(){},reset:function(){}},c(Z,G,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(on|un),r=this.attrTest(t);return i&&(n&Oe||!r)?e|hn:i||r?n&Se?e|ln:e&on?e|un:on:fn}}),c(Q,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:Fe},getTouchAction:function(){var t=this.options.direction,e=[];return t&qe&&e.push(an),t&De&&e.push(rn),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,a=t.deltaX,s=t.deltaY;return r&e.direction||(e.direction&qe?(r=0===a?Ie:0>a?Ce:je,n=a!=this.pX,i=Math.abs(t.deltaX)):(r=0===s?Ie:0>s?Me:Ne,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return Z.prototype.attrTest.call(this,t)&&(this.state&on||!(this.state&on)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=$(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),c(te,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[nn]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&on)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),c(ee,G,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[tn]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(Se|Oe)&&!r)this.reset();else if(t.eventType&Ae)this.reset(),this._timer=a(function(){this.state=cn,this.tryEmit()},e.time,this);else if(t.eventType&Se)return cn;return fn},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===cn&&(t&&t.eventType&Se?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=pe(),this.manager.emit(this.options.event,this._input)))}}),c(ne,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[nn]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&on)}}),c(ie,Z,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:qe|De,pointers:1},getTouchAction:function(){return Q.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(qe|De)?e=t.velocity:n&qe?e=t.velocityX:n&De&&(e=t.velocityY),this._super.attrTest.call(this,t)&&n&t.direction&&t.distance>this.options.threshold&&de(e)>this.options.velocity&&t.eventType&Se},emit:function(t){var e=$(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),c(re,G,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[en]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Ae&&0===this.count)return this.failTimeout();if(i&&r&&n){if(t.eventType!=Se)return this.failTimeout();var s=this.pTime?t.timeStamp-this.pTime<e.interval:!0,o=!this.pCenter||D(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,o&&s?this.count+=1:this.count=1,this._input=t;var u=this.count%e.taps;if(0===u)return this.hasRequireFailures()?(this._timer=a(function(){this.state=cn,this.tryEmit()},e.interval,this),on):cn}return fn},failTimeout:function(){return this._timer=a(function(){this.state=fn},this.options.interval,this),fn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==cn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ae.VERSION="2.0.4",ae.defaults={domEvents:!1,touchAction:Qe,enable:!0,inputTarget:null,inputClass:null,preset:[[ne,{enable:!1}],[te,{enable:!1},["rotate"]],[ie,{direction:qe}],[Q,{direction:qe},["swipe"]],[re],[re,{event:"doubletap",taps:2},["tap"]],[ee]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var dn=1,pn=2;se.prototype={set:function(t){return u(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?pn:dn},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&cn)&&(r=e.curRecognizer=null);for(var a=0;a<i.length;)n=i[a],e.stopped===pn||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&n.state&(on|un|ln)&&(r=e.curRecognizer=n),a++}},get:function(t){if(t instanceof G)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(s(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(s(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(_(e,t),1),this.touchAction.update(),this},on:function(t,e){var n=this.handlers;return o(y(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this},off:function(t,e){var n=this.handlers;return o(y(t),function(t){e?n[t].splice(_(n[t],e),1):delete n[t]}),this},emit:function(t,e){this.options.domEvents&&ue(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&oe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(ae,{INPUT_START:Ae,INPUT_MOVE:ke,INPUT_END:Se,INPUT_CANCEL:Oe,STATE_POSSIBLE:sn,STATE_BEGAN:on,STATE_CHANGED:un,STATE_ENDED:ln,STATE_RECOGNIZED:cn,STATE_CANCELLED:hn,STATE_FAILED:fn,DIRECTION_NONE:Ie,DIRECTION_LEFT:Ce,DIRECTION_RIGHT:je,DIRECTION_UP:Me,DIRECTION_DOWN:Ne,DIRECTION_HORIZONTAL:qe,DIRECTION_VERTICAL:De,DIRECTION_ALL:Fe,Manager:se,Input:A,TouchAction:Y,TouchInput:H,MouseInput:z,PointerEventInput:P,TouchMouseInput:X,SingleTouchInput:L,Recognizer:G,AttrRecognizer:Z,Tap:re,Pan:Q,Swipe:ie,Pinch:te,Rotate:ne,Press:ee,on:p,off:v,each:o,merge:l,extend:u,inherit:c,bindFn:h,prefixed:x}),typeof define==he&&define.amd?define(function(){return ae}):"undefined"!=typeof e&&e.exports?e.exports=ae:t[i]=ae}(window,document,"Hammer")},{}],60:[function(){},{}],61:[function(t,e,n){function i(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-r)),i=setTimeout(t,n);return r=e,i}n=e.exports=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||i;var r=(new Date).getTime(),a=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout;n.cancel=function(t){a.call(window,t)}},{}]},{},[2]);