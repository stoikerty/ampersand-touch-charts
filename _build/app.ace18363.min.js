!function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t){var e=t("domready"),n=t("./views/body");window.app={init:function(){e(function(){console.log("starting app"),self.view=new n({el:document.body})})}},window.app.init()},{"./views/body":3,domready:28}],2:[function(t,e,n){!function(t,r){if("function"==typeof define&&define.amd)define([],r);else if("object"==typeof n)e.exports=r();else{if("undefined"==typeof t||t!==Object(t))throw new Error("templatizer: window does not exist or is not an object");t.templatizer=r()}}(this,function(){var e=(function(){function e(t){return null!=t&&""!==t}function n(t){return(Array.isArray(t)?t.map(n):t&&"object"==typeof t?Object.keys(t).filter(function(e){return t[e]}):[t]).filter(e).join(" ")}var r={};return r.merge=function i(t,n){if(1===arguments.length){for(var r=t[0],o=1;o<t.length;o++)r=i(r,t[o]);return r}var s=t["class"],a=n["class"];(s||a)&&(s=s||[],a=a||[],Array.isArray(s)||(s=[s]),Array.isArray(a)||(a=[a]),t["class"]=s.concat(a).filter(e));for(var u in n)"class"!=u&&(t[u]=n[u]);return t},r.joinClasses=n,r.cls=function(t,e){for(var i=[],o=0;o<t.length;o++)i.push(e&&e[o]?r.escape(n([t[o]])):n(t[o]));var s=n(i);return s.length?' class="'+s+'"':""},r.style=function(t){return t&&"object"==typeof t?Object.keys(t).map(function(e){return e+":"+t[e]}).join(";"):t},r.attr=function(t,e,n,i){return"style"===t&&(e=r.style(e)),"boolean"==typeof e||null==e?e?" "+(i?t:t+'="'+t+'"'):"":0==t.indexOf("data")&&"string"!=typeof e?(-1!==JSON.stringify(e).indexOf("&")&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),e&&"function"==typeof e.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+t+"='"+JSON.stringify(e).replace(/'/g,"&apos;")+"'"):n?(e&&"function"==typeof e.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+t+'="'+r.escape(e)+'"'):(e&&"function"==typeof e.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+t+'="'+e+'"')},r.attrs=function(t,e){var i=[],o=Object.keys(t);if(o.length)for(var s=0;s<o.length;++s){var a=o[s],u=t[a];"class"==a?(u=n(u))&&i.push(" "+a+'="'+u+'"'):i.push(r.attr(a,u,!1,e))}return i.join("")},r.escape=function(t){var e=String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return e===""+t?t:e},r.rethrow=function o(e,n,r,i){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&n||i))throw e.message+=" on line "+r,e;try{i=i||t("fs").readFileSync(n,"utf8")}catch(s){o(e,null,r)}var a=3,u=i.split("\n"),c=Math.max(r-a,0),l=Math.min(u.length,r+a),a=u.slice(c,l).map(function(t,e){var n=e+c+1;return(n==r?"  > ":"    ")+n+"| "+t}).join("\n");throw e.path=n,e.message=(n||"Jade")+":"+r+"\n"+a+"\n\n"+e.message,e},r}(),{});return e.chart={},e.chart.input={},e.chart.output={},e.body=function(){return'<body><div data-hook="interface-container" class="interface-container"></div></body>'},e.chart.input["item-series"]=function(){return'<ul class="series"><input placeholder="" maxlength="100" class="item"/></ul>'},e.chart.input["title-item"]=function(){return'<ul class="title"><input placeholder="" maxlength="100" class="item"/></ul>'},e.chart["interface"]=function(){return'<div class="chart-interface"><div data-hook="input" class="input"></div><div data-hook="output" class="output"></div></div>'},e.chart.output["chart-item"]=function(){return'<ul class="chart-item"><div class="series-title"></div><div class="series-container"></div></ul>'},e.chart.output["series-item"]=function(){return'<ul class="series"><li class="item"></li></ul>'},e})},{fs:29}],3:[function(t,e){var n=t("ampersand-view"),r=t("../templates"),i=t("./chart-interface");e.exports=n.extend({template:r.body,autoRender:!0,initialize:function(){document.title="{ Project }"},render:function(){this.renderWithTemplate(),console.log("document body rendered"),this.interfaceContainerEl=this.queryByHook("interface-container"),this.view=new i({el:this.interfaceContainerEl})}})},{"../templates":2,"./chart-interface":4,"ampersand-view":5}],4:[function(t,e){var n=t("ampersand-view"),r=t("../templates");e.exports=n.extend({template:r.chart["interface"],autoRender:!0,initialize:function(){},render:function(){this.renderWithTemplate(),console.log("outputting interface + some css"),this.inputEl=this.queryByHook("input"),this.outputEl=this.queryByHook("output"),console.log(this.inputEl),console.log(this.outputEl)}})},{"../templates":2,"ampersand-view":5}],5:[function(t,e){function n(t){this.cid=s.uniqueId("view"),t||(t={});var e=t.parent;delete t.parent,f.call(this,t,{init:!1,parent:e}),this.on("change:el",this._handleElementChange,this),this._parsedBindings=c(this.bindings,this),this._initializeBindings(),t.el&&!this.autoRender&&this._handleElementChange(),this._initializeSubviews(),this.template=t.template||this.template,this.initialize.apply(this,arguments),this.set(s.pick(t,h)),this.autoRender&&this.template&&this.render()}var r=t("ampersand-state"),i=t("ampersand-collection-view"),o=t("domify"),s=t("underscore"),a=t("events-mixin"),u=t("matches-selector"),c=t("ampersand-dom-bindings"),l=t("get-object-path"),f=r.extend({dataTypes:{element:{set:function(t){return{val:t,type:t instanceof Element?"element":typeof t}},compare:function(t,e){return t===e}},collection:{set:function(t){return{val:t,type:t&&t.isCollection?"collection":typeof t}},compare:function(t,e){return t===e}}},props:{model:"state",el:"element",collection:"collection"},derived:{rendered:{deps:["el"],fn:function(){return!!this.el}},hasData:{deps:["model"],fn:function(){return!!this.model}}}}),h=["model","collection","el"];n.prototype=Object.create(f.prototype),s.extend(n.prototype,{query:function(t){return t?"string"==typeof t?u(this.el,t)?this.el:this.el.querySelector(t)||void 0:t:this.el},queryAll:function(t){var e=[];return this.el?""===t?[this.el]:(u(this.el,t)&&e.push(this.el),e.concat(Array.prototype.slice.call(this.el.querySelectorAll(t)))):e},queryByHook:function(t){return this.query('[data-hook~="'+t+'"]')},initialize:function(){},render:function(){return this.renderWithTemplate(this),this},remove:function(){var t=this._parsedBindings;return this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),this._subviews&&s.chain(this._subviews).flatten().invoke("remove"),this.stopListening(),s.each(t,function(e,n){s.each(e,function(e,r){delete t[n][r]}),delete t[n]}),this.trigger("remove",this),this},_handleElementChange:function(){return this.eventManager&&this.eventManager.unbind(),this.eventManager=a(this.el,this),this.delegateEvents(),this._applyBindingsForKey(),this},delegateEvents:function(t){if(!t&&!(t=s.result(this,"events")))return this;this.undelegateEvents();for(var e in t)this.eventManager.bind(e,t[e]);return this},undelegateEvents:function(){return this.eventManager.unbind(),this},registerSubview:function(t){return this._subviews||(this._subviews=[]),this._subviews.push(t),t.el&&(t.parent=this),t},renderSubview:function(t,e){return"string"==typeof e&&(e=this.query(e)),this.registerSubview(t),t.render(),(e||this.el).appendChild(t.el),t},_applyBindingsForKey:function(t){if(this.el){var e,n=this._parsedBindings.getGrouped(t);for(e in n)n[e].forEach(function(t){t(this.el,l(this,e),s.last(e.split(".")))},this)}},_initializeBindings:function(){this.bindings&&this.on("all",function(t){"change:"===t.slice(0,7)&&this._applyBindingsForKey(t.split(":")[1])},this)},_initializeSubviews:function(){if(this.subviews)for(var t in this.subviews)this._parseSubview(this.subviews[t],t)},_parseSubview:function(t,e){function n(){var t,r;this.el&&(t=this.query(i.selector))&&(!i.waitFor||l(this,i.waitFor))&&(r=this[e]=i.prepareView.call(this,t),r.render(),this.registerSubview(r),this.off("change",n))}var r=this,i={selector:t.container||'[data-hook="'+t.hook+'"]',waitFor:t.waitFor||"",prepareView:t.prepareView||function(e){return new t.constructor({el:e,parent:r})}};this.on("change",n,this)},renderWithTemplate:function(t,e){var n=e||this.template;if(!n)throw new Error("Template string or function needed.");var r=s.isString(n)?n:n.call(this,t||this);s.isString(r)&&(r=o(r));var i=this.el&&this.el.parentNode;if(i&&i.replaceChild(r,this.el),"#document-fragment"===r.nodeName)throw new Error("Views can only have one root element.");return this.el=r,this},cacheElements:function(t){for(var e in t)this[e]=this.query(t[e])},listenToAndRun:function(t,e,n){var r=s.bind(n,this);this.listenTo(t,e,r),r()},animateRemove:function(){this.remove()},renderCollection:function(t,e,n,r){var o="string"==typeof n?this.query(n):n,a=s.extend({collection:t,el:o||this.el,view:e,parent:this,viewOptions:{parent:this}},r),u=new i(a);return u.render(),this.registerSubview(u)}}),n.extend=f.extend,e.exports=n},{"ampersand-collection-view":6,"ampersand-dom-bindings":11,"ampersand-state":14,domify:19,"events-mixin":20,"get-object-path":25,"matches-selector":26,underscore:27}],6:[function(t,e){function n(t){if(!t)throw new ReferenceError("Collection view missing required parameters: collection, el");if(!t.collection)throw new ReferenceError("Collection view requires a collection");if(!t.el&&!this.insertSelf)throw new ReferenceError("Collection view requires an el");r.extend(this,r.pick(t,s)),this.views=[],this.listenTo(this.collection,"add",this._addViewForModel),this.listenTo(this.collection,"remove",this._removeViewForModel),this.listenTo(this.collection,"sort",this._rerenderAll),this.listenTo(this.collection,"refresh reset",this._reset)}var r=t("underscore"),i=t("backbone-events-standalone"),o=t("ampersand-class-extend"),s=["collection","el","viewOptions","view","emptyView","filter","reverse","parent"];r.extend(n.prototype,i,{render:function(){return this._renderAll(),this},remove:function(){r.invoke(this.views,"remove"),this.stopListening()},_getViewByModel:function(t){return r.find(this.views,function(e){return t===e.model})},_createViewForModel:function(t,e){var n=new this.view(r({model:t,collection:this.collection}).extend(this.viewOptions));return this.views.push(n),n.parent=this,n.renderedByParentView=!0,n.render(e),n},_getOrCreateByModel:function(t,e){return this._getViewByModel(t)||this._createViewForModel(t,e)},_addViewForModel:function(t,e,n){var r=this.filter?this.filter(t):!0;if(r){this.renderedEmptyView&&this.renderedEmptyView.remove();var i=this._getOrCreateByModel(t,{containerEl:this.el});n&&n.rerender?this._insertView(i):this._insertViewAtIndex(i)}},_insertViewAtIndex:function(t){if(!t.insertSelf){var e,n,r=this.collection.indexOf(t.model);e=this.collection.at(this.reverse?r-1:r+1),n=this._getViewByModel(e),n?this.el.insertBefore(t.el,n&&n.el):this.el.appendChild(t.el)}},_insertView:function(t){t.insertSelf||(this.reverse&&this.el.firstChild?this.el.insertBefore(t.el,this.el.firstChild):this.el.appendChild(t.el))},_removeViewForModel:function(t){var e=this._getViewByModel(t);if(e){var n=this.views.indexOf(e);-1!==n&&(e=this.views.splice(n,1)[0],this._removeView(e),0===this.views.length&&this._renderEmptyView())}},_removeView:function(t){t.animateRemove?t.animateRemove():t.remove()},_renderAll:function(){this.collection.each(this._addViewForModel,this),0===this.views.length&&this._renderEmptyView()},_rerenderAll:function(t,e){e=e||{},this.collection.each(function(t){this._addViewForModel(t,this,r.extend(e,{rerender:!0}))},this)},_renderEmptyView:function(){if(this.emptyView){var t=this.renderedEmptyView=new this.emptyView;this.el.appendChild(t.render().el)}},_reset:function(){var t=this.collection.map(this._getOrCreateByModel,this),e=r.difference(this.views,t);e.forEach(this._removeView,this),this.views=t,this._rerenderAll(),0===this.views.length&&this._renderEmptyView()}}),n.extend=o,e.exports=n},{"ampersand-class-extend":7,"backbone-events-standalone":10,underscore:27}],7:[function(t,e){var n=t("extend-object"),r=function(t){var e,r=this,i=[].slice.call(arguments);e=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return r.apply(this,arguments)},n(e,r);var o=function(){this.constructor=e};return o.prototype=r.prototype,e.prototype=new o,t&&(i.unshift(e.prototype),n.apply(null,i)),e.__super__=r.prototype,e};e.exports=r},{"extend-object":8}],8:[function(t,e){var n=[],r=n.forEach,i=n.slice;e.exports=function(t){return r.call(i.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t}},{}],9:[function(t,e,n){!function(){function t(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++c+"";return t?t+e:e},has:function(t,e){return a.call(t,e)},each:function(t,e,n){if(null!=t)if(s&&t.forEach===s)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,i=t.length;i>r;r++)if(e.call(n,t[r],r,t)===o)return}else for(var a in t)if(this.has(t,a)&&e.call(n,t[a],a,t)===o)return},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var r,i=this,o={},s=Array.prototype.forEach,a=Object.prototype.hasOwnProperty,u=Array.prototype.slice,c=0,l=t();r={on:function(t,e,n){if(!h(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!h(this,"once",t,[e,n])||!e)return this;var r=this,i=l.once(function(){r.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,n)},off:function(t,e,n){var r,i,o,s,a,u,c,f;if(!this._events||!h(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:l.keys(this._events),a=0,u=s.length;u>a;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=r=[],e||n)for(c=0,f=o.length;f>c;c++)i=o[c],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=u.call(arguments,1);if(!h(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&p(n,e),r&&p(r,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var i=!e&&!n;"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t);for(var o in r)r[o].off(e,n,this),i&&delete this._listeners[o];return this}};var f=/\s+/,h=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(f.test(n)){for(var o=n.split(f),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(r));return!1}return!0},p=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}},d={listenTo:"on",listenToOnce:"once"};l.each(d,function(t,e){r[e]=function(e,n,r){var i=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=l.uniqueId("l"));return i[o]=e,"object"==typeof n&&(r=this),e[t](n,r,this),this}}),r.bind=r.on,r.unbind=r.off,r.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return l.each(e,function(e){t[e]=this[e]},this),t},"function"==typeof define?define(function(){return r}):"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=r),n.BackboneEvents=r):i.BackboneEvents=r}(this)},{}],10:[function(t,e){e.exports=t("./backbone-events-standalone")},{"./backbone-events-standalone":9}],11:[function(t,e){function n(t,e){if(""===e)return[t];var n=[];return a(t,e)&&n.push(t),n.concat(u.call(t.querySelectorAll(e)))}function r(t){return Array.isArray(t)?t:[t]}function i(t,e){var i,o=t.type||"text",a="function"==typeof o,u=function(){return"string"==typeof t.selector?t.selector:t.hook?'[data-hook~="'+t.hook+'"]':""}(),c=t.yes,l=t.no,f=!(!c&&!l);if(a)return function(t,r){n(t,u).forEach(function(t){o.call(e,t,r,i)}),i=r};if("text"===o)return function(t,e){n(t,u).forEach(function(t){s.text(t,e)})};if("class"===o)return function(t,e){n(t,u).forEach(function(t){s.switchClass(t,i,e)}),i=e};if("attribute"===o){if(!t.name)throw Error('attribute bindings must have a "name"');return function(e,o){var a=r(t.name);n(e,u).forEach(function(t){a.forEach(function(e){s.setAttribute(t,e,o)})}),i=o}}if("value"===o)return function(t,e){n(t,u).forEach(function(t){e||0===e||(e=""),document.activeElement!==t&&(t.value=e)}),i=e};if("booleanClass"===o)return f?(c=r(c||""),l=r(l||""),function(t,e){var r=e?l:c,i=e?c:l;n(t,u).forEach(function(t){r.forEach(function(e){s.removeClass(t,e)}),i.forEach(function(e){s.addClass(t,e)})})}):function(e,i,o){var a=r(t.name||o);n(e,u).forEach(function(t){a.forEach(function(e){s[i?"addClass":"removeClass"](t,e)})})};if("booleanAttribute"===o)return function(e,i,o){var a=r(t.name||o);n(e,u).forEach(function(t){a.forEach(function(e){s[i?"addAttribute":"removeAttribute"](t,e)})})};if("toggle"===o)return f?function(t,e){n(t,c).forEach(function(t){s[e?"show":"hide"](t)}),n(t,l).forEach(function(t){s[e?"hide":"show"](t)})}:function(t,e){n(t,u).forEach(function(t){s[e?"show":"hide"](t)})};if("switch"===o){if(!t.cases)throw Error('switch bindings must have "cases"');return function(e,r){for(var i in t.cases)n(e,t.cases[i]).forEach(function(t){s[r===i?"show":"hide"](t)})}}if("innerHTML"===o)return function(t,e){n(t,u).forEach(function(t){s.html(t,e)})};if("switchClass"===o){if(!t.cases)throw Error('switchClass bindings must have "cases"');return function(e,i,o){var a=r(t.name||o);for(var u in t.cases)n(e,t.cases[u]).forEach(function(t){a.forEach(function(e){s[i===u?"addClass":"removeClass"](t,e)})})}}throw new Error("no such binding type: "+o)}var o=t("key-tree-store"),s=t("ampersand-dom"),a=t("matches-selector");e.exports=function(t,e){var n,r,s=new o;for(n in t)r=t[n],"string"==typeof r?s.add(n,i({type:"text",selector:r})):r.forEach?r.forEach(function(t){s.add(n,i(t,e))}):s.add(n,i(r,e));return s};var u=Array.prototype.slice},{"ampersand-dom":12,"key-tree-store":13,"matches-selector":26}],12:[function(t,e){function n(t){return t||0===t?t:""}function r(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}function i(t,e){var n=t[e];return e in t&&(n===!0||n===!1)}function o(t){return"true"===c.getAttribute(t,"data-anddom-hidden")}function s(t){c.setAttribute(t,"data-anddom-display",t.style.display)}function a(t){t.style.display=c.getAttribute(t,"data-anddom-display")||"",c.removeAttribute(t,"data-anddom-hidden")}function u(t){c.setAttribute(t,"data-anddom-hidden","true"),t.style.display="none"}var c=e.exports={text:function(t,e){t.textContent=n(e)},addClass:function(t,e){e=n(e),e&&(Array.isArray(e)?e.forEach(function(e){c.addClass(t,e)}):t.classList?t.classList.add(e):r(t,e)||(t.classList?t.classList.add(e):t.className+=" "+e))},removeClass:function(t,e){Array.isArray(e)?e.forEach(function(e){c.removeClass(t,e)}):t.classList?(e=n(e),e&&t.classList.remove(e)):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},hasClass:r,switchClass:function(t,e,n){e&&this.removeClass(t,e),this.addClass(t,n)},addAttribute:function(t,e){t.setAttribute(e,""),i(t,e)&&(t[e]=!0)},removeAttribute:function(t,e){t.removeAttribute(e),i(t,e)&&(t[e]=!1)},setAttribute:function(t,e,r){t.setAttribute(e,n(r))},getAttribute:function(t,e){return t.getAttribute(e)},hide:function(t){o(t)||(s(t),u(t))},show:function(t){a(t)},html:function(t,e){t.innerHTML=e}}},{}],13:[function(t,e){function n(){this.storage={}}var r=Array.prototype.slice;n.prototype.add=function(t,e){var n=this.storage[t]||(this.storage[t]=[]);n.push(e)},n.prototype.remove=function(t){var e,n;for(e in this.storage)n=this.storage[e],n.some(function(e,r){return e===t?(n.splice(r,1),!0):void 0})},n.prototype.get=function(t){var e,n=[];for(e in this.storage)t&&t!==e&&0!==e.indexOf(t+".")||(n=n.concat(this.storage[e]));return n},n.prototype.getGrouped=function(t){var e,n={};for(e in this.storage)t&&t!==e&&0!==e.indexOf(t+".")||(n[e]=r.call(this.storage[e]));return n},n.prototype.getAll=function(t){var e,n={};for(e in this.storage)(t===e||0===e.indexOf(t+"."))&&(n[e]=r.call(this.storage[e]));return n},n.prototype.run=function(t,e){var n=r.call(arguments,2);this.get(t).forEach(function(t){t.apply(e||this,n)})},e.exports=n},{}],14:[function(t,e){function n(t,e){e||(e={}),this.cid||(this.cid=s.uniqueId("state")),this._events={},this._values={},this._definition=Object.create(this._definition),e.parse&&(t=this.parse(t,e)),this.parent=e.parent,this.collection=e.collection,this._keyTree=new u,this._initCollections(),this._initChildren(),this._cache={},this._previousAttributes={},t&&this.set(t,s.extend({silent:!0,initial:!0},e)),this._changed={},this._derived&&this._initDerived(),e.init!==!1&&this.initialize.apply(this,arguments)}function r(t,e,n,r){var i,o,a=t._definition[e]={};if(s.isString(n))i=t._ensureValidType(n),i&&(a.type=i);else{if(s.isArray(n)&&(o=n,n={type:o[0],required:o[1],"default":o[2]}),i=t._ensureValidType(n.type),i&&(a.type=i),n.required&&(a.required=!0),n["default"]&&"object"==typeof n["default"])throw new TypeError("The default value for "+e+" cannot be an object/array, must be a value or a function which returns a value/object/array");a["default"]=n["default"],a.allowNull=n.allowNull?n.allowNull:!1,n.setOnce&&(a.setOnce=!0),a.required&&s.isUndefined(a["default"])&&!a.setOnce&&(a["default"]=t._getDefaultForType(i)),a.test=n.test,a.values=n.values}return r&&(a.session=!0),Object.defineProperty(t,e,{set:function(t){this.set(e,t)},get:function(){var t=this._values[e],n=this._dataTypes[a.type];return"undefined"!=typeof t?(n&&n.get&&(t=n.get(t)),t):(t=s.result(a,"default"),this._values[e]=t,t)}}),a}function i(t,e,n){var r=t._derived[e]={fn:s.isFunction(n)?n:n.fn,cache:n.cache!==!1,depList:n.deps||[]};s.each(r.depList,function(n){t._deps[n]=s(t._deps[n]||[]).union([e])}),Object.defineProperty(t,e,{get:function(){return this._getDerivedProperty(e)},set:function(){throw new TypeError('"'+e+"\" is a derived property, it can't be set directly.")}})}function o(t){var e,n=this,o=[].slice.call(arguments);e=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return n.apply(this,arguments)},s.extend(e,n);var a=function(){this.constructor=e};a.prototype=n.prototype,e.prototype=new a,e.prototype._derived=s.extend({},n.prototype._derived),e.prototype._deps=s.extend({},n.prototype._deps),e.prototype._definition=s.extend({},n.prototype._definition),e.prototype._collections=s.extend({},n.prototype._collections),e.prototype._children=s.extend({},n.prototype._children),e.prototype._dataTypes=s.extend({},n.prototype._dataTypes||f),t&&o.forEach(function(t){var n=["dataTypes","props","session","derived","collections","children"];t.dataTypes&&s.each(t.dataTypes,function(t,n){e.prototype._dataTypes[n]=t}),t.props&&s.each(t.props,function(t,n){r(e.prototype,n,t)}),t.session&&s.each(t.session,function(t,n){r(e.prototype,n,t,!0)}),t.derived&&s.each(t.derived,function(t,n){i(e.prototype,n,t)}),t.collections&&s.each(t.collections,function(t,n){e.prototype._collections[n]=t}),t.children&&s.each(t.children,function(t,n){e.prototype._children[n]=t}),s.extend(e.prototype,s.omit(t,n))});Object.prototype.toString;return e.__super__=n.prototype,e}var s=t("underscore"),a=t("backbone-events-standalone"),u=t("key-tree-store"),c=t("array-next"),l=/^change:/;s.extend(n.prototype,a,{extraProperties:"ignore",idAttribute:"id",namespaceAttribute:"namespace",typeAttribute:"modelType",initialize:function(){return this},getId:function(){return this[this.idAttribute]},getNamespace:function(){return this[this.namespaceAttribute]},getType:function(){return this[this.typeAttribute]},isNew:function(){return null==this.getId()},escape:function(t){return s.escape(this.get(t))},isValid:function(t){return this._validate({},s.extend(t||{},{validate:!0}))},parse:function(t){return t},serialize:function(){var t=this.getAttributes({props:!0},!0);return s.each(this._children,function(e,n){t[n]=this[n].serialize()},this),s.each(this._collections,function(e,n){t[n]=this[n].serialize()},this),t},set:function(t,e,n){var r,i,o,a,u,c,l,f,h,p,d,v,y,g,m,b,_=this,w=this.extraProperties;if(s.isObject(t)||null===t?(h=t,n=e):(h={},h[t]=e),n=n||{},!this._validate(h,n))return!1;v=n.unset,d=n.silent,g=n.initial,i=[],r=this._changing,this._changing=!0,r||(this._previousAttributes=this.attributes,this._changed={});for(f in h){if(a=h[f],o=typeof a,y=this._values[f],u=this._definition[f],!u){if(this._children[f]||this._collections[f]){this[f].set(a,n);continue}if("ignore"===w)continue;if("reject"===w)throw new TypeError('No "'+f+'" property defined on '+(this.type||"this")+' model and extraProperties not set to "ignore" or "allow"');if("allow"===w)u=this._createPropertyDefinition(f,"any");else if(w)throw new TypeError('Invalid value for extraProperties: "'+w+'"')}if(b=this._getCompareForType(u.type),p=this._dataTypes[u.type],p&&p.set&&(c=p.set(a),a=c.val,o=c.type),u.test&&(l=u.test.call(this,a,o)))throw new TypeError("Property '"+f+"' failed validation with error: "+l);if(s.isUndefined(a)&&u.required)throw new TypeError("Required property '"+f+"' must be of type "+u.type+". Tried to set "+a);if(s.isNull(a)&&u.required&&!u.allowNull)throw new TypeError("Property '"+f+"' must be of type "+u.type+" (cannot be null). Tried to set "+a);if(u.type&&"any"!==u.type&&u.type!==o&&!s.isNull(a)&&!s.isUndefined(a))throw new TypeError("Property '"+f+"' must be of type "+u.type+". Tried to set "+a);if(u.values&&!s.contains(u.values,a))throw new TypeError("Property '"+f+"' must be one of values: "+u.values.join(", ")+". Tried to set "+a);if(m=!b(y,a,f),u.setOnce&&void 0!==y&&m&&!g)throw new TypeError("Property '"+f+"' can only be set once.");m?(i.push({prev:y,val:a,key:f}),_._changed[f]=a):delete _._changed[f]}if(s.each(i,function(t){_._previousAttributes[t.key]=t.prev,v?delete _._values[t.key]:_._values[t.key]=t.val}),!d&&i.length&&(_._pending=!0),d||s.each(i,function(t){_.trigger("change:"+t.key,_,t.val,n)}),r)return this;if(!d)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},get:function(t){return this[t]},toggle:function(t){var e=this._definition[t];if("boolean"===e.type)this[t]=!this[t];else{if(!e||!e.values)throw new TypeError("Can only toggle properties that are type `boolean` or have `values` array.");this[t]=c(e.values,this[t])}return this},previousAttributes:function(){return s.clone(this._previousAttributes)},hasChanged:function(t){return null==t?!s.isEmpty(this._changed):s.has(this._changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?s.clone(this._changed):!1;var e,n,r,i=!1,o=this._changing?this._previousAttributes:this.attributes;for(var a in t)n=this._definition[a],n&&(r=this._getCompareForType(n.type),r(o[a],e=t[a])||((i||(i={}))[a]=e));return i},toJSON:function(){return this.serialize()},unset:function(t,e){{var n,r=this._definition[t];r.type}return r.required?(n=s.result(r,"default"),this.set(t,n,e)):this.set(t,n,s.extend({},e,{unset:!0}))},clear:function(t){var e=this;return s.each(s.keys(this.attributes),function(n){e.unset(n,t)}),this},previous:function(t){return null!=t&&Object.keys(this._previousAttributes).length?this._previousAttributes[t]:null},_getDefaultForType:function(t){var e=this._dataTypes[t];return e&&e["default"]},_getCompareForType:function(t){var e=this._dataTypes[t];return e&&e.compare?s.bind(e.compare,this):s.isEqual},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=s.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,s.extend(e||{},{validationError:n})),!1):!0},_createPropertyDefinition:function(t,e,n){return r(this,t,e,n)},_ensureValidType:function(t){return s.contains(["string","number","boolean","array","object","date","any"].concat(s.keys(this._dataTypes)),t)?t:void 0},getAttributes:function(t,e){t||(t={}),s.defaults(t,{session:!1,props:!1,derived:!1});var n,r,i,o={};for(r in this._definition)i=this._definition[r],(t.session&&i.session||t.props&&!i.session)&&(n=e?this._values[r]:this[r],"undefined"==typeof n&&(n=s.result(i,"default")),"undefined"!=typeof n&&(o[r]=n));if(t.derived)for(r in this._derived)o[r]=this[r];return o},_initDerived:function(){var t=this;s.each(this._derived,function(e,n){var r=t._derived[n];r.deps=r.depList;var i=function(e){e=e||{};var i=r.fn.call(t);t._cache[n]===i&&r.cache||(r.cache&&(t._previousAttributes[n]=t._cache[n]),t._cache[n]=i,t.trigger("change:"+n,t,t._cache[n]))};r.deps.forEach(function(e){t._keyTree.add(e,i)})}),this.on("all",function(e){l.test(e)&&t._keyTree.get(e.split(":")[1]).forEach(function(t){t()})},this)},_getDerivedProperty:function(t,e){return this._derived[t].cache?((e||!this._cache.hasOwnProperty(t))&&(this._cache[t]=this._derived[t].fn.apply(this)),this._cache[t]):this._derived[t].fn.apply(this)},_initCollections:function(){var t;if(this._collections)for(t in this._collections)this[t]=new this._collections[t](null,{parent:this})},_initChildren:function(){var t;if(this._children)for(t in this._children)this[t]=new this._children[t]({},{parent:this}),this.listenTo(this[t],"all",this._getEventBubblingHandler(t))},_getEventBubblingHandler:function(t){return s.bind(function(e,n,r){l.test(e)?this.trigger("change:"+t+"."+e.split(":")[1],n,r):"change"===e&&this.trigger("change",this)},this)},_verifyRequired:function(){var t=this.attributes;for(var e in this._definition)if(this._definition[e].required&&"undefined"==typeof t[e])return!1;return!0}}),Object.defineProperties(n.prototype,{attributes:{get:function(){return this.getAttributes({props:!0,session:!0})}},all:{get:function(){return this.getAttributes({session:!0,props:!0,derived:!0})}},isState:{get:function(){return!0},set:function(){}}});var f={string:{"default":function(){return""}},date:{set:function(t){var e;if(s.isDate(t))e="date",t=t.valueOf();else try{var n=new Date(t).valueOf();if(isNaN(n)&&(n=new Date(parseInt(t,10)).valueOf(),isNaN(n)))throw TypeError;t=n,e="date"}catch(r){e=typeof t}return{val:t,type:e}},get:function(t){return new Date(t)},"default":function(){return new Date}},array:{set:function(t){return{val:t,type:s.isArray(t)?"array":typeof t}},"default":function(){return[]}},object:{set:function(t){var e=typeof t;return"object"!==e&&s.isUndefined(t)&&(t=null,e="object"),{val:t,type:e}},"default":function(){return{}}},state:{set:function(t){var e=t instanceof n||t&&t.isState;return e?{val:t,type:"state"}:{val:t,type:typeof t}},compare:function(t,e,n){var r=t===e;return r||(t&&this.stopListening(t),null!=e&&this.listenTo(e,"all",this._getEventBubblingHandler(n))),r}}};n.extend=o,e.exports=n},{"array-next":15,"backbone-events-standalone":17,"key-tree-store":18,underscore:27}],15:[function(t,e){e.exports=function(t,e){var n=t.length,r=t.indexOf(e)+1;return r>n-1&&(r=0),t[r]}},{}],16:[function(t,e,n){!function(){function t(){return{keys:Object.keys,uniqueId:function(t){var e=++c+"";return t?t+e:e},has:function(t,e){return a.call(t,e)},each:function(t,e,n){if(null!=t)if(s&&t.forEach===s)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,i=t.length;i>r;r++)if(e.call(n,t[r],r,t)===o)return}else for(var a in t)if(this.has(t,a)&&e.call(n,t[a],a,t)===o)return},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var r,i=this,o={},s=Array.prototype.forEach,a=Object.prototype.hasOwnProperty,u=Array.prototype.slice,c=0,l=t();
r={on:function(t,e,n){if(!h(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!h(this,"once",t,[e,n])||!e)return this;var r=this,i=l.once(function(){r.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,n)},off:function(t,e,n){var r,i,o,s,a,u,c,f;if(!this._events||!h(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:l.keys(this._events),a=0,u=s.length;u>a;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=r=[],e||n)for(c=0,f=o.length;f>c;c++)i=o[c],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=u.call(arguments,1);if(!h(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&p(n,e),r&&p(r,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var i=!e&&!n;"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t);for(var o in r)r[o].off(e,n,this),i&&delete this._listeners[o];return this}};var f=/\s+/,h=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(f.test(n)){for(var o=n.split(f),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(r));return!1}return!0},p=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}},d={listenTo:"on",listenToOnce:"once"};l.each(d,function(t,e){r[e]=function(e,n,r){var i=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=l.uniqueId("l"));return i[o]=e,"object"==typeof n&&(r=this),e[t](n,r,this),this}}),r.bind=r.on,r.unbind=r.off,r.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return l.each(e,function(e){t[e]=this[e]},this),t},"function"==typeof define?define(function(){return r}):"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=r),n.BackboneEvents=r):i.BackboneEvents=r}(this)},{}],17:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{"./backbone-events-standalone":16}],18:[function(t,e){function n(){this.storage={}}n.prototype.add=function(t,e){var n=this.storage[t]||(this.storage[t]=[]);n.push(e)},n.prototype.remove=function(t){var e,n;for(e in this.storage)n=this.storage[e],n.some(function(e,r){return e===t?(n.splice(r,1),!0):void 0})},n.prototype.get=function(t){var e,n=[];for(e in this.storage)(t===e||0===e.indexOf(t+"."))&&(n=n.concat(this.storage[e]));return n},e.exports=n},{}],19:[function(t,e){function n(t,e){if("string"!=typeof t)throw new TypeError("String expected");e||(e=document);var n=/<([\w:]+)/.exec(t);if(!n)return e.createTextNode(t);t=t.replace(/^\s+|\s+$/g,"");var r=n[1];if("body"==r){var i=e.createElement("html");return i.innerHTML=t,i.removeChild(i.lastChild)}var s=o[r]||o._default,a=s[0],u=s[1],c=s[2],i=e.createElement("div");for(i.innerHTML=u+t+c;a--;)i=i.lastChild;if(i.firstChild==i.lastChild)return i.removeChild(i.firstChild);for(var l=e.createDocumentFragment();i.firstChild;)l.appendChild(i.removeChild(i.firstChild));return l}e.exports=n;var r=document.createElement("div");r.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';var i=!r.getElementsByTagName("link").length;r=void 0;var o={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:i?[1,"X<div>","</div>"]:[0,"",""]};o.td=o.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],o.option=o.optgroup=[1,'<select multiple="multiple">',"</select>"],o.thead=o.tbody=o.colgroup=o.caption=o.tfoot=[1,"<table>","</table>"],o.text=o.circle=o.ellipse=o.line=o.path=o.polygon=o.polyline=o.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],20:[function(t,e){function n(t,e){if(!(this instanceof n))return new n(t,e);if(!t)throw new Error("element required");if(!e)throw new Error("object required");this.el=t,this.obj=e,this._events={}}function r(t){var e=t.split(/ +/);return{name:e.shift(),selector:e.join(" ")}}var i=t("component-event"),o=t("delegate-events"),s=["focus","blur"];e.exports=n,n.prototype.sub=function(t,e,n){this._events[t]=this._events[t]||{},this._events[t][e]=n},n.prototype.bind=function(t,e){function n(){var t=[].slice.call(arguments).concat(l);u[e].apply(u,t)}var s=r(t),a=this.el,u=this.obj,c=s.name,e=e||"on"+c,l=[].slice.call(arguments,2);return s.selector?n=o.bind(a,s.selector,c,n):i.bind(a,c,n),this.sub(c,e,n),n},n.prototype.unbind=function(t,e){if(0==arguments.length)return this.unbindAll();if(1==arguments.length)return this.unbindAllOf(t);var n=this._events[t],r=-1!==s.indexOf(t);if(n){var o=n[e];o&&i.unbind(this.el,t,o,r)}},n.prototype.unbindAll=function(){for(var t in this._events)this.unbindAllOf(t)},n.prototype.unbindAllOf=function(t){var e=this._events[t];if(e)for(var n in e)this.unbind(t,n)}},{"component-event":21,"delegate-events":22}],21:[function(t,e,n){var r=window.addEventListener?"addEventListener":"attachEvent",i=window.removeEventListener?"removeEventListener":"detachEvent",o="addEventListener"!==r?"on":"";n.bind=function(t,e,n,i){return t[r](o+e,n,i||!1),n},n.unbind=function(t,e,n,r){return t[i](o+e,n,r||!1),n}},{}],22:[function(t,e,n){var r=t("closest"),i=t("event"),o=["focus","blur"];n.bind=function(t,e,n,s,a){return-1!==o.indexOf(n)&&(a=!0),i.bind(t,n,function(n){var i=n.target||n.srcElement;n.delegateTarget=r(i,e,!0,t),n.delegateTarget&&s.call(t,n)},a)},n.unbind=function(t,e,n,r){-1!==o.indexOf(e)&&(r=!0),i.unbind(t,e,n,r)}},{closest:23,event:21}],23:[function(t,e){var n=t("matches-selector");e.exports=function(t,e,r){for(var i=r?t:t.parentNode;i&&i!==document;){if(n(i,e))return i;i=i.parentNode}}},{"matches-selector":24}],24:[function(t,e){function n(t,e){if(i)return i.call(t,e);for(var n=t.parentNode.querySelectorAll(e),r=0;r<n.length;++r)if(n[r]==t)return!0;return!1}var r=Element.prototype,i=r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;e.exports=n},{}],25:[function(t,e){function n(t,e){if(-1==e.indexOf(".")&&-1==e.indexOf("["))return t[e];for(var n,r=e.split(/\.|\[|\]/g),i=-1,o=r.length;++i<o;)if(0==i&&(n=t),r[i]){if(void 0==n)break;n=n[r[i]]}return n}e.exports=n},{}],26:[function(t,e){"use strict";function n(t,e){if(i)return i.call(t,e);for(var n=t.parentNode.querySelectorAll(e),r=0;r<n.length;r++)if(n[r]==t)return!0;return!1}var r=Element.prototype,i=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;e.exports=n},{}],27:[function(t,e,n){(function(){var t=this,r=t._,i={},o=Array.prototype,s=Object.prototype,a=Function.prototype,u=o.push,c=o.slice,l=o.concat,f=s.toString,h=s.hasOwnProperty,p=o.forEach,d=o.map,v=o.reduce,y=o.reduceRight,g=o.filter,m=o.every,b=o.some,_=o.indexOf,w=o.lastIndexOf,x=Array.isArray,E=Object.keys,A=a.bind,k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=k),n._=k):t._=k,k.VERSION="1.6.0";var O=k.each=k.forEach=function(t,e,n){if(null==t)return t;if(p&&t.forEach===p)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,o=t.length;o>r;r++)if(e.call(n,t[r],r,t)===i)return}else for(var s=k.keys(t),r=0,o=s.length;o>r;r++)if(e.call(n,t[s[r]],s[r],t)===i)return;return t};k.map=k.collect=function(t,e,n){var r=[];return null==t?r:d&&t.map===d?t.map(e,n):(O(t,function(t,i,o){r.push(e.call(n,t,i,o))}),r)};var j="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),v&&t.reduce===v)return r&&(e=k.bind(e,r)),i?t.reduce(e,n):t.reduce(e);if(O(t,function(t,o,s){i?n=e.call(r,n,t,o,s):(n=t,i=!0)}),!i)throw new TypeError(j);return n},k.reduceRight=k.foldr=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),y&&t.reduceRight===y)return r&&(e=k.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var s=k.keys(t);o=s.length}if(O(t,function(a,u,c){u=s?s[--o]:--o,i?n=e.call(r,n,t[u],u,c):(n=t[u],i=!0)}),!i)throw new TypeError(j);return n},k.find=k.detect=function(t,e,n){var r;return T(t,function(t,i,o){return e.call(n,t,i,o)?(r=t,!0):void 0}),r},k.filter=k.select=function(t,e,n){var r=[];return null==t?r:g&&t.filter===g?t.filter(e,n):(O(t,function(t,i,o){e.call(n,t,i,o)&&r.push(t)}),r)},k.reject=function(t,e,n){return k.filter(t,function(t,r,i){return!e.call(n,t,r,i)},n)},k.every=k.all=function(t,e,n){e||(e=k.identity);var r=!0;return null==t?r:m&&t.every===m?t.every(e,n):(O(t,function(t,o,s){return(r=r&&e.call(n,t,o,s))?void 0:i}),!!r)};var T=k.some=k.any=function(t,e,n){e||(e=k.identity);var r=!1;return null==t?r:b&&t.some===b?t.some(e,n):(O(t,function(t,o,s){return r||(r=e.call(n,t,o,s))?i:void 0}),!!r)};k.contains=k.include=function(t,e){return null==t?!1:_&&t.indexOf===_?-1!=t.indexOf(e):T(t,function(t){return t===e})},k.invoke=function(t,e){var n=c.call(arguments,2),r=k.isFunction(e);return k.map(t,function(t){return(r?e:t[e]).apply(t,n)})},k.pluck=function(t,e){return k.map(t,k.property(e))},k.where=function(t,e){return k.filter(t,k.matches(e))},k.findWhere=function(t,e){return k.find(t,k.matches(e))},k.max=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var r=-1/0,i=-1/0;return O(t,function(t,o,s){var a=e?e.call(n,t,o,s):t;a>i&&(r=t,i=a)}),r},k.min=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var r=1/0,i=1/0;return O(t,function(t,o,s){var a=e?e.call(n,t,o,s):t;i>a&&(r=t,i=a)}),r},k.shuffle=function(t){var e,n=0,r=[];return O(t,function(t){e=k.random(n++),r[n-1]=r[e],r[e]=t}),r},k.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=k.values(t)),t[k.random(t.length-1)]):k.shuffle(t).slice(0,Math.max(0,e))};var C=function(t){return null==t?k.identity:k.isFunction(t)?t:k.property(t)};k.sortBy=function(t,e,n){return e=C(e),k.pluck(k.map(t,function(t,r,i){return{value:t,index:r,criteria:e.call(n,t,r,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var S=function(t){return function(e,n,r){var i={};return n=C(n),O(e,function(o,s){var a=n.call(r,o,s,e);t(i,a,o)}),i}};k.groupBy=S(function(t,e,n){k.has(t,e)?t[e].push(n):t[e]=[n]}),k.indexBy=S(function(t,e,n){t[e]=n}),k.countBy=S(function(t,e){k.has(t,e)?t[e]++:t[e]=1}),k.sortedIndex=function(t,e,n,r){n=C(n);for(var i=n.call(r,e),o=0,s=t.length;s>o;){var a=o+s>>>1;n.call(r,t[a])<i?o=a+1:s=a}return o},k.toArray=function(t){return t?k.isArray(t)?c.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:c.call(t,0,e)},k.initial=function(t,e,n){return c.call(t,0,t.length-(null==e||n?1:e))},k.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:c.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var q=function(t,e,n){return e&&k.every(t,k.isArray)?l.apply(n,t):(O(t,function(t){k.isArray(t)||k.isArguments(t)?e?u.apply(n,t):q(t,e,n):n.push(t)}),n)};k.flatten=function(t,e){return q(t,e,[])},k.without=function(t){return k.difference(t,c.call(arguments,1))},k.partition=function(t,e){var n=[],r=[];return O(t,function(t){(e(t)?n:r).push(t)}),[n,r]},k.uniq=k.unique=function(t,e,n,r){k.isFunction(e)&&(r=n,n=e,e=!1);var i=n?k.map(t,n,r):t,o=[],s=[];return O(i,function(n,r){(e?r&&s[s.length-1]===n:k.contains(s,n))||(s.push(n),o.push(t[r]))}),o},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(t){var e=c.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.contains(e,t)})})},k.difference=function(t){var e=l.apply(o,c.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=k.max(k.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=k.pluck(arguments,""+n);return e},k.object=function(t,e){if(null==t)return{};for(var n={},r=0,i=t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},k.indexOf=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return r=k.sortedIndex(t,e),t[r]===e?r:-1;r=0>n?Math.max(0,i+n):n}if(_&&t.indexOf===_)return t.indexOf(e,n);for(;i>r;r++)if(t[r]===e)return r;return-1},k.lastIndexOf=function(t,e,n){if(null==t)return-1;var r=null!=n;if(w&&t.lastIndexOf===w)return r?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var i=r?n:t.length;i--;)if(t[i]===e)return i;return-1},k.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,o=new Array(r);r>i;)o[i++]=t,t+=n;return o};var M=function(){};k.bind=function(t,e){var n,r;if(A&&t.bind===A)return A.apply(t,c.call(arguments,1));if(!k.isFunction(t))throw new TypeError;return n=c.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(c.call(arguments)));M.prototype=t.prototype;var i=new M;M.prototype=null;var o=t.apply(i,n.concat(c.call(arguments)));return Object(o)===o?o:i}},k.partial=function(t){var e=c.call(arguments,1);return function(){for(var n=0,r=e.slice(),i=0,o=r.length;o>i;i++)r[i]===k&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return t.apply(this,r)}},k.bindAll=function(t){var e=c.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return O(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var n={};return e||(e=k.identity),function(){var r=e.apply(this,arguments);return k.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},k.delay=function(t,e){var n=c.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(c.call(arguments,1)))},k.throttle=function(t,e,n){var r,i,o,s=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:k.now(),s=null,o=t.apply(r,i),r=i=null};return function(){var c=k.now();a||n.leading!==!1||(a=c);var l=e-(c-a);return r=this,i=arguments,0>=l?(clearTimeout(s),s=null,a=c,o=t.apply(r,i),r=i=null):s||n.trailing===!1||(s=setTimeout(u,l)),o}},k.debounce=function(t,e,n){var r,i,o,s,a,u=function(){var c=k.now()-s;e>c?r=setTimeout(u,e-c):(r=null,n||(a=t.apply(o,i),o=i=null))};return function(){o=this,i=arguments,s=k.now();var c=n&&!r;return r||(r=setTimeout(u,e)),c&&(a=t.apply(o,i),o=i=null),a}},k.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},k.wrap=function(t,e){return k.partial(e,t)},k.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},k.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},k.keys=function(t){if(!k.isObject(t))return[];if(E)return E(t);var e=[];for(var n in t)k.has(t,n)&&e.push(n);return e},k.values=function(t){for(var e=k.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},k.pairs=function(t){for(var e=k.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},k.invert=function(t){for(var e={},n=k.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},k.functions=k.methods=function(t){var e=[];for(var n in t)k.isFunction(t[n])&&e.push(n);return e.sort()},k.extend=function(t){return O(c.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},k.pick=function(t){var e={},n=l.apply(o,c.call(arguments,1));return O(n,function(n){n in t&&(e[n]=t[n])}),e},k.omit=function(t){var e={},n=l.apply(o,c.call(arguments,1));for(var r in t)k.contains(n,r)||(e[r]=t[r]);return e},k.defaults=function(t){return O(c.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var N=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var i=f.call(t);if(i!=f.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return r[o]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!(k.isFunction(s)&&s instanceof s&&k.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),r.push(e);var u=0,c=!0;if("[object Array]"==i){if(u=t.length,c=u==e.length)for(;u--&&(c=N(t[u],e[u],n,r)););}else{for(var l in t)if(k.has(t,l)&&(u++,!(c=k.has(e,l)&&N(t[l],e[l],n,r))))break;if(c){for(l in e)if(k.has(e,l)&&!u--)break;c=!u}}return n.pop(),r.pop(),c};k.isEqual=function(t,e){return N(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=x||function(t){return"[object Array]"==f.call(t)},k.isObject=function(t){return t===Object(t)},O(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return f.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==f.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return h.call(t,e)},k.noConflict=function(){return t._=r,this},k.identity=function(t){return t},k.constant=function(t){return function(){return t}},k.property=function(t){return function(e){return e[t]}},k.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},k.times=function(t,e,n){for(var r=Array(Math.max(0,t)),i=0;t>i;i++)r[i]=e.call(n,i);return r},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},k.now=Date.now||function(){return(new Date).getTime()};var V={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};V.unescape=k.invert(V.escape);var F={escape:new RegExp("["+k.keys(V.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(V.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(F[t],function(e){return V[t][e]})}}),k.result=function(t,e){if(null==t)return void 0;var n=t[e];return k.isFunction(n)?n.call(t):n},k.mixin=function(t){O(k.functions(t),function(e){var n=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),P.call(this,n.apply(k,t))}})};var B=0;k.uniqueId=function(t){var e=++B+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,n){var r;n=k.defaults({},n,k.templateSettings);var i=new RegExp([(n.escape||I).source,(n.interpolate||I).source,(n.evaluate||I).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(i,function(e,n,r,i,a){return s+=t.slice(o,a).replace(R,function(t){return"\\"+L[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(s+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(s+="';\n"+i+"\n__p+='"),o=a+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return r(e,k);var u=function(t){return r.call(this,t,k)};return u.source="function("+(n.variable||"obj")+"){\n"+s+"}",u},k.chain=function(t){return k(t).chain()};var P=function(t){return this._chain?k(t).chain():t};k.mixin(k),O(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];k.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],P.call(this,n)}}),O(["concat","join","slice"],function(t){var e=o[t];k.prototype[t]=function(){return P.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return k})}).call(this)},{}],28:[function(t,e){!function(t,n){"undefined"!=typeof e?e.exports=n():"function"==typeof define&&"object"==typeof define.amd?define(n):this[t]=n()}("domready",function(){var t,e=[],n=document,r=n.documentElement.doScroll,i="DOMContentLoaded",o=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return o||n.addEventListener(i,t=function(){for(n.removeEventListener(i,t),o=1;t=e.shift();)t()}),function(t){o?t():e.push(t)}})},{}],29:[function(){},{}]},{},[1]);